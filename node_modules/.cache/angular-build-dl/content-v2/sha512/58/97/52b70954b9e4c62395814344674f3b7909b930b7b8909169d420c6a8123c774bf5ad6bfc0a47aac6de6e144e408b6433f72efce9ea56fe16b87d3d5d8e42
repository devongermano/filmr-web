{"version":3,"sources":["webpack:///node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js","webpack:///node_modules/filepond-plugin-media-preview/dist/filepond-plugin-media-preview.js","webpack:///node_modules/filepond/dist/filepond.js","webpack:///node_modules/ngx-filepond/__ivy_ngcc__/esm2015/ngx-filepond.js","webpack:///src/app/common/modal/modal-footer/modal-footer.component.ts","webpack:///src/app/common/modal/modal-footer/modal-footer.component.html","webpack:///src/app/common/modal/modal-header/modal-header.component.ts","webpack:///src/app/common/modal/modal-header/modal-header.component.html","webpack:///src/app/common/modal/modal.component.ts","webpack:///src/app/common/modal/modal.component.html","webpack:///src/app/common/modal/modal.module.ts","webpack:///src/app/common/post-dialogue/post-dialogue.component.ts","webpack:///src/app/common/post-dialogue/post-dialogue.component.html","webpack:///src/app/common/post-dialogue/post-dialogue.module.ts","webpack:///src/app/common/post/post.component.ts","webpack:///src/app/common/post/post.component.html","webpack:///src/app/common/post/post.module.ts","webpack:///src/app/common/spinner/spinner.component.ts","webpack:///src/app/common/spinner/spinner.component.html","webpack:///src/app/common/spinner/spinner.module.ts","webpack:///src/app/pages/home/home-routing.module.ts","webpack:///src/app/pages/home/home.component.ts","webpack:///src/app/pages/home/home.component.html","webpack:///src/app/pages/home/home.module.ts"],"names":["global","factory","module","exports","isPreviewableImage","file","test","type","_typeof","obj","Symbol","iterator","constructor","prototype","REACT_ELEMENT_TYPE","_jsx","props","key","children","defaultProps","childrenLength","arguments","length","propName","childArray","Array","i","$$typeof","undefined","ref","_owner","_asyncIterator","iterable","method","asyncIterator","call","TypeError","_AwaitValue","value","wrapped","_AsyncGenerator","gen","front","back","send","arg","Promise","resolve","reject","request","next","resume","result","wrappedAwait","then","settle","done","err","_invoke","_wrapAsyncGenerator","fn","apply","_awaitAsyncGenerator","_asyncGeneratorDelegate","inner","awaitWrap","iter","waiting","pump","asyncGeneratorStep","_next","_throw","info","error","_asyncToGenerator","self","args","_classCallCheck","instance","Constructor","_defineProperties","target","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","_defineEnumerableProperties","descs","desc","getOwnPropertySymbols","objectSymbols","sym","_defaults","defaults","keys","getOwnPropertyNames","getOwnPropertyDescriptor","_defineProperty","_extends","assign","source","hasOwnProperty","_objectSpread","ownKeys","concat","filter","forEach","_inherits","subClass","superClass","create","_setPrototypeOf","_inheritsLoose","__proto__","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","p","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","_construct","Parent","Class","a","push","Function","bind","_isNativeFunction","indexOf","_wrapNativeSuper","_cache","Map","has","get","set","Wrapper","_instanceof","left","right","hasInstance","_interopRequireDefault","__esModule","_interopRequireWildcard","newObj","_newArrowCheck","innerThis","boundThis","_objectDestructuringEmpty","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_superPropBase","object","property","_get","receiver","base","_set","isStrict","s","Error","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","_taggedTemplateLiteralLoose","_temporalRef","val","name","_temporalUndefined","_readOnlyError","_classNameTDZError","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_slicedToArrayLoose","_iterableToArrayLimitLoose","_toArray","_iterableToArray","_toConsumableArray","_arrayWithoutHoles","_nonIterableSpread","isArray","arr2","from","_arr","_n","_d","_e","_i","_s","_iterator","_step","_skipFirstGeneratorNext","it","_toPrimitive","input","hint","prim","toPrimitive","res","String","Number","_toPropertyKey","_initializerWarningHelper","context","_initializerDefineProperty","initializer","_applyDecoratedDescriptor","decorators","reverse","reduce","decorator","id","_classPrivateFieldLooseKey","_classPrivateFieldLooseBase","privateKey","_classPrivateFieldGet","privateMap","_classPrivateFieldSet","_classStaticPrivateFieldSpecGet","classConstructor","_classStaticPrivateFieldSpecSet","_classStaticPrivateMethodGet","_classStaticPrivateMethodSet","_decorate","mixins","api","_getDecoratorsApi","r","initialize","O","initializeInstanceElements","decorated","elements","decorateClass","_coalesceClassElements","d","map","_createElementDescriptor","initializeClassElements","F","runClassFinishers","finishers","elementsDefinitionOrder","kind","element","placement","defineClassElement","proto","newElements","placements","own","addElementPlacement","_hasDecorators","elementFinishersExtras","decorateElement","extras","decorateConstructor","silent","splice","elementObject","fromElementDescriptor","elementFinisherExtras","toElementFinisherExtras","finisher","newExtras","j","fromClassDescriptor","elementsAndFinisher","toClassDescriptor","k","toStringTag","toElementDescriptors","elementObjects","toElementDescriptor","disallowProperty","_optionalCallableProperty","newConstructor","objectType","def","_coalesceGetterSetter","other","isSameElement","find","_isDataDescriptor","_classPrivateMethodGet","privateSet","_classPrivateMethodSet","_wrapRegExp","re","groups","BabelRegExp","_RegExp","RegExp","_super","_groups","WeakMap","_this","exec","str","buildGroups","replace","substitution","_","g","vectorMultiply","v","amount","createVector","x","y","vectorAdd","b","vectorNormalize","l","Math","sqrt","vectorRotate","radians","origin","cos","sin","t","getMarkupValue","size","scalar","axis","parseFloat","min","width","height","getMarkupStyles","markup","scale","lineStyle","borderStyle","fill","backgroundColor","fontColor","stroke","borderColor","lineColor","strokeWidth","borderWidth","lineWidth","lineCap","lineJoin","dashes","join","opacity","isDefined","getMarkupRect","rect","top","bottom","pointsToPathShape","points","point","index","setAttributes","attr","setAttribute","ns","svg","tag","document","createElementNS","updateRect","styles","updateEllipse","cx","cy","rx","ry","IMAGE_FIT_STYLE","contain","cover","updateImage","preserveAspectRatio","fit","TEXT_ANCHOR","center","updateText","fontSize","fontFamily","fontWeight","textAlign","text","textContent","updateLine","line","childNodes","begin","end","x1","y1","x2","y2","lineDecoration","style","display","arrowBeginRotationPoint","arrowBeginCenter","arrowBeginA","arrowBeginB","arrowEndRotationPoint","arrowEndCenter","arrowEndA","arrowEndB","updatePath","createShape","node","createImage","shape","onload","setAttributeNS","src","createLine","appendChild","CREATE_TYPE_ROUTES","image","ellipse","path","UPDATE_TYPE_ROUTES","createMarkupByType","updateMarkupByType","MARKUP_RECT","toOptionalFraction","prepareMarkup","_markup","prev","curr","zIndex","sortMarkupByZIndex","createMarkupView","utils","createView","ignoreRect","apis","write","_ref","root","dirty","crop","resize","viewWidth","viewHeight","cropWidth","cropHeight","_size","outputWidth","outputHeight","outputFit","mode","outputUpscale","upscale","shouldUpscale","scalarWidth","scalarHeight","max","innerHTML","markupFilter","query","sort","settings","createVector$1","vectorDot","vectorSubtract","vectorDistanceSquared","vectorDistance","getOffsetPointOnEdge","rotation","A","B","C","sinA","sinB","sinC","cosC","ratio","c","getRotatedRectSize","w","h","hor","ver","tl","abs","tr","bl","calculateCanvasSize","canvasAspectRatio","zoom","imageAspectRatio","canvasWidth","canvasHeight","imgWidth","imgHeight","getImageRectZoomFactor","imageRect","cropRect","imageWidth","imageHeight","rotatedCropSize","getCenteredCropRect","container","aspectRatio","getCurrentCropSize","imageSize","canvasSize","canvasCenter","stage","shouldLimit","scaleToFit","stageZoomFactor","widthFloat","heightFloat","round","IMAGE_SCALE_SPRING_PROPS","stiffness","damping","mass","createBitmapView","createImageCanvasWrapper","animations","originX","originY","scaleX","scaleY","translateX","translateY","rotateZ","_ref2","bitmap","appendChildView","createChildView","_ref3","flip","horizontal","vertical","createClipView","duration","didWriteView","_ref4","background","_ref5","createMarkup","destroyMarkup","removeChildView","transparencyIndicator","dataset","_ref6","shouldOptimize","translation","PI","cropAspectRatio","imageView","createImageView","_ref7","clip","_ref8","hidden","containerWidth","containerHeight","fixedPreviewHeight","minPreviewHeight","maxPreviewHeight","panelAspectRatio","allowMultiple","clipHeight","clipWidth","SVG_MASK","checkedMyBases","SVGMaskUniqueId","createImageOverlayView","fpAPI","querySelector","window","location","href","hash","classList","add","status","BitmapWorker","onmessage","createImageBitmap","data","message","postMessage","ColorMatrixWorker","imageData","matrix","colorMatrix","m11","m12","m13","m14","m15","m21","m22","m23","m24","m25","m31","m32","m33","m34","m35","m41","m42","m43","m44","m45","buffer","getImageSize","url","cb","Image","naturalWidth","naturalHeight","transforms","fixImageOrientation","ctx","orientation","transform","createPreviewImage","canvas","createElement","getContext","drawImage","isBitmap","MAX_WIDTH","MAX_HEIGHT","calculateAverageColor","ceil","getImageData","averageColor","floor","cloneCanvas","cloneImageData","ImageData","createImageData","Uint8ClampedArray","loadImage","img","crossOrigin","onerror","createImageWrapperView","OverlayView","ImageView","createWorker","applyFilter","putImageData","worker","post","response","terminate","removeImageView","_destroy","shiftImage","images","shift","imageViewBin","pushImage","item","getMetadata","childViews","setTimeout","dispatch","didUpdateItemMetadata","action","change","_imageView","canCreateImageBitmap","userAgent","navigator","isFirefox","match","firefoxVersion","parseInt","didCreatePreviewContainer","fileURL","URL","createObjectURL","drawPreview","loadPreviewFallback","previewImageLoaded","revokeObjectURL","exif","pixelDensityFactor","devicePixelRatio","zoomFactor","scaleFactor","previewImageRatio","previewContainerWidth","previewContainerHeight","previewImage","setMetadata","close","overlayShadow","imageBitmap","didDrawPreview","restoreOverlay","_ref9","overlayError","overlaySuccess","didThrowError","_ref10","didCompleteProcessing","_ref11","_ref12","destroy","_ref13","_ref14","createRoute","DID_IMAGE_PREVIEW_DRAW","DID_IMAGE_PREVIEW_CONTAINER_CREATE","DID_FINISH_CALCULATE_PREVIEWSIZE","DID_UPDATE_ITEM_METADATA","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_INVALID","DID_COMPLETE_ITEM_PROCESSING","DID_START_ITEM_PROCESSING","DID_REVERT_ITEM_PROCESSING","_ref15","viewsToRemove","plugin","addFilter","Type","isFile","imagePreviewView","viewAPI","is","view","didLoadItem","archived","supportsCreateImageBitmap","maxPreviewFileSize","imagePreview","queue","rescaleItem","itemPanelAspectRatio","fixedHeight","_root$ref","previewAspectRatio","previewHeightMax","itemWidth","previewHeight","didResizeView","shouldRescale","didCalculatePreviewSize","shouldDrawPreview","registerWriter","DID_RESIZE_ROOT","DID_STOP_RESIZE","DID_LOAD_ITEM","DID_IMAGE_PREVIEW_CALCULATE_SIZE","requestAnimationFrame","options","allowImagePreview","BOOLEAN","imagePreviewFilterItem","FUNCTION","imagePreviewHeight","INT","imagePreviewMinHeight","imagePreviewMaxHeight","imagePreviewMaxFileSize","imagePreviewZoomFactor","imagePreviewUpscale","imagePreviewMaxInstantPreviewFileSize","imagePreviewTransparencyIndicator","STRING","imagePreviewCalculateAverageImageColor","imagePreviewMarkupShow","imagePreviewMarkupFilter","isBrowser","dispatchEvent","CustomEvent","detail","isPreviewableVideo","isPreviewableAudio","AudioPlayer","mediaEl","audioElems","onplayhead","timelineWidth","timeline","offsetWidth","playhead","moveplayheadFn","moveplayhead","registerListeners","addEventListener","timeUpdate","timelineClicked","button","play","mouseDown","mouseUp","paused","pause","toggle","playPercent","currentTime","marginLeft","event","newMargLeft","clientX","getPosition","clickPercent","removeEventListener","el","getBoundingClientRect","createMediaView","tagName","media","docfrag","createDocumentFragment","audio","className","DID_MEDIA_PREVIEW_LOAD","webkitURL","blob","Blob","factor","videoWidth","videoHeight","createMediaWrapperView","DID_MEDIA_PREVIEW_CONTAINER_CREATE","mediaWrapperView","mediaPreview","allowVideoPreview","allowAudioPreview","isNode","HTMLElement","createStore","initialState","queries","actions","state","actionQueue","dispatchQueue","getState","processActionQueue","processDispatchQueue","isBlocking","actionHandlers","_queryHandles","_len","_key","queryHandles","definition","forin","createObject","getAttribute","hasAttribute","svgElements","isSVGElement","includes","attributes","parent","child","insertBefore","parentNode","removeChild","IS_BROWSER","testElement","getChildCount","getViewRect","elementRect","offset","outer","childView","isRectIgnored","childViewRect","expandRect","calculateRectSize","marginBottom","marginRight","isNumber","thereYet","position","destination","velocity","errorMargin","spring","_ref$stiffness","_ref$damping","_ref$mass","resting","interpolate","ts","skipToEndState","f","onupdate","oncomplete","setTarget","easeLinear","easeInOutQuad","tween","_ref$duration","_ref$easing","easing","_ref$delay","delay","start","animator","createAnimator","category","addGetSet","overwrite","getter","setter","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","initialProps","animation","prop","addEvent","removeEvent","listeners","viewState","events","remove","on","off","findIndex","rotateX","rotateY","currentProps","getOffset","getScale","getRect","propsHaveChanged","applyStyles","newProps","perspective","elementCurrentStyle","cssText","Mixins","layoutCalculated","paddingTop","marginTop","offsetLeft","offsetTop","offsetHeight","scrollTop","offsetParent","_ref$tag","_ref$name","_ref$attributes","_ref$read","read","_ref$write","_ref$create","_ref$destroy","_ref$filterFrameActio","filterFrameActionsForChild","_ref$didCreateView","didCreateView","_ref$didWriteView","_ref$ignoreRect","_ref$ignoreRectUpdate","ignoreRectUpdate","_ref$mixins","store","getComputedStyle","frameRect","isResting","activeMixins","writers","readers","destroyers","getElement","getChildViews","getReference","getStyle","_read","shouldUpdate","internalAPI","reader","_write","frameActions","writer","writerResting","timestamp","mixin","mixinResting","childResting","destroyer","sharedAPIDefinition","internalAPIDefinition","needle","linkView","unlinkView","registerReader","registerDestroyer","invalidateLayout","externalAPIDefinition","mixinAPIDefinition","mixinAPI","childCount","createPainter","fps","painter","interval","last","requestTick","cancelTick","setTimerType","tick","performance","now","clearTimeout","cancelAnimationFrame","delta","routes","_ref$actions","newNode","referenceNode","insertAfter","nextSibling","isEmpty","trim","toArray","splitter","split","isBoolean","toBoolean","isString","toNumber","toInt","toFloat","isInt","isFinite","toBytes","naturalFileSize","isFunction","toFunctionReference","string","levels","level","methods","process","patch","revert","fetch","restore","load","createServerAPI","outline","timeout","headers","createAction","withCredentials","ondata","parts","header","toServerAPI","isNull","isObject","isAPI","getType","replaceSingleQuotes","conversionTable","array","int","number","bytes","_function","serverapi","JSON","parse","convertTo","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","option","createOption","currentValue","createOptions","optionDefinition","createInitialState","items","listUpdateTimeout","itemUpdateTimeout","processingQueue","fromCamels","separator","part","toLowerCase","createOptionAPI","toUpperCase","createOptionActions","createOptionQueries","InteractionMethod","API","DROP","BROWSE","PASTE","NONE","getUniqueId","random","substr","enumerableOnly","symbols","_objectSpread2","getOwnPropertyDescriptors","_classPrivateFieldDestructureSet","__destrObj","arrayRemove","run","sync","listener","_fire","fire","fireSync","_len2","_key2","onOnce","_cb","copyObjectPropertiesToObject","PRIVATE","createItemAPI","removeReleasedItems","released","ItemStatus","INIT","IDLE","PROCESSING_QUEUED","PROCESSING","PROCESSING_COMPLETE","PROCESSING_ERROR","PROCESSING_REVERT_ERROR","LOADING","LOAD_ERROR","FileOrigin","INPUT","LIMBO","LOCAL","getNonNumeric","getDecimalSeparator","toLocaleString","getThousandsSeparator","decimalSeparator","thousandsStringWithSeparator","thousandsStringWithoutSeparator","NUMBER","ARRAY","OBJECT","ACTION","SERVER_API","REGEX","filters","applyFilterChain","matchingFilters","initialFilter","current","applyFilters","extendDefaultOptions","additionalOptions","defaultOptions","getOptions","setOptions","opts","disabled","required","captureMethod","allowSyncAcceptAttribute","allowDrop","allowBrowse","allowPaste","allowReplace","allowRevert","allowRemove","allowProcess","allowReorder","allowDirectoriesOnly","forceRevert","maxFiles","checkValidity","itemInsertLocationFreedom","itemInsertLocation","itemInsertInterval","dropOnPage","dropOnElement","dropValidation","ignoredFiles","instantUpload","maxParallelUploads","chunkUploads","chunkForce","chunkSize","chunkRetryDelays","server","fileSizeBase","labelDecimalSeparator","labelThousandsSeparator","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","iconRemove","iconProcess","iconRetry","iconUndo","iconDone","oninit","onwarning","onactivatefile","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onreorderfiles","beforeDropFile","beforeAddFile","beforeRemoveFile","stylePanelLayout","stylePanelAspectRatio","styleItemPanelAspectRatio","styleButtonRemoveItemPosition","styleButtonProcessItemPosition","styleLoadIndicatorPosition","styleProgressIndicatorPosition","styleButtonRemoveItemAlign","files","getItemByQuery","getNumericAspectRatioFromString","getActiveItems","Status","EMPTY","ERROR","BUSY","READY","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","isItemInBusyState","isItemInReadyState","GET_STATUS","some","GET_ITEM","GET_ACTIVE_ITEM","GET_ACTIVE_ITEMS","GET_ITEMS","GET_ITEM_NAME","filename","GET_ITEM_SIZE","fileSize","GET_STYLES","GET_PANEL_ASPECT_RATIO","isShapeCircle","GET_ITEM_PANEL_ASPECT_RATIO","GET_ITEMS_BY_STATUS","GET_TOTAL_ITEMS","IS_ASYNC","hasRoomForItem","count","maxFileCount","limit","arrayInsert","insertItem","isBase64DataURI","getFilenameFromURL","pop","getExtensionFromFilename","guesstimateExtension","subtype","leftPad","padding","getDateString","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getFileFromBlob","extension","lastModifiedDate","_relativePath","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","createBlob","arrayBuffer","mimeType","BB","bb","append","getBlob","getBlobFromByteStringWithMimeType","byteString","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","getMimeTypeFromBase64DataURI","dataURI","getBase64DataFromBase64DataURI","getByteStringFromBase64DataURI","atob","getBlobFromBase64DataURI","getFileFromBase64DataURI","getFileNameFromHeader","matches","decodeURI","getFileSizeFromHeader","getTranfserIdFromHeader","getFileInfoFromHeaders","rows","_iteratorNormalCompletion","_didIteratorError","_iteratorError","createFileLoader","fetchFn","complete","progress","getProgress","abort","File","loadURL","body","code","computable","total","fileinfo","setSource","isGet","sendRequest","onheaders","onprogress","ontimeout","onabort","aborted","xhr","headersReceived","encodeURI","encodeURIComponent","stringify","XMLHttpRequest","upload","lengthComputable","loaded","onreadystatechange","readyState","open","unescape","setRequestHeader","responseType","createResponse","createTimeoutResponse","getAllResponseHeaders","hasQS","buildURL","createFetchFunction","apiUrl","statusText","ChunkStatus","QUEUED","COMPLETE","WAITING","processFileChunked","metadata","transfer","chunks","chunkTransferId","chunkServer","serverId","fd","getResponseHeader","requestTransferId","formData","FormData","requestParams","requestTransferOffset","requestUrl","lastChunkIndex","retries","completeProcessingChunks","canProcessChunk","chunk","processChunk","every","processChunks","updateTotalProgress","retryProcessChunk","totalBytesTransfered","totalSize","totalProcessing","abortChunks","createFileProcessorFunction","canChunkUpload","shouldChunkUpload","willChunkUpload","createProcessorFunction","params","createRevertFunction","uniqueFileId","getRandomNumber","createPerceivedPerformanceUpdater","tickMin","tickMax","runtime","clear","createFileProcessor","processFn","perceivedProgress","perceivedPerformanceUpdater","perceivedDuration","progressFn","completeFn","transferId","reset","getDuration","getFilenameWithoutExtension","lastIndexOf","createFileStub","deepCloneObject","createItem","serverFileReference","frozen","processingAborted","activeLoader","activeProcessor","abortProcessingRequestComplete","setStatus","getFileExtension","getFileType","getFileSize","getFile","loader","meta","success","retryLoad","abortLoad","processor","onprocess","console","requestProcessing","abortProcessing","revertFileUpload","_setMetadata","filenameWithoutExtension","fileExtension","fileType","relativePath","extend","handler","itemAPI","release","archive","getItemIndexByQuery","getItemById","itemId","fetchBlob","getDomainFromURL","protocol","isExternalURL","dynamicLabel","label","isMockItem","listUpdated","optionalPromise","sortItems","compare","getItemByQueryFromState","itemHandler","_ref$success","_ref$failure","failure","ABORT_ALL","DID_SET_FILES","_ref2$value","activeItems","interactionMethod","shouldPrepareOutput","doUpload","MOVE_ITEM","currentIndex","SORT","ADD_ITEMS","_ref6$success","_ref6$failure","insertLocation","totalItems","isValidFile","validItems","promises","all","ADD_ITEM","_ref7$index","_ref7$success","_ref7$failure","_ref7$options","_item","mainStatus","main","sub","handleAdd","shouldAdd","loadComplete","REQUEST_PREPARE_OUTPUT","_ref9$failure","COMPLETE_LOAD_ITEM","RETRY_ITEM_LOAD","REQUEST_ITEM_PREPARE","_success","output","REQUEST_ITEM_PROCESSING","itemCanBeQueuedForProcessing","processNow","PROCESS_ITEM","totalCurrentUploads","processNext","queueEntry","itemReference","allItemsProcessed","RETRY_ITEM_PROCESSING","REQUEST_REMOVE_ITEM","shouldRemove","RELEASE_ITEM","REMOVE_ITEM","removeFromView","ABORT_ITEM_LOAD","ABORT_ITEM_PROCESSING","REQUEST_REVERT_ITEM_PROCESSING","handleRevert","shouldRevert","requestRemoveResult","REVERT_ITEM_PROCESSING","SET_OPTIONS","formatFilename","createElement$1","textNode","createTextNode","nodeValue","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","describeArc","startAngle","endAngle","arcSweep","percentageArc","to","spin","align","ringStrokeWidth","ringFrom","ringTo","coordinates","progressIndicator","create$1","icon","isDisabled","write$1","shouldDisable","removeAttribute","fileActionButton","toNaturalFileSize","KB","MB","GB","removeDecimalsWhenZero","decimalCount","toFixed","create$2","fileName","updateFile","updateFileSizeOnError","fileInfo","DID_UPDATE_ITEM_META","toPercentage","create$3","didSetItemLoadProgress","title","didSetItemProcessProgress","didRequestItemProcessing","didAbortItemProcessing","didCompleteItemProcessing","fileStatus","DID_REQUEST_ITEM_PROCESSING","DID_ABORT_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_UPDATE_ITEM_LOAD_PROGRESS","DID_THROW_ITEM_PROCESSING_REVERT_ERROR","DID_THROW_ITEM_REMOVE_ERROR","Buttons","AbortItemLoad","RetryItemLoad","RemoveItem","ProcessItem","AbortItemProcessing","RetryItemProcessing","RevertItemProcessing","ButtonKeys","calculateFileInfoOffset","buttonRect","buttonRemoveItem","calculateButtonWidth","buttonAbortItemLoad","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","getLoadIndicatorAlignment","getProcessIndicatorAlignment","getRemoveIndicatorAligment","DefaultStyle","buttonRetryItemLoad","buttonProcessItem","buttonAbortItemProcessing","buttonRetryItemProcessing","buttonRevertItemProcessing","loadProgressIndicator","processProgressIndicator","processingCompleteIndicator","IdleStyle","ProcessingStyle","StyleMap","DID_START_ITEM_LOAD","DID_START_ITEM_REMOVE","DID_LOAD_LOCAL_ITEM","processingCompleteIndicatorView","create$4","isAsync","alignRemoveItemButton","buttonFilter","enabledButtons","_map","buttonView","stopPropagation","loadIndicatorView","progressIndicatorView","activeStyles","write$2","route","stylesToApply","defaultStyles","control","DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING","DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD","DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL","buttonAbortItemRemoval","create$5","fileWrapper","PANEL_SPRING_PROPS","create$6","section","createSection","scalable","viewConstructor","write$3","topRect","bottomRect","panel","createDragHelper","itemIds","prevIndex","setIndex","getIndex","getItemIndex","ITEM_TRANSLATE_SPRING","ITEM_SCALE_SPRING","StateMap","create$7","handleClick","markedForRemoval","dragState","grab","isPrimary","removedActivateListener","pageX","pageY","dragOrigin","dragCenter","offsetX","offsetY","drag","preventDefault","dragOffset","dist","drop","route$1","DID_UPDATE_PANEL_HEIGHT","write$4","DID_GRAB_ITEM","DID_DRAG_ITEM","DID_DROP_ITEM","currentState","filepondItemState","getItemIndexByPosition","positionInView","horizontalSpace","itemRect","itemHorizontalMargin","itemsPerRow","childMid","itemVerticalMargin","itemHeight","_index","indexX","indexY","itemTop","itemRight","itemBottom","dropAreaDimensions","getHeight","setHeight","getWidth","setWidth","setDimensions","create$8","lastItemSpanwDate","addItemView","addIndex","spawnDate","cooldown","moveItem","vx","vy","introItemView","removeItemView","getItemHeight","getItemWidth","dragItem","numItems","oldIndex","dragPosition","dragHeight","dragWidth","cols","getGridIndex","getColIndex","visibleChildren","idx","childHeight","childBottom","childTop","route$2","DID_ADD_ITEM","DID_REMOVE_ITEM","write$5","dragCoordinates","dragIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","visualHeight","prevX","prevY","visualIndex","vectorX","sign","vectorY","filterSetItemActions","list","create$9","overflowing","storeDragCoordinates","scopeLeft","scopeTop","clearDragCoordinates","route$3","DID_DRAG","DID_END_DRAG","write$6","overflow","newHeight","listScroller","attrToggle","enabledValue","resetFileInput","form","create$a","setAcceptedFileTypes","toggleAllowMultiple","toggleDirectoryFilter","toggleDisabled","toggleRequired","setCaptureMethod","handleChange","webkitRelativePath","doesAllowBrowse","disableField","updateRequiredStatus","shouldCheckValidity","setCustomValidity","updateFieldValidityStatus","browser","DID_SET_DISABLED","DID_SET_ALLOW_BROWSE","DID_SET_ALLOW_DIRECTORIES_ONLY","DID_SET_ALLOW_MULTIPLE","DID_SET_ACCEPTED_FILE_TYPES","DID_SET_CAPTURE_METHOD","DID_SET_REQUIRED","Key","ENTER","SPACE","create$b","handleKeyDown","isActivationKey","keyCode","click","isLabelClick","contains","updateLabelValue","caption","clickable","dropLabel","DID_SET_LABEL_IDLE","addBlob","moveBlob","hideBlob","explodeBlob","write$7","route$4","DID_DROP","drip","create$c","fields","getField","syncFieldPositionsWithItems","didReorderItems","didAddItem","dataContainer","didLoadItem$1","field","didSetDisabled","didRemoveItem","didDefineValue","write$8","DID_DEFINE_VALUE","DID_REORDER_ITEMS","DID_SORT_ITEMS","getRootNode","text$1","zip","epub","guesstimateMimeType","requestDataTransferItems","dataTransfer","links","getLinks","hasFiles","getFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","entry","getAsEntry","isDirectory","isDirectoryEntry","getFilesInDirectory","getAsFile","dirCounter","fileCounter","resolveIfDone","readEntries","dirEntry","directoryReader","createReader","readBatch","entries","correctedFile","correctMissingFileType","fullPath","webkitGetAsEntry","getLinksFromTransferMetaData","getLinksFromTransferURLData","getData","dragNDropObservers","eventPosition","pageLeft","pageTop","layerX","layerY","createDragNDropClient","scopeToObserve","filterElement","observer","getDragNDropObserver","client","ondrop","onenter","ondrag","onexit","allowdrop","addListener","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","handlers","createHandler","elementFromPoint","isEventTarget","elementAtPosition","pageXOffset","pageYOffset","initialTarget","setDropEffect","effect","dropEffect","overDropTarget","allowsTransfer","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","_options$filterItems","filterItems","documentElement","lastState","filteredItems","ondragend","ondragstart","updateHopperState","hopperState","listening","listeners$1","handlePaste","activeEl","activeElement","nodeName","inScope","clipboardData","listen","unlisten","createPaster","create$d","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","clear$1","listModified","isUsingFilePond","itemAdded","itemRemoved","itemProcessed","itemProcessedUndo","itemError","assistant","toCamels","charAt","debounce","func","immidiateOnly","MAX_FILES_LIMIT","prevent","create$e","measure","bounds","widthPrevious","widthUpdated","updateHistory","previousAspectRatio","canHover","matchMedia","hasPointerEvents","passive","write$9","route$5","calculateRootBoundingBoxHeight","hopper","isMultiItem","maxItems","atMaxCapacity","addAction","listItemMargin","calculateListItemMargin","listHeight","calculateListHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","visual","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","_listAvailableHeight","cappedHeight","isCappedHeight","panelHeight","_listAvailableHeight2","itemMargin","scrollList","itemList","newItem","removedItem","verticalItemCount","measureHeight","maxHeight","exceedsMaxFiles","totalBrowseItems","hasMaxItems","getDragIndex","toggleDrop","isAllowed","enabled","toggleBrowse","togglePaste","paster","DID_SET_ALLOW_DROP","DID_SET_ALLOW_PASTE","createApp","initialOptions","originalElement","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","readWriteApi","innerWidth","routeActionsToEvents","createEvent","eventRoutes","DID_DESTROY","DID_INIT","DID_THROW_MAX_FILES","DID_INIT_ITEM","DID_PREPARE_OUTPUT","DID_COMPLETE_ITEM_PROCESSING_ALL","DID_UPDATE_ITEMS","DID_ACTIVATE_ITEM","exposeEvent","pond","bubbles","cancelable","composed","filtered","prepareFile","addFile","addFiles","isFilePondFile","removeFile","sources","lastArgument","processFile","prepareFiles","processFiles","_len3","_key3","removeFiles","_len4","_key4","mappedQueries","q","moveFile","browse","insertBefore$1","insertAfter$1","appendTo","replaceElement","restoreElement","isAttachedTo","createAppObject","customOptions","app","lowerCaseFirstLetter","attributeNameToPropertyName","attributeName","mapObject","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","attribute","createAppAtElement","mergedOptions","attributeOptions","querySelectorAll","createApp$1","PRIVATE_METHODS","createAppAPI","replaceInString","replacements","workerBlob","workerURL","Worker","transferList","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","pluginOutline","views","isOperaMini","operamini","hasPromises","hasBlobSlice","hasCreateObjectURL","hasVisibility","hasTiming","hasCSSSupports","CSS","isIE11","supported","isSupported","apps","FileStatus","OptionTypes","registerPlugin","updateOptionTypes","hook","indexToRemove","matchedHooks","newHooks","newHook","plugins","getOptions$1","setOptions$1","inputAttributes","filteredComponentMethods","outputs","FilePondComponent","zone","handleEvent","nativeElement","emit","runOutsideAngular","changes","previousValue","ɵfac","FilePondComponent_Factory","ɵcmp","selectors","inputs","features","decls","vars","consts","template","FilePondComponent_Template","rf","encapsulation","ctorParameters","propDecorators","None","FilePondModule","ɵmod","ɵinj","FilePondModule_Factory","imports","ngJitMode","declarations","ModalFooterComponent","templateUrl","styleUrls","ModalHeaderComponent","modalService","ModalComponent","$event","ModalModule","PostDialogueComponent","idioms","pondOptions","multiple","acceptedFileTypes","pondFiles","log","myPond","PostDialogueModule","PostComponent","PostModule","SpinnerComponent","SpinnerModule","component","HomeRoutingModule","forChild","HomeComponent","loadingDone","HomeModule"],"mappings":"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","file":"pages-home-home-module-es5.js","sourcesContent":["/*!\n * FilePondPluginImagePreview 4.6.4\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImagePreview = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image and can be viewed in canvas\n  var isPreviewableImage = function isPreviewableImage(file) {\n    return /^image/.test(file.type);\n  };\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function(obj) {\n        return obj &&\n          typeof Symbol === 'function' &&\n          obj.constructor === Symbol &&\n          obj !== Symbol.prototype\n          ? 'symbol'\n          : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var REACT_ELEMENT_TYPE;\n\n  function _jsx(type, props, key, children) {\n    if (!REACT_ELEMENT_TYPE) {\n      REACT_ELEMENT_TYPE =\n        (typeof Symbol === 'function' &&\n          Symbol.for &&\n          Symbol.for('react.element')) ||\n        0xeac7;\n    }\n\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {\n        children: void 0\n      };\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = new Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  }\n\n  function _asyncIterator(iterable) {\n    var method;\n\n    if (typeof Symbol === 'function') {\n      if (Symbol.asyncIterator) {\n        method = iterable[Symbol.asyncIterator];\n        if (method != null) return method.call(iterable);\n      }\n\n      if (Symbol.iterator) {\n        method = iterable[Symbol.iterator];\n        if (method != null) return method.call(iterable);\n      }\n    }\n\n    throw new TypeError('Object is not async iterable');\n  }\n\n  function _AwaitValue(value) {\n    this.wrapped = value;\n  }\n\n  function _AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function(resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n        var wrappedAwait = value instanceof _AwaitValue;\n        Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n          function(arg) {\n            if (wrappedAwait) {\n              resume('next', arg);\n              return;\n            }\n\n            settle(result.done ? 'return' : 'normal', arg);\n          },\n          function(err) {\n            resume('throw', err);\n          }\n        );\n      } catch (err) {\n        settle('throw', err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case 'return':\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case 'throw':\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== 'function') {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n    _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n      return this;\n    };\n  }\n\n  _AsyncGenerator.prototype.next = function(arg) {\n    return this._invoke('next', arg);\n  };\n\n  _AsyncGenerator.prototype.throw = function(arg) {\n    return this._invoke('throw', arg);\n  };\n\n  _AsyncGenerator.prototype.return = function(arg) {\n    return this._invoke('return', arg);\n  };\n\n  function _wrapAsyncGenerator(fn) {\n    return function() {\n      return new _AsyncGenerator(fn.apply(this, arguments));\n    };\n  }\n\n  function _awaitAsyncGenerator(value) {\n    return new _AwaitValue(value);\n  }\n\n  function _asyncGeneratorDelegate(inner, awaitWrap) {\n    var iter = {},\n      waiting = false;\n\n    function pump(key, value) {\n      waiting = true;\n      value = new Promise(function(resolve) {\n        resolve(inner[key](value));\n      });\n      return {\n        done: false,\n        value: awaitWrap(value)\n      };\n    }\n\n    if (typeof Symbol === 'function' && Symbol.iterator) {\n      iter[Symbol.iterator] = function() {\n        return this;\n      };\n    }\n\n    iter.next = function(value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump('next', value);\n    };\n\n    if (typeof inner.throw === 'function') {\n      iter.throw = function(value) {\n        if (waiting) {\n          waiting = false;\n          throw value;\n        }\n\n        return pump('throw', value);\n      };\n    }\n\n    if (typeof inner.return === 'function') {\n      iter.return = function(value) {\n        return pump('return', value);\n      };\n    }\n\n    return iter;\n  }\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self = this,\n        args = arguments;\n      return new Promise(function(resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(\n            gen,\n            resolve,\n            reject,\n            _next,\n            _throw,\n            'next',\n            value\n          );\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineEnumerableProperties(obj, descs) {\n    for (var key in descs) {\n      var desc = descs[key];\n      desc.configurable = desc.enumerable = true;\n      if ('value' in desc) desc.writable = true;\n      Object.defineProperty(obj, key, desc);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n      for (var i = 0; i < objectSymbols.length; i++) {\n        var sym = objectSymbols[i];\n        var desc = descs[sym];\n        desc.configurable = desc.enumerable = true;\n        if ('value' in desc) desc.writable = true;\n        Object.defineProperty(obj, sym, desc);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defaults(obj, defaults) {\n    var keys = Object.getOwnPropertyNames(defaults);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n      if (value && value.configurable && obj[key] === undefined) {\n        Object.defineProperty(obj, key, value);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends =\n      Object.assign ||\n      function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(\n          Object.getOwnPropertySymbols(source).filter(function(sym) {\n            return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n          })\n        );\n      }\n\n      ownKeys.forEach(function(key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function _getPrototypeOf(o) {\n          return o.__proto__ || Object.getPrototypeOf(o);\n        };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf =\n      Object.setPrototypeOf ||\n      function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === 'function') return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf('[native code]') !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== 'function') {\n        throw new TypeError(\n          'Super expression must either be null or a function'\n        );\n      }\n\n      if (typeof _cache !== 'undefined') {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _instanceof(left, right) {\n    if (\n      right != null &&\n      typeof Symbol !== 'undefined' &&\n      right[Symbol.hasInstance]\n    ) {\n      return right[Symbol.hasInstance](left);\n    } else {\n      return left instanceof right;\n    }\n  }\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj\n        };\n  }\n\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc =\n              Object.defineProperty && Object.getOwnPropertyDescriptor\n                ? Object.getOwnPropertyDescriptor(obj, key)\n                : {};\n\n            if (desc.get || desc.set) {\n              Object.defineProperty(newObj, key, desc);\n            } else {\n              newObj[key] = obj[key];\n            }\n          }\n        }\n      }\n\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  function _newArrowCheck(innerThis, boundThis) {\n    if (innerThis !== boundThis) {\n      throw new TypeError('Cannot instantiate an arrow function');\n    }\n  }\n\n  function _objectDestructuringEmpty(obj) {\n    if (obj == null) throw new TypeError('Cannot destructure undefined');\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\n        \"this hasn't been initialised - super() hasn't been called\"\n      );\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set = Reflect.set;\n    } else {\n      set = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(\n      Object.defineProperties(strings, {\n        raw: {\n          value: Object.freeze(raw)\n        }\n      })\n    );\n  }\n\n  function _taggedTemplateLiteralLoose(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    strings.raw = raw;\n    return strings;\n  }\n\n  function _temporalRef(val, name) {\n    if (val === _temporalUndefined) {\n      throw new ReferenceError(name + ' is not defined - temporal dead zone');\n    } else {\n      return val;\n    }\n  }\n\n  function _readOnlyError(name) {\n    throw new Error('\"' + name + '\" is read-only');\n  }\n\n  function _classNameTDZError(name) {\n    throw new Error(\n      'Class \"' + name + '\" cannot be referenced in computed property keys.'\n    );\n  }\n\n  var _temporalUndefined = {};\n\n  function _slicedToArray(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimit(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _slicedToArrayLoose(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimitLoose(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _toArray(arr) {\n    return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return (\n      _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\n    );\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n        arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (\n      Symbol.iterator in Object(iter) ||\n      Object.prototype.toString.call(iter) === '[object Arguments]'\n    )\n      return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (\n        var _i = arr[Symbol.iterator](), _s;\n        !(_n = (_s = _i.next()).done);\n        _n = true\n      ) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _iterableToArrayLimitLoose(arr, i) {\n    var _arr = [];\n\n    for (\n      var _iterator = arr[Symbol.iterator](), _step;\n      !(_step = _iterator.next()).done;\n\n    ) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError('Invalid attempt to spread non-iterable instance');\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  function _skipFirstGeneratorNext(fn) {\n    return function() {\n      var it = fn.apply(this, arguments);\n      it.next();\n      return it;\n    };\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== 'object' || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || 'default');\n      if (typeof res !== 'object') return res;\n      throw new TypeError('@@toPrimitive must return a primitive value.');\n    }\n\n    return (hint === 'string' ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, 'string');\n\n    return typeof key === 'symbol' ? key : String(key);\n  }\n\n  function _initializerWarningHelper(descriptor, context) {\n    throw new Error(\n      'Decorating class property failed. Please ensure that ' +\n        'proposal-class-properties is enabled and set to use loose mode. ' +\n        'To use proposal-class-properties in spec mode with decorators, wait for ' +\n        'the next major version of decorators in stage 2.'\n    );\n  }\n\n  function _initializerDefineProperty(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n      enumerable: descriptor.enumerable,\n      configurable: descriptor.configurable,\n      writable: descriptor.writable,\n      value: descriptor.initializer\n        ? descriptor.initializer.call(context)\n        : void 0\n    });\n  }\n\n  function _applyDecoratedDescriptor(\n    target,\n    property,\n    decorators,\n    descriptor,\n    context\n  ) {\n    var desc = {};\n    Object.keys(descriptor).forEach(function(key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators\n      .slice()\n      .reverse()\n      .reduce(function(desc, decorator) {\n        return decorator(target, property, desc) || desc;\n      }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object.defineProperty(target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var id = 0;\n\n  function _classPrivateFieldLooseKey(name) {\n    return '__private_' + id++ + '_' + name;\n  }\n\n  function _classPrivateFieldLooseBase(receiver, privateKey) {\n    if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n      throw new TypeError('attempted to use private field on non-instance');\n    }\n\n    return receiver;\n  }\n\n  function _classPrivateFieldGet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.get) {\n      return descriptor.get.call(receiver);\n    }\n\n    return descriptor.value;\n  }\n\n  function _classPrivateFieldSet(receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.set) {\n      descriptor.set.call(receiver, value);\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      descriptor.value = value;\n    }\n\n    return value;\n  }\n\n  function _classStaticPrivateFieldSpecGet(\n    receiver,\n    classConstructor,\n    descriptor\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return descriptor.value;\n  }\n\n  function _classStaticPrivateFieldSpecSet(\n    receiver,\n    classConstructor,\n    descriptor,\n    value\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    if (!descriptor.writable) {\n      throw new TypeError('attempted to set read only private field');\n    }\n\n    descriptor.value = value;\n    return value;\n  }\n\n  function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return method;\n  }\n\n  function _classStaticPrivateMethodSet() {\n    throw new TypeError('attempted to set read only static private field');\n  }\n\n  function _decorate(decorators, factory, superClass, mixins) {\n    var api = _getDecoratorsApi();\n\n    if (mixins) {\n      for (var i = 0; i < mixins.length; i++) {\n        api = mixins[i](api);\n      }\n    }\n\n    var r = factory(function initialize(O) {\n      api.initializeInstanceElements(O, decorated.elements);\n    }, superClass);\n    var decorated = api.decorateClass(\n      _coalesceClassElements(r.d.map(_createElementDescriptor)),\n      decorators\n    );\n    api.initializeClassElements(r.F, decorated.elements);\n    return api.runClassFinishers(r.F, decorated.finishers);\n  }\n\n  function _getDecoratorsApi() {\n    _getDecoratorsApi = function() {\n      return api;\n    };\n\n    var api = {\n      elementsDefinitionOrder: [['method'], ['field']],\n      initializeInstanceElements: function(O, elements) {\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            if (element.kind === kind && element.placement === 'own') {\n              this.defineClassElement(O, element);\n            }\n          }, this);\n        }, this);\n      },\n      initializeClassElements: function(F, elements) {\n        var proto = F.prototype;\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            var placement = element.placement;\n\n            if (\n              element.kind === kind &&\n              (placement === 'static' || placement === 'prototype')\n            ) {\n              var receiver = placement === 'static' ? F : proto;\n              this.defineClassElement(receiver, element);\n            }\n          }, this);\n        }, this);\n      },\n      defineClassElement: function(receiver, element) {\n        var descriptor = element.descriptor;\n\n        if (element.kind === 'field') {\n          var initializer = element.initializer;\n          descriptor = {\n            enumerable: descriptor.enumerable,\n            writable: descriptor.writable,\n            configurable: descriptor.configurable,\n            value: initializer === void 0 ? void 0 : initializer.call(receiver)\n          };\n        }\n\n        Object.defineProperty(receiver, element.key, descriptor);\n      },\n      decorateClass: function(elements, decorators) {\n        var newElements = [];\n        var finishers = [];\n        var placements = {\n          static: [],\n          prototype: [],\n          own: []\n        };\n        elements.forEach(function(element) {\n          this.addElementPlacement(element, placements);\n        }, this);\n        elements.forEach(function(element) {\n          if (!_hasDecorators(element)) return newElements.push(element);\n          var elementFinishersExtras = this.decorateElement(\n            element,\n            placements\n          );\n          newElements.push(elementFinishersExtras.element);\n          newElements.push.apply(newElements, elementFinishersExtras.extras);\n          finishers.push.apply(finishers, elementFinishersExtras.finishers);\n        }, this);\n\n        if (!decorators) {\n          return {\n            elements: newElements,\n            finishers: finishers\n          };\n        }\n\n        var result = this.decorateConstructor(newElements, decorators);\n        finishers.push.apply(finishers, result.finishers);\n        result.finishers = finishers;\n        return result;\n      },\n      addElementPlacement: function(element, placements, silent) {\n        var keys = placements[element.placement];\n\n        if (!silent && keys.indexOf(element.key) !== -1) {\n          throw new TypeError('Duplicated element (' + element.key + ')');\n        }\n\n        keys.push(element.key);\n      },\n      decorateElement: function(element, placements) {\n        var extras = [];\n        var finishers = [];\n\n        for (\n          var decorators = element.decorators, i = decorators.length - 1;\n          i >= 0;\n          i--\n        ) {\n          var keys = placements[element.placement];\n          keys.splice(keys.indexOf(element.key), 1);\n          var elementObject = this.fromElementDescriptor(element);\n          var elementFinisherExtras = this.toElementFinisherExtras(\n            (0, decorators[i])(elementObject) || elementObject\n          );\n          element = elementFinisherExtras.element;\n          this.addElementPlacement(element, placements);\n\n          if (elementFinisherExtras.finisher) {\n            finishers.push(elementFinisherExtras.finisher);\n          }\n\n          var newExtras = elementFinisherExtras.extras;\n\n          if (newExtras) {\n            for (var j = 0; j < newExtras.length; j++) {\n              this.addElementPlacement(newExtras[j], placements);\n            }\n\n            extras.push.apply(extras, newExtras);\n          }\n        }\n\n        return {\n          element: element,\n          finishers: finishers,\n          extras: extras\n        };\n      },\n      decorateConstructor: function(elements, decorators) {\n        var finishers = [];\n\n        for (var i = decorators.length - 1; i >= 0; i--) {\n          var obj = this.fromClassDescriptor(elements);\n          var elementsAndFinisher = this.toClassDescriptor(\n            (0, decorators[i])(obj) || obj\n          );\n\n          if (elementsAndFinisher.finisher !== undefined) {\n            finishers.push(elementsAndFinisher.finisher);\n          }\n\n          if (elementsAndFinisher.elements !== undefined) {\n            elements = elementsAndFinisher.elements;\n\n            for (var j = 0; j < elements.length - 1; j++) {\n              for (var k = j + 1; k < elements.length; k++) {\n                if (\n                  elements[j].key === elements[k].key &&\n                  elements[j].placement === elements[k].placement\n                ) {\n                  throw new TypeError(\n                    'Duplicated element (' + elements[j].key + ')'\n                  );\n                }\n              }\n            }\n          }\n        }\n\n        return {\n          elements: elements,\n          finishers: finishers\n        };\n      },\n      fromElementDescriptor: function(element) {\n        var obj = {\n          kind: element.kind,\n          key: element.key,\n          placement: element.placement,\n          descriptor: element.descriptor\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        if (element.kind === 'field') obj.initializer = element.initializer;\n        return obj;\n      },\n      toElementDescriptors: function(elementObjects) {\n        if (elementObjects === undefined) return;\n        return _toArray(elementObjects).map(function(elementObject) {\n          var element = this.toElementDescriptor(elementObject);\n          this.disallowProperty(\n            elementObject,\n            'finisher',\n            'An element descriptor'\n          );\n          this.disallowProperty(\n            elementObject,\n            'extras',\n            'An element descriptor'\n          );\n          return element;\n        }, this);\n      },\n      toElementDescriptor: function(elementObject) {\n        var kind = String(elementObject.kind);\n\n        if (kind !== 'method' && kind !== 'field') {\n          throw new TypeError(\n            'An element descriptor\\'s .kind property must be either \"method\" or' +\n              ' \"field\", but a decorator created an element descriptor with' +\n              ' .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        var key = _toPropertyKey(elementObject.key);\n\n        var placement = String(elementObject.placement);\n\n        if (\n          placement !== 'static' &&\n          placement !== 'prototype' &&\n          placement !== 'own'\n        ) {\n          throw new TypeError(\n            'An element descriptor\\'s .placement property must be one of \"static\",' +\n              ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n              ' with .placement \"' +\n              placement +\n              '\"'\n          );\n        }\n\n        var descriptor = elementObject.descriptor;\n        this.disallowProperty(\n          elementObject,\n          'elements',\n          'An element descriptor'\n        );\n        var element = {\n          kind: kind,\n          key: key,\n          placement: placement,\n          descriptor: Object.assign({}, descriptor)\n        };\n\n        if (kind !== 'field') {\n          this.disallowProperty(\n            elementObject,\n            'initializer',\n            'A method descriptor'\n          );\n        } else {\n          this.disallowProperty(\n            descriptor,\n            'get',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'set',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'value',\n            'The property descriptor of a field descriptor'\n          );\n          element.initializer = elementObject.initializer;\n        }\n\n        return element;\n      },\n      toElementFinisherExtras: function(elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n\n        var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n        var extras = this.toElementDescriptors(elementObject.extras);\n        return {\n          element: element,\n          finisher: finisher,\n          extras: extras\n        };\n      },\n      fromClassDescriptor: function(elements) {\n        var obj = {\n          kind: 'class',\n          elements: elements.map(this.fromElementDescriptor, this)\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        return obj;\n      },\n      toClassDescriptor: function(obj) {\n        var kind = String(obj.kind);\n\n        if (kind !== 'class') {\n          throw new TypeError(\n            'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n              ' created a class descriptor with .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        this.disallowProperty(obj, 'key', 'A class descriptor');\n        this.disallowProperty(obj, 'placement', 'A class descriptor');\n        this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n        this.disallowProperty(obj, 'initializer', 'A class descriptor');\n        this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n        var finisher = _optionalCallableProperty(obj, 'finisher');\n\n        var elements = this.toElementDescriptors(obj.elements);\n        return {\n          elements: elements,\n          finisher: finisher\n        };\n      },\n      runClassFinishers: function(constructor, finishers) {\n        for (var i = 0; i < finishers.length; i++) {\n          var newConstructor = (0, finishers[i])(constructor);\n\n          if (newConstructor !== undefined) {\n            if (typeof newConstructor !== 'function') {\n              throw new TypeError('Finishers must return a constructor.');\n            }\n\n            constructor = newConstructor;\n          }\n        }\n\n        return constructor;\n      },\n      disallowProperty: function(obj, name, objectType) {\n        if (obj[name] !== undefined) {\n          throw new TypeError(\n            objectType + \" can't have a .\" + name + ' property.'\n          );\n        }\n      }\n    };\n    return api;\n  }\n\n  function _createElementDescriptor(def) {\n    var key = _toPropertyKey(def.key);\n\n    var descriptor;\n\n    if (def.kind === 'method') {\n      descriptor = {\n        value: def.value,\n        writable: true,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'get') {\n      descriptor = {\n        get: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'set') {\n      descriptor = {\n        set: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'field') {\n      descriptor = {\n        configurable: true,\n        writable: true,\n        enumerable: true\n      };\n    }\n\n    var element = {\n      kind: def.kind === 'field' ? 'field' : 'method',\n      key: key,\n      placement: def.static\n        ? 'static'\n        : def.kind === 'field'\n        ? 'own'\n        : 'prototype',\n      descriptor: descriptor\n    };\n    if (def.decorators) element.decorators = def.decorators;\n    if (def.kind === 'field') element.initializer = def.value;\n    return element;\n  }\n\n  function _coalesceGetterSetter(element, other) {\n    if (element.descriptor.get !== undefined) {\n      other.descriptor.get = element.descriptor.get;\n    } else {\n      other.descriptor.set = element.descriptor.set;\n    }\n  }\n\n  function _coalesceClassElements(elements) {\n    var newElements = [];\n\n    var isSameElement = function(other) {\n      return (\n        other.kind === 'method' &&\n        other.key === element.key &&\n        other.placement === element.placement\n      );\n    };\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var other;\n\n      if (\n        element.kind === 'method' &&\n        (other = newElements.find(isSameElement))\n      ) {\n        if (\n          _isDataDescriptor(element.descriptor) ||\n          _isDataDescriptor(other.descriptor)\n        ) {\n          if (_hasDecorators(element) || _hasDecorators(other)) {\n            throw new ReferenceError(\n              'Duplicated methods (' + element.key + \") can't be decorated.\"\n            );\n          }\n\n          other.descriptor = element.descriptor;\n        } else {\n          if (_hasDecorators(element)) {\n            if (_hasDecorators(other)) {\n              throw new ReferenceError(\n                \"Decorators can't be placed on different accessors with for \" +\n                  'the same property (' +\n                  element.key +\n                  ').'\n              );\n            }\n\n            other.decorators = element.decorators;\n          }\n\n          _coalesceGetterSetter(element, other);\n        }\n      } else {\n        newElements.push(element);\n      }\n    }\n\n    return newElements;\n  }\n\n  function _hasDecorators(element) {\n    return element.decorators && element.decorators.length;\n  }\n\n  function _isDataDescriptor(desc) {\n    return (\n      desc !== undefined &&\n      !(desc.value === undefined && desc.writable === undefined)\n    );\n  }\n\n  function _optionalCallableProperty(obj, name) {\n    var value = obj[name];\n\n    if (value !== undefined && typeof value !== 'function') {\n      throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n    }\n\n    return value;\n  }\n\n  function _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    return fn;\n  }\n\n  function _classPrivateMethodSet() {\n    throw new TypeError('attempted to reassign private method');\n  }\n\n  function _wrapRegExp(re, groups) {\n    _wrapRegExp = function(re, groups) {\n      return new BabelRegExp(re, groups);\n    };\n\n    var _RegExp = _wrapNativeSuper(RegExp);\n\n    var _super = RegExp.prototype;\n\n    var _groups = new WeakMap();\n\n    function BabelRegExp(re, groups) {\n      var _this = _RegExp.call(this, re);\n\n      _groups.set(_this, groups);\n\n      return _this;\n    }\n\n    _inherits(BabelRegExp, _RegExp);\n\n    BabelRegExp.prototype.exec = function(str) {\n      var result = _super.exec.call(this, str);\n\n      if (result) result.groups = buildGroups(result, this);\n      return result;\n    };\n\n    BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n      if (typeof substitution === 'string') {\n        var groups = _groups.get(this);\n\n        return _super[Symbol.replace].call(\n          this,\n          str,\n          substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n            return '$' + groups[name];\n          })\n        );\n      } else if (typeof substitution === 'function') {\n        var _this = this;\n\n        return _super[Symbol.replace].call(this, str, function() {\n          var args = [];\n          args.push.apply(args, arguments);\n\n          if (typeof args[args.length - 1] !== 'object') {\n            args.push(buildGroups(args, _this));\n          }\n\n          return substitution.apply(this, args);\n        });\n      } else {\n        return _super[Symbol.replace].call(this, str, substitution);\n      }\n    };\n\n    function buildGroups(result, re) {\n      var g = _groups.get(re);\n\n      return Object.keys(g).reduce(function(groups, name) {\n        groups[name] = result[g[name]];\n        return groups;\n      }, Object.create(null));\n    }\n\n    return _wrapRegExp.apply(this, arguments);\n  }\n\n  var vectorMultiply = function vectorMultiply(v, amount) {\n    return createVector(v.x * amount, v.y * amount);\n  };\n\n  var vectorAdd = function vectorAdd(a, b) {\n    return createVector(a.x + b.x, a.y + b.y);\n  };\n\n  var vectorNormalize = function vectorNormalize(v) {\n    var l = Math.sqrt(v.x * v.x + v.y * v.y);\n    if (l === 0) {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n    return createVector(v.x / l, v.y / l);\n  };\n\n  var vectorRotate = function vectorRotate(v, radians, origin) {\n    var cos = Math.cos(radians);\n    var sin = Math.sin(radians);\n    var t = createVector(v.x - origin.x, v.y - origin.y);\n    return createVector(\n      origin.x + cos * t.x - sin * t.y,\n      origin.y + sin * t.x + cos * t.y\n    );\n  };\n\n  var createVector = function createVector() {\n    var x =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return { x: x, y: y };\n  };\n\n  var getMarkupValue = function getMarkupValue(value, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var axis = arguments.length > 3 ? arguments[3] : undefined;\n    if (typeof value === 'string') {\n      return parseFloat(value) * scalar;\n    }\n    if (typeof value === 'number') {\n      return value * (axis ? size[axis] : Math.min(size.width, size.height));\n    }\n    return;\n  };\n\n  var getMarkupStyles = function getMarkupStyles(markup, size, scale) {\n    var lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n    var fill = markup.backgroundColor || markup.fontColor || 'transparent';\n    var stroke = markup.borderColor || markup.lineColor || 'transparent';\n    var strokeWidth = getMarkupValue(\n      markup.borderWidth || markup.lineWidth,\n      size,\n      scale\n    );\n    var lineCap = markup.lineCap || 'round';\n    var lineJoin = markup.lineJoin || 'round';\n    var dashes =\n      typeof lineStyle === 'string'\n        ? ''\n        : lineStyle\n            .map(function(v) {\n              return getMarkupValue(v, size, scale);\n            })\n            .join(',');\n    var opacity = markup.opacity || 1;\n    return {\n      'stroke-linecap': lineCap,\n      'stroke-linejoin': lineJoin,\n      'stroke-width': strokeWidth || 0,\n      'stroke-dasharray': dashes,\n      stroke: stroke,\n      fill: fill,\n      opacity: opacity\n    };\n  };\n\n  var isDefined = function isDefined(value) {\n    return value != null;\n  };\n\n  var getMarkupRect = function getMarkupRect(rect, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var left =\n      getMarkupValue(rect.x, size, scalar, 'width') ||\n      getMarkupValue(rect.left, size, scalar, 'width');\n    var top =\n      getMarkupValue(rect.y, size, scalar, 'height') ||\n      getMarkupValue(rect.top, size, scalar, 'height');\n    var width = getMarkupValue(rect.width, size, scalar, 'width');\n    var height = getMarkupValue(rect.height, size, scalar, 'height');\n    var right = getMarkupValue(rect.right, size, scalar, 'width');\n    var bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n    if (!isDefined(top)) {\n      if (isDefined(height) && isDefined(bottom)) {\n        top = size.height - height - bottom;\n      } else {\n        top = bottom;\n      }\n    }\n\n    if (!isDefined(left)) {\n      if (isDefined(width) && isDefined(right)) {\n        left = size.width - width - right;\n      } else {\n        left = right;\n      }\n    }\n\n    if (!isDefined(width)) {\n      if (isDefined(left) && isDefined(right)) {\n        width = size.width - left - right;\n      } else {\n        width = 0;\n      }\n    }\n\n    if (!isDefined(height)) {\n      if (isDefined(top) && isDefined(bottom)) {\n        height = size.height - top - bottom;\n      } else {\n        height = 0;\n      }\n    }\n\n    return {\n      x: left || 0,\n      y: top || 0,\n      width: width || 0,\n      height: height || 0\n    };\n  };\n\n  var pointsToPathShape = function pointsToPathShape(points) {\n    return points\n      .map(function(point, index) {\n        return ''\n          .concat(index === 0 ? 'M' : 'L', ' ')\n          .concat(point.x, ' ')\n          .concat(point.y);\n      })\n      .join(' ');\n  };\n\n  var setAttributes = function setAttributes(element, attr) {\n    return Object.keys(attr).forEach(function(key) {\n      return element.setAttribute(key, attr[key]);\n    });\n  };\n\n  var ns = 'http://www.w3.org/2000/svg';\n  var svg = function svg(tag, attr) {\n    var element = document.createElementNS(ns, tag);\n    if (attr) {\n      setAttributes(element, attr);\n    }\n    return element;\n  };\n\n  var updateRect = function updateRect(element) {\n    return setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles)\n    );\n  };\n\n  var updateEllipse = function updateEllipse(element) {\n    var cx = element.rect.x + element.rect.width * 0.5;\n    var cy = element.rect.y + element.rect.height * 0.5;\n    var rx = element.rect.width * 0.5;\n    var ry = element.rect.height * 0.5;\n    return setAttributes(\n      element,\n      Object.assign(\n        {\n          cx: cx,\n          cy: cy,\n          rx: rx,\n          ry: ry\n        },\n        element.styles\n      )\n    );\n  };\n\n  var IMAGE_FIT_STYLE = {\n    contain: 'xMidYMid meet',\n    cover: 'xMidYMid slice'\n  };\n\n  var updateImage = function updateImage(element, markup) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none'\n      })\n    );\n  };\n\n  var TEXT_ANCHOR = {\n    left: 'start',\n    center: 'middle',\n    right: 'end'\n  };\n\n  var updateText = function updateText(element, markup, size, scale) {\n    var fontSize = getMarkupValue(markup.fontSize, size, scale);\n    var fontFamily = markup.fontFamily || 'sans-serif';\n    var fontWeight = markup.fontWeight || 'normal';\n    var textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        'stroke-width': 0,\n        'font-weight': fontWeight,\n        'font-size': fontSize,\n        'font-family': fontFamily,\n        'text-anchor': textAlign\n      })\n    );\n\n    // update text\n    if (element.text !== markup.text) {\n      element.text = markup.text;\n      element.textContent = markup.text.length ? markup.text : ' ';\n    }\n  };\n\n  var updateLine = function updateLine(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        fill: 'none'\n      })\n    );\n\n    var line = element.childNodes[0];\n    var begin = element.childNodes[1];\n    var end = element.childNodes[2];\n\n    var origin = element.rect;\n\n    var target = {\n      x: element.rect.x + element.rect.width,\n      y: element.rect.y + element.rect.height\n    };\n\n    setAttributes(line, {\n      x1: origin.x,\n      y1: origin.y,\n      x2: target.x,\n      y2: target.y\n    });\n\n    if (!markup.lineDecoration) return;\n\n    begin.style.display = 'none';\n    end.style.display = 'none';\n\n    var v = vectorNormalize({\n      x: target.x - origin.x,\n      y: target.y - origin.y\n    });\n\n    var l = getMarkupValue(0.05, size, scale);\n\n    if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n      var arrowBeginRotationPoint = vectorMultiply(v, l);\n      var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n      var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n      var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n      setAttributes(begin, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowBeginA.x, ',')\n          .concat(arrowBeginA.y, ' L')\n          .concat(origin.x, ',')\n          .concat(origin.y, ' L')\n          .concat(arrowBeginB.x, ',')\n          .concat(arrowBeginB.y)\n      });\n    }\n\n    if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n      var arrowEndRotationPoint = vectorMultiply(v, -l);\n      var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n      var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n      var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n      setAttributes(end, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowEndA.x, ',')\n          .concat(arrowEndA.y, ' L')\n          .concat(target.x, ',')\n          .concat(target.y, ' L')\n          .concat(arrowEndB.x, ',')\n          .concat(arrowEndB.y)\n      });\n    }\n  };\n\n  var updatePath = function updatePath(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.styles, {\n        fill: 'none',\n        d: pointsToPathShape(\n          markup.points.map(function(point) {\n            return {\n              x: getMarkupValue(point.x, size, scale, 'width'),\n              y: getMarkupValue(point.y, size, scale, 'height')\n            };\n          })\n        )\n      })\n    );\n  };\n\n  var createShape = function createShape(node) {\n    return function(markup) {\n      return svg(node, { id: markup.id });\n    };\n  };\n\n  var createImage = function createImage(markup) {\n    var shape = svg('image', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round',\n      opacity: '0'\n    });\n\n    shape.onload = function() {\n      shape.setAttribute('opacity', markup.opacity || 1);\n    };\n    shape.setAttributeNS(\n      'http://www.w3.org/1999/xlink',\n      'xlink:href',\n      markup.src\n    );\n    return shape;\n  };\n\n  var createLine = function createLine(markup) {\n    var shape = svg('g', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round'\n    });\n\n    var line = svg('line');\n    shape.appendChild(line);\n\n    var begin = svg('path');\n    shape.appendChild(begin);\n\n    var end = svg('path');\n    shape.appendChild(end);\n\n    return shape;\n  };\n\n  var CREATE_TYPE_ROUTES = {\n    image: createImage,\n    rect: createShape('rect'),\n    ellipse: createShape('ellipse'),\n    text: createShape('text'),\n    path: createShape('path'),\n    line: createLine\n  };\n\n  var UPDATE_TYPE_ROUTES = {\n    rect: updateRect,\n    ellipse: updateEllipse,\n    image: updateImage,\n    text: updateText,\n    path: updatePath,\n    line: updateLine\n  };\n\n  var createMarkupByType = function createMarkupByType(type, markup) {\n    return CREATE_TYPE_ROUTES[type](markup);\n  };\n\n  var updateMarkupByType = function updateMarkupByType(\n    element,\n    type,\n    markup,\n    size,\n    scale\n  ) {\n    if (type !== 'path') {\n      element.rect = getMarkupRect(markup, size, scale);\n    }\n    element.styles = getMarkupStyles(markup, size, scale);\n    UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n  };\n\n  var MARKUP_RECT = [\n    'x',\n    'y',\n    'left',\n    'top',\n    'right',\n    'bottom',\n    'width',\n    'height'\n  ];\n\n  var toOptionalFraction = function toOptionalFraction(value) {\n    return typeof value === 'string' && /%/.test(value)\n      ? parseFloat(value) / 100\n      : value;\n  };\n\n  // adds default markup properties, clones markup\n  var prepareMarkup = function prepareMarkup(markup) {\n    var _markup = _slicedToArray(markup, 2),\n      type = _markup[0],\n      props = _markup[1];\n\n    var rect = props.points\n      ? {}\n      : MARKUP_RECT.reduce(function(prev, curr) {\n          prev[curr] = toOptionalFraction(props[curr]);\n          return prev;\n        }, {});\n\n    return [\n      type,\n      Object.assign(\n        {\n          zIndex: 0\n        },\n        props,\n        rect\n      )\n    ];\n  };\n\n  var sortMarkupByZIndex = function sortMarkupByZIndex(a, b) {\n    if (a[1].zIndex > b[1].zIndex) {\n      return 1;\n    }\n    if (a[1].zIndex < b[1].zIndex) {\n      return -1;\n    }\n    return 0;\n  };\n\n  var createMarkupView = function createMarkupView(_) {\n    return _.utils.createView({\n      name: 'image-preview-markup',\n      tag: 'svg',\n      ignoreRect: true,\n      mixins: {\n        apis: ['width', 'height', 'crop', 'markup', 'resize', 'dirty']\n      },\n\n      write: function write(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n\n        if (!props.dirty) return;\n        var crop = props.crop,\n          resize = props.resize,\n          markup = props.markup;\n\n        var viewWidth = props.width;\n        var viewHeight = props.height;\n\n        var cropWidth = crop.width;\n        var cropHeight = crop.height;\n\n        if (resize) {\n          var _size = resize.size;\n\n          var outputWidth = _size && _size.width;\n          var outputHeight = _size && _size.height;\n          var outputFit = resize.mode;\n          var outputUpscale = resize.upscale;\n\n          if (outputWidth && !outputHeight) outputHeight = outputWidth;\n          if (outputHeight && !outputWidth) outputWidth = outputHeight;\n\n          var shouldUpscale =\n            cropWidth < outputWidth && cropHeight < outputHeight;\n\n          if (!shouldUpscale || (shouldUpscale && outputUpscale)) {\n            var scalarWidth = outputWidth / cropWidth;\n            var scalarHeight = outputHeight / cropHeight;\n\n            if (outputFit === 'force') {\n              cropWidth = outputWidth;\n              cropHeight = outputHeight;\n            } else {\n              var scalar;\n              if (outputFit === 'cover') {\n                scalar = Math.max(scalarWidth, scalarHeight);\n              } else if (outputFit === 'contain') {\n                scalar = Math.min(scalarWidth, scalarHeight);\n              }\n              cropWidth = cropWidth * scalar;\n              cropHeight = cropHeight * scalar;\n            }\n          }\n        }\n\n        var size = {\n          width: viewWidth,\n          height: viewHeight\n        };\n\n        root.element.setAttribute('width', size.width);\n        root.element.setAttribute('height', size.height);\n\n        var scale = Math.min(viewWidth / cropWidth, viewHeight / cropHeight);\n\n        // clear\n        root.element.innerHTML = '';\n\n        // get filter\n        var markupFilter = root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');\n\n        // draw new\n        markup\n          .filter(markupFilter)\n          .map(prepareMarkup)\n          .sort(sortMarkupByZIndex)\n          .forEach(function(markup) {\n            var _markup = _slicedToArray(markup, 2),\n              type = _markup[0],\n              settings = _markup[1];\n\n            // create\n            var element = createMarkupByType(type, settings);\n\n            // update\n            updateMarkupByType(element, type, settings, size, scale);\n\n            // add\n            root.element.appendChild(element);\n          });\n      }\n    });\n  };\n\n  var createVector$1 = function createVector(x, y) {\n    return { x: x, y: y };\n  };\n\n  var vectorDot = function vectorDot(a, b) {\n    return a.x * b.x + a.y * b.y;\n  };\n\n  var vectorSubtract = function vectorSubtract(a, b) {\n    return createVector$1(a.x - b.x, a.y - b.y);\n  };\n\n  var vectorDistanceSquared = function vectorDistanceSquared(a, b) {\n    return vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n  };\n\n  var vectorDistance = function vectorDistance(a, b) {\n    return Math.sqrt(vectorDistanceSquared(a, b));\n  };\n\n  var getOffsetPointOnEdge = function getOffsetPointOnEdge(length, rotation) {\n    var a = length;\n\n    var A = 1.5707963267948966;\n    var B = rotation;\n    var C = 1.5707963267948966 - rotation;\n\n    var sinA = Math.sin(A);\n    var sinB = Math.sin(B);\n    var sinC = Math.sin(C);\n    var cosC = Math.cos(C);\n    var ratio = a / sinA;\n    var b = ratio * sinB;\n    var c = ratio * sinC;\n\n    return createVector$1(cosC * b, cosC * c);\n  };\n\n  var getRotatedRectSize = function getRotatedRectSize(rect, rotation) {\n    var w = rect.width;\n    var h = rect.height;\n\n    var hor = getOffsetPointOnEdge(w, rotation);\n    var ver = getOffsetPointOnEdge(h, rotation);\n\n    var tl = createVector$1(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n    var tr = createVector$1(\n      rect.x + rect.width + Math.abs(ver.y),\n      rect.y + Math.abs(ver.x)\n    );\n\n    var bl = createVector$1(\n      rect.x - Math.abs(ver.y),\n      rect.y + rect.height - Math.abs(ver.x)\n    );\n\n    return {\n      width: vectorDistance(tl, tr),\n      height: vectorDistance(tl, bl)\n    };\n  };\n\n  var calculateCanvasSize = function calculateCanvasSize(\n    image,\n    canvasAspectRatio\n  ) {\n    var zoom =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var imageAspectRatio = image.height / image.width;\n\n    // determine actual pixels on x and y axis\n    var canvasWidth = 1;\n    var canvasHeight = canvasAspectRatio;\n    var imgWidth = 1;\n    var imgHeight = imageAspectRatio;\n    if (imgHeight > canvasHeight) {\n      imgHeight = canvasHeight;\n      imgWidth = imgHeight / imageAspectRatio;\n    }\n\n    var scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n    var width = image.width / (zoom * scalar * imgWidth);\n    var height = width * canvasAspectRatio;\n\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  var getImageRectZoomFactor = function getImageRectZoomFactor(\n    imageRect,\n    cropRect,\n    rotation,\n    center\n  ) {\n    // calculate available space round image center position\n    var cx = center.x > 0.5 ? 1 - center.x : center.x;\n    var cy = center.y > 0.5 ? 1 - center.y : center.y;\n    var imageWidth = cx * 2 * imageRect.width;\n    var imageHeight = cy * 2 * imageRect.height;\n\n    // calculate rotated crop rectangle size\n    var rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n    // calculate scalar required to fit image\n    return Math.max(\n      rotatedCropSize.width / imageWidth,\n      rotatedCropSize.height / imageHeight\n    );\n  };\n\n  var getCenteredCropRect = function getCenteredCropRect(\n    container,\n    aspectRatio\n  ) {\n    var width = container.width;\n    var height = width * aspectRatio;\n    if (height > container.height) {\n      height = container.height;\n      width = height / aspectRatio;\n    }\n    var x = (container.width - width) * 0.5;\n    var y = (container.height - height) * 0.5;\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  };\n\n  var getCurrentCropSize = function getCurrentCropSize(imageSize) {\n    var crop =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var zoom = crop.zoom,\n      rotation = crop.rotation,\n      center = crop.center,\n      aspectRatio = crop.aspectRatio;\n\n    if (!aspectRatio) aspectRatio = imageSize.height / imageSize.width;\n\n    var canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n    var canvasCenter = {\n      x: canvasSize.width * 0.5,\n      y: canvasSize.height * 0.5\n    };\n\n    var stage = {\n      x: 0,\n      y: 0,\n      width: canvasSize.width,\n      height: canvasSize.height,\n      center: canvasCenter\n    };\n\n    var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n    var stageZoomFactor = getImageRectZoomFactor(\n      imageSize,\n      getCenteredCropRect(stage, aspectRatio),\n      rotation,\n      shouldLimit ? center : { x: 0.5, y: 0.5 }\n    );\n\n    var scale = zoom * stageZoomFactor;\n\n    // start drawing\n    return {\n      widthFloat: canvasSize.width / scale,\n      heightFloat: canvasSize.height / scale,\n      width: Math.round(canvasSize.width / scale),\n      height: Math.round(canvasSize.height / scale)\n    };\n  };\n\n  var IMAGE_SCALE_SPRING_PROPS = {\n    type: 'spring',\n    stiffness: 0.5,\n    damping: 0.45,\n    mass: 10\n  };\n\n  // does horizontal and vertical flipping\n  var createBitmapView = function createBitmapView(_) {\n    return _.utils.createView({\n      name: 'image-bitmap',\n      ignoreRect: true,\n      mixins: { styles: ['scaleX', 'scaleY'] },\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        root.appendChild(props.image);\n      }\n    });\n  };\n\n  // shifts and rotates image\n  var createImageCanvasWrapper = function createImageCanvasWrapper(_) {\n    return _.utils.createView({\n      name: 'image-canvas-wrapper',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['crop', 'width', 'height'],\n\n        styles: [\n          'originX',\n          'originY',\n          'translateX',\n          'translateY',\n          'scaleX',\n          'scaleY',\n          'rotateZ'\n        ],\n\n        animations: {\n          originX: IMAGE_SCALE_SPRING_PROPS,\n          originY: IMAGE_SCALE_SPRING_PROPS,\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateX: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          rotateZ: IMAGE_SCALE_SPRING_PROPS\n        }\n      },\n\n      create: function create(_ref2) {\n        var root = _ref2.root,\n          props = _ref2.props;\n        props.width = props.image.width;\n        props.height = props.image.height;\n        root.ref.bitmap = root.appendChildView(\n          root.createChildView(createBitmapView(_), { image: props.image })\n        );\n      },\n      write: function write(_ref3) {\n        var root = _ref3.root,\n          props = _ref3.props;\n        var flip = props.crop.flip;\n        var bitmap = root.ref.bitmap;\n        bitmap.scaleX = flip.horizontal ? -1 : 1;\n        bitmap.scaleY = flip.vertical ? -1 : 1;\n      }\n    });\n  };\n\n  // clips canvas to correct aspect ratio\n  var createClipView = function createClipView(_) {\n    return _.utils.createView({\n      name: 'image-clip',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: [\n          'crop',\n          'markup',\n          'resize',\n          'width',\n          'height',\n          'dirty',\n          'background'\n        ],\n\n        styles: ['width', 'height', 'opacity'],\n        animations: {\n          opacity: { type: 'tween', duration: 250 }\n        }\n      },\n\n      didWriteView: function didWriteView(_ref4) {\n        var root = _ref4.root,\n          props = _ref4.props;\n        if (!props.background) return;\n        root.element.style.backgroundColor = props.background;\n      },\n      create: function create(_ref5) {\n        var root = _ref5.root,\n          props = _ref5.props;\n\n        root.ref.image = root.appendChildView(\n          root.createChildView(\n            createImageCanvasWrapper(_),\n            Object.assign({}, props)\n          )\n        );\n\n        root.ref.createMarkup = function() {\n          if (root.ref.markup) return;\n          root.ref.markup = root.appendChildView(\n            root.createChildView(createMarkupView(_), Object.assign({}, props))\n          );\n        };\n\n        root.ref.destroyMarkup = function() {\n          if (!root.ref.markup) return;\n          root.removeChildView(root.ref.markup);\n          root.ref.markup = null;\n        };\n\n        // set up transparency grid\n        var transparencyIndicator = root.query(\n          'GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR'\n        );\n        if (transparencyIndicator === null) return;\n\n        // grid pattern\n        if (transparencyIndicator === 'grid') {\n          root.element.dataset.transparencyIndicator = transparencyIndicator;\n        }\n        // basic color\n        else {\n          root.element.dataset.transparencyIndicator = 'color';\n        }\n      },\n      write: function write(_ref6) {\n        var root = _ref6.root,\n          props = _ref6.props,\n          shouldOptimize = _ref6.shouldOptimize;\n        var crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty,\n          width = props.width,\n          height = props.height;\n\n        root.ref.image.crop = crop;\n\n        var stage = {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height,\n          center: {\n            x: width * 0.5,\n            y: height * 0.5\n          }\n        };\n\n        var image = {\n          width: root.ref.image.width,\n          height: root.ref.image.height\n        };\n\n        var origin = {\n          x: crop.center.x * image.width,\n          y: crop.center.y * image.height\n        };\n\n        var translation = {\n          x: stage.center.x - image.width * crop.center.x,\n          y: stage.center.y - image.height * crop.center.y\n        };\n\n        var rotation = Math.PI * 2 + (crop.rotation % (Math.PI * 2));\n\n        var cropAspectRatio = crop.aspectRatio || image.height / image.width;\n\n        var shouldLimit =\n          typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n        var stageZoomFactor = getImageRectZoomFactor(\n          image,\n          getCenteredCropRect(stage, cropAspectRatio),\n\n          rotation,\n          shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n        );\n\n        var scale = crop.zoom * stageZoomFactor;\n\n        // update markup view\n        if (markup && markup.length) {\n          root.ref.createMarkup();\n          root.ref.markup.width = width;\n          root.ref.markup.height = height;\n          root.ref.markup.resize = resize;\n          root.ref.markup.dirty = dirty;\n          root.ref.markup.markup = markup;\n          root.ref.markup.crop = getCurrentCropSize(image, crop);\n        } else if (root.ref.markup) {\n          root.ref.destroyMarkup();\n        }\n\n        // update image view\n        var imageView = root.ref.image;\n\n        // don't update clip layout\n        if (shouldOptimize) {\n          imageView.originX = null;\n          imageView.originY = null;\n          imageView.translateX = null;\n          imageView.translateY = null;\n          imageView.rotateZ = null;\n          imageView.scaleX = null;\n          imageView.scaleY = null;\n          return;\n        }\n\n        imageView.originX = origin.x;\n        imageView.originY = origin.y;\n        imageView.translateX = translation.x;\n        imageView.translateY = translation.y;\n        imageView.rotateZ = rotation;\n        imageView.scaleX = scale;\n        imageView.scaleY = scale;\n      }\n    });\n  };\n\n  var createImageView = function createImageView(_) {\n    return _.utils.createView({\n      name: 'image-preview',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['image', 'crop', 'markup', 'resize', 'dirty', 'background'],\n\n        styles: ['translateY', 'scaleX', 'scaleY', 'opacity'],\n\n        animations: {\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          opacity: { type: 'tween', duration: 400 }\n        }\n      },\n\n      create: function create(_ref7) {\n        var root = _ref7.root,\n          props = _ref7.props;\n        root.ref.clip = root.appendChildView(\n          root.createChildView(createClipView(_), {\n            id: props.id,\n            image: props.image,\n            crop: props.crop,\n            markup: props.markup,\n            resize: props.resize,\n            dirty: props.dirty,\n            background: props.background\n          })\n        );\n      },\n      write: function write(_ref8) {\n        var root = _ref8.root,\n          props = _ref8.props,\n          shouldOptimize = _ref8.shouldOptimize;\n        var clip = root.ref.clip;\n        var image = props.image,\n          crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty;\n\n        clip.crop = crop;\n        clip.markup = markup;\n        clip.resize = resize;\n        clip.dirty = dirty;\n\n        // don't update clip layout\n        clip.opacity = shouldOptimize ? 0 : 1;\n\n        // don't re-render if optimizing or hidden (width will be zero resulting in weird animations)\n        if (shouldOptimize || root.rect.element.hidden) return;\n\n        // calculate scaled preview image size\n        var imageAspectRatio = image.height / image.width;\n        var aspectRatio = crop.aspectRatio || imageAspectRatio;\n\n        // calculate container size\n        var containerWidth = root.rect.inner.width;\n        var containerHeight = root.rect.inner.height;\n\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n\n        if (panelAspectRatio && !allowMultiple) {\n          fixedPreviewHeight = containerWidth * panelAspectRatio;\n          aspectRatio = panelAspectRatio;\n        }\n\n        // determine clip width and height\n        var clipHeight =\n          fixedPreviewHeight !== null\n            ? fixedPreviewHeight\n            : Math.max(\n                minPreviewHeight,\n                Math.min(containerWidth * aspectRatio, maxPreviewHeight)\n              );\n\n        var clipWidth = clipHeight / aspectRatio;\n        if (clipWidth > containerWidth) {\n          clipWidth = containerWidth;\n          clipHeight = clipWidth * aspectRatio;\n        }\n\n        if (clipHeight > containerHeight) {\n          clipHeight = containerHeight;\n          clipWidth = containerHeight / aspectRatio;\n        }\n\n        clip.width = clipWidth;\n        clip.height = clipHeight;\n      }\n    });\n  };\n\n  var SVG_MASK =\n    '<svg width=\"500\" height=\"200\" viewBox=\"0 0 500 200\" preserveAspectRatio=\"none\">\\n    <defs>\\n        <radialGradient id=\"gradient-__UID__\" cx=\".5\" cy=\"1.25\" r=\"1.15\">\\n            <stop offset=\\'50%\\' stop-color=\\'#000000\\'/>\\n            <stop offset=\\'56%\\' stop-color=\\'#0a0a0a\\'/>\\n            <stop offset=\\'63%\\' stop-color=\\'#262626\\'/>\\n            <stop offset=\\'69%\\' stop-color=\\'#4f4f4f\\'/>\\n            <stop offset=\\'75%\\' stop-color=\\'#808080\\'/>\\n            <stop offset=\\'81%\\' stop-color=\\'#b1b1b1\\'/>\\n            <stop offset=\\'88%\\' stop-color=\\'#dadada\\'/>\\n            <stop offset=\\'94%\\' stop-color=\\'#f6f6f6\\'/>\\n            <stop offset=\\'100%\\' stop-color=\\'#ffffff\\'/>\\n        </radialGradient>\\n        <mask id=\"mask-__UID__\">\\n            <rect x=\"0\" y=\"0\" width=\"500\" height=\"200\" fill=\"url(#gradient-__UID__)\"></rect>\\n        </mask>\\n    </defs>\\n    <rect x=\"0\" width=\"500\" height=\"200\" fill=\"currentColor\" mask=\"url(#mask-__UID__)\"></rect>\\n</svg>';\n\n  var checkedMyBases = false;\n  var SVGMaskUniqueId = 0;\n\n  var createImageOverlayView = function createImageOverlayView(fpAPI) {\n    return fpAPI.utils.createView({\n      name: 'image-preview-overlay',\n      tag: 'div',\n      ignoreRect: true,\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n\n        if (!checkedMyBases && document.querySelector('base')) {\n          SVG_MASK = SVG_MASK.replace(\n            /url\\(\\#/g,\n            'url(' +\n              window.location.href.replace(window.location.hash, '') +\n              '#'\n          );\n          checkedMyBases = true;\n        }\n\n        SVGMaskUniqueId++;\n        root.element.classList.add(\n          'filepond--image-preview-overlay-'.concat(props.status)\n        );\n        root.element.innerHTML = SVG_MASK.replace(/__UID__/g, SVGMaskUniqueId);\n      },\n      mixins: {\n        styles: ['opacity'],\n        animations: {\n          opacity: { type: 'spring', mass: 25 }\n        }\n      }\n    });\n  };\n\n  /**\n   * Bitmap Worker\n   */\n  var BitmapWorker = function BitmapWorker() {\n    self.onmessage = function(e) {\n      createImageBitmap(e.data.message.file).then(function(bitmap) {\n        self.postMessage({ id: e.data.id, message: bitmap }, [bitmap]);\n      });\n    };\n  };\n\n  /**\n   * ColorMatrix Worker\n   */\n  var ColorMatrixWorker = function ColorMatrixWorker() {\n    self.onmessage = function(e) {\n      var imageData = e.data.message.imageData;\n      var matrix = e.data.message.colorMatrix;\n\n      var data = imageData.data;\n      var l = data.length;\n\n      var m11 = matrix[0];\n      var m12 = matrix[1];\n      var m13 = matrix[2];\n      var m14 = matrix[3];\n      var m15 = matrix[4];\n\n      var m21 = matrix[5];\n      var m22 = matrix[6];\n      var m23 = matrix[7];\n      var m24 = matrix[8];\n      var m25 = matrix[9];\n\n      var m31 = matrix[10];\n      var m32 = matrix[11];\n      var m33 = matrix[12];\n      var m34 = matrix[13];\n      var m35 = matrix[14];\n\n      var m41 = matrix[15];\n      var m42 = matrix[16];\n      var m43 = matrix[17];\n      var m44 = matrix[18];\n      var m45 = matrix[19];\n\n      var index = 0,\n        r = 0.0,\n        g = 0.0,\n        b = 0.0,\n        a = 0.0;\n\n      for (; index < l; index += 4) {\n        r = data[index] / 255;\n        g = data[index + 1] / 255;\n        b = data[index + 2] / 255;\n        a = data[index + 3] / 255;\n        data[index] = Math.max(\n          0,\n          Math.min((r * m11 + g * m12 + b * m13 + a * m14 + m15) * 255, 255)\n        );\n        data[index + 1] = Math.max(\n          0,\n          Math.min((r * m21 + g * m22 + b * m23 + a * m24 + m25) * 255, 255)\n        );\n        data[index + 2] = Math.max(\n          0,\n          Math.min((r * m31 + g * m32 + b * m33 + a * m34 + m35) * 255, 255)\n        );\n        data[index + 3] = Math.max(\n          0,\n          Math.min((r * m41 + g * m42 + b * m43 + a * m44 + m45) * 255, 255)\n        );\n      }\n\n      self.postMessage({ id: e.data.id, message: imageData }, [\n        imageData.data.buffer\n      ]);\n    };\n  };\n\n  var getImageSize = function getImageSize(url, cb) {\n    var image = new Image();\n    image.onload = function() {\n      var width = image.naturalWidth;\n      var height = image.naturalHeight;\n      image = null;\n      cb(width, height);\n    };\n    image.src = url;\n  };\n\n  var transforms = {\n    1: function _() {\n      return [1, 0, 0, 1, 0, 0];\n    },\n    2: function _(width) {\n      return [-1, 0, 0, 1, width, 0];\n    },\n    3: function _(width, height) {\n      return [-1, 0, 0, -1, width, height];\n    },\n    4: function _(width, height) {\n      return [1, 0, 0, -1, 0, height];\n    },\n    5: function _() {\n      return [0, 1, 1, 0, 0, 0];\n    },\n    6: function _(width, height) {\n      return [0, 1, -1, 0, height, 0];\n    },\n    7: function _(width, height) {\n      return [0, -1, -1, 0, height, width];\n    },\n    8: function _(width) {\n      return [0, -1, 1, 0, 0, width];\n    }\n  };\n\n  var fixImageOrientation = function fixImageOrientation(\n    ctx,\n    width,\n    height,\n    orientation\n  ) {\n    // no orientation supplied\n    if (orientation === -1) {\n      return;\n    }\n\n    ctx.transform.apply(ctx, transforms[orientation](width, height));\n  };\n\n  // draws the preview image to canvas\n  var createPreviewImage = function createPreviewImage(\n    data,\n    width,\n    height,\n    orientation\n  ) {\n    // can't draw on half pixels\n    width = Math.round(width);\n    height = Math.round(height);\n\n    // draw image\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n\n    // if is rotated incorrectly swap width and height\n    if (orientation >= 5 && orientation <= 8) {\n      var _ref = [height, width];\n      width = _ref[0];\n      height = _ref[1];\n    }\n\n    // correct image orientation\n    fixImageOrientation(ctx, width, height, orientation);\n\n    // draw the image\n    ctx.drawImage(data, 0, 0, width, height);\n\n    return canvas;\n  };\n\n  var isBitmap = function isBitmap(file) {\n    return /^image/.test(file.type) && !/svg/.test(file.type);\n  };\n\n  var MAX_WIDTH = 10;\n  var MAX_HEIGHT = 10;\n\n  var calculateAverageColor = function calculateAverageColor(image) {\n    var scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\n\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var width = (canvas.width = Math.ceil(image.width * scalar));\n    var height = (canvas.height = Math.ceil(image.height * scalar));\n    ctx.drawImage(image, 0, 0, width, height);\n    var data = null;\n    try {\n      data = ctx.getImageData(0, 0, width, height).data;\n    } catch (e) {\n      return null;\n    }\n    var l = data.length;\n\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    var i = 0;\n\n    for (; i < l; i += 4) {\n      r += data[i] * data[i];\n      g += data[i + 1] * data[i + 1];\n      b += data[i + 2] * data[i + 2];\n    }\n\n    r = averageColor(r, l);\n    g = averageColor(g, l);\n    b = averageColor(b, l);\n\n    return { r: r, g: g, b: b };\n  };\n\n  var averageColor = function averageColor(c, l) {\n    return Math.floor(Math.sqrt(c / (l / 4)));\n  };\n\n  var cloneCanvas = function cloneCanvas(origin, target) {\n    target = target || document.createElement('canvas');\n    target.width = origin.width;\n    target.height = origin.height;\n    var ctx = target.getContext('2d');\n    ctx.drawImage(origin, 0, 0);\n    return target;\n  };\n\n  var cloneImageData = function cloneImageData(imageData) {\n    var id;\n    try {\n      id = new ImageData(imageData.width, imageData.height);\n    } catch (e) {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n      id = ctx.createImageData(imageData.width, imageData.height);\n    }\n    id.data.set(new Uint8ClampedArray(imageData.data));\n    return id;\n  };\n\n  var loadImage = function loadImage(url) {\n    return new Promise(function(resolve, reject) {\n      var img = new Image();\n      img.crossOrigin = 'Anonymous';\n      img.onload = function() {\n        resolve(img);\n      };\n      img.onerror = function(e) {\n        reject(e);\n      };\n      img.src = url;\n    });\n  };\n\n  var createImageWrapperView = function createImageWrapperView(_) {\n    // create overlay view\n    var OverlayView = createImageOverlayView(_);\n\n    var ImageView = createImageView(_);\n    var createWorker = _.utils.createWorker;\n\n    var applyFilter = function applyFilter(root, filter, target) {\n      return new Promise(function(resolve) {\n        // will store image data for future filter updates\n        if (!root.ref.imageData) {\n          root.ref.imageData = target\n            .getContext('2d')\n            .getImageData(0, 0, target.width, target.height);\n        }\n\n        // get image data reference\n        var imageData = cloneImageData(root.ref.imageData);\n\n        if (!filter || filter.length !== 20) {\n          target.getContext('2d').putImageData(imageData, 0, 0);\n          return resolve();\n        }\n\n        var worker = createWorker(ColorMatrixWorker);\n        worker.post(\n          {\n            imageData: imageData,\n            colorMatrix: filter\n          },\n\n          function(response) {\n            // apply filtered colors\n            target.getContext('2d').putImageData(response, 0, 0);\n\n            // stop worker\n            worker.terminate();\n\n            // done!\n            resolve();\n          },\n          [imageData.data.buffer]\n        );\n      });\n    };\n\n    var removeImageView = function removeImageView(root, imageView) {\n      root.removeChildView(imageView);\n      imageView.image.width = 1;\n      imageView.image.height = 1;\n      imageView._destroy();\n    };\n\n    // remove an image\n    var shiftImage = function shiftImage(_ref) {\n      var root = _ref.root;\n      var imageView = root.ref.images.shift();\n      imageView.opacity = 0;\n      imageView.translateY = -15;\n      root.ref.imageViewBin.push(imageView);\n      return imageView;\n    };\n\n    // add new image\n    var pushImage = function pushImage(_ref2) {\n      var root = _ref2.root,\n        props = _ref2.props,\n        image = _ref2.image;\n\n      var id = props.id;\n      var item = root.query('GET_ITEM', { id: id });\n      if (!item) return;\n\n      var crop = item.getMetadata('crop') || {\n        center: {\n          x: 0.5,\n          y: 0.5\n        },\n\n        flip: {\n          horizontal: false,\n          vertical: false\n        },\n\n        zoom: 1,\n        rotation: 0,\n        aspectRatio: null\n      };\n\n      var background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n\n      var markup;\n      var resize;\n      var dirty = false;\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        markup = item.getMetadata('markup') || [];\n        resize = item.getMetadata('resize');\n        dirty = true;\n      }\n\n      // append image presenter\n      var imageView = root.appendChildView(\n        root.createChildView(ImageView, {\n          id: id,\n          image: image,\n          crop: crop,\n          resize: resize,\n          markup: markup,\n          dirty: dirty,\n          background: background,\n          opacity: 0,\n          scaleX: 1.15,\n          scaleY: 1.15,\n          translateY: 15\n        }),\n\n        root.childViews.length\n      );\n\n      root.ref.images.push(imageView);\n\n      // reveal the preview image\n      imageView.opacity = 1;\n      imageView.scaleX = 1;\n      imageView.scaleY = 1;\n      imageView.translateY = 0;\n\n      // the preview is now ready to be drawn\n      setTimeout(function() {\n        root.dispatch('DID_IMAGE_PREVIEW_SHOW', { id: id });\n      }, 250);\n    };\n\n    var updateImage = function updateImage(_ref3) {\n      var root = _ref3.root,\n        props = _ref3.props;\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n      var imageView = root.ref.images[root.ref.images.length - 1];\n      imageView.crop = item.getMetadata('crop');\n      imageView.background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        imageView.dirty = true;\n        imageView.resize = item.getMetadata('resize');\n        imageView.markup = item.getMetadata('markup');\n      }\n    };\n\n    // replace image preview\n    var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n      var root = _ref4.root,\n        props = _ref4.props,\n        action = _ref4.action;\n\n      // only filter and crop trigger redraw\n      if (!/crop|filter|markup|resize/.test(action.change.key)) return;\n\n      // no images to update, exit\n      if (!root.ref.images.length) return;\n\n      // no item found, exit\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n\n      // for now, update existing image when filtering\n      if (/filter/.test(action.change.key)) {\n        var imageView = root.ref.images[root.ref.images.length - 1];\n        applyFilter(root, action.change.value, imageView.image);\n        return;\n      }\n\n      if (/crop|markup|resize/.test(action.change.key)) {\n        var crop = item.getMetadata('crop');\n        var image = root.ref.images[root.ref.images.length - 1];\n\n        // if aspect ratio has changed, we need to create a new image\n        if (Math.abs(crop.aspectRatio - image.crop.aspectRatio) > 0.00001) {\n          var _imageView = shiftImage({ root: root });\n          pushImage({\n            root: root,\n            props: props,\n            image: cloneCanvas(_imageView.image)\n          });\n        }\n        // if not, we can update the current image\n        else {\n          updateImage({ root: root, props: props });\n        }\n      }\n    };\n\n    var canCreateImageBitmap = function canCreateImageBitmap(file) {\n      // Firefox versions before 58 will freeze when running createImageBitmap\n      // in a Web Worker so we detect those versions and return false for support\n      var userAgent = window.navigator.userAgent;\n      var isFirefox = userAgent.match(/Firefox\\/([0-9]+)\\./);\n      var firefoxVersion = isFirefox ? parseInt(isFirefox[1]) : null;\n      if (firefoxVersion <= 58) return false;\n\n      return 'createImageBitmap' in window && isBitmap(file);\n    };\n\n    /**\n     * Write handler for when preview container has been created\n     */\n    var didCreatePreviewContainer = function didCreatePreviewContainer(_ref5) {\n      var root = _ref5.root,\n        props = _ref5.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // determine image size of this item\n      getImageSize(fileURL, function(width, height) {\n        // we can now scale the panel to the final size\n        root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE', {\n          id: id,\n          width: width,\n          height: height\n        });\n      });\n    };\n\n    var drawPreview = function drawPreview(_ref6) {\n      var root = _ref6.root,\n        props = _ref6.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // fallback\n      var loadPreviewFallback = function loadPreviewFallback() {\n        // let's scale the image in the main thread :(\n        loadImage(fileURL).then(previewImageLoaded);\n      };\n\n      // image is now ready\n      var previewImageLoaded = function previewImageLoaded(imageData) {\n        // the file url is no longer needed\n        URL.revokeObjectURL(fileURL);\n\n        // draw the scaled down version here and use that as source so bitmapdata can be closed\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap if orientation is incorrect\n        var width = imageData.width,\n          height = imageData.height;\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref7 = [height, width];\n          width = _ref7[0];\n          height = _ref7[1];\n        }\n\n        // scale canvas based on pixel density\n        // we multiply by .75 as that creates smaller but still clear images on screens with high res displays\n        var pixelDensityFactor = Math.max(1, window.devicePixelRatio * 0.75);\n\n        // we want as much pixels to work with as possible,\n        // this multiplies the minimum image resolution,\n        // so when zooming in it doesn't get too blurry\n        var zoomFactor = root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');\n\n        // imaeg scale factor\n        var scaleFactor = zoomFactor * pixelDensityFactor;\n\n        // calculate scaled preview image size\n        var previewImageRatio = height / width;\n\n        // calculate image preview height and width\n        var previewContainerWidth = root.rect.element.width;\n        var previewContainerHeight = root.rect.element.height;\n\n        var imageWidth = previewContainerWidth;\n        var imageHeight = imageWidth * previewImageRatio;\n\n        if (previewImageRatio > 1) {\n          imageWidth = Math.min(width, previewContainerWidth * scaleFactor);\n          imageHeight = imageWidth * previewImageRatio;\n        } else {\n          imageHeight = Math.min(height, previewContainerHeight * scaleFactor);\n          imageWidth = imageHeight / previewImageRatio;\n        }\n\n        // transfer to image tag so no canvas memory wasted on iOS\n        var previewImage = createPreviewImage(\n          imageData,\n          imageWidth,\n          imageHeight,\n          orientation\n        );\n\n        // done\n        var done = function done() {\n          // calculate average image color, disabled for now\n          var averageColor = root.query(\n            'GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR'\n          )\n            ? calculateAverageColor(data)\n            : null;\n          item.setMetadata('color', averageColor, true);\n\n          // data has been transferred to canvas ( if was ImageBitmap )\n          if ('close' in imageData) {\n            imageData.close();\n          }\n\n          // show the overlay\n          root.ref.overlayShadow.opacity = 1;\n\n          // create the first image\n          pushImage({ root: root, props: props, image: previewImage });\n        };\n\n        // apply filter\n        var filter = item.getMetadata('filter');\n        if (filter) {\n          applyFilter(root, filter, previewImage).then(done);\n        } else {\n          done();\n        }\n      };\n\n      // if we support scaling using createImageBitmap we use a worker\n      if (canCreateImageBitmap(item.file)) {\n        // let's scale the image in a worker\n        var worker = createWorker(BitmapWorker);\n\n        worker.post(\n          {\n            file: item.file\n          },\n\n          function(imageBitmap) {\n            // destroy worker\n            worker.terminate();\n\n            // no bitmap returned, must be something wrong,\n            // try the oldschool way\n            if (!imageBitmap) {\n              loadPreviewFallback();\n              return;\n            }\n\n            // yay we got our bitmap, let's continue showing the preview\n            previewImageLoaded(imageBitmap);\n          }\n        );\n      } else {\n        // create fallback preview\n        loadPreviewFallback();\n      }\n    };\n\n    /**\n     * Write handler for when the preview image is ready to be animated\n     */\n    var didDrawPreview = function didDrawPreview(_ref8) {\n      var root = _ref8.root;\n      // get last added image\n      var image = root.ref.images[root.ref.images.length - 1];\n      image.translateY = 0;\n      image.scaleX = 1.0;\n      image.scaleY = 1.0;\n      image.opacity = 1;\n    };\n\n    /**\n     * Write handler for when the preview has been loaded\n     */\n    var restoreOverlay = function restoreOverlay(_ref9) {\n      var root = _ref9.root;\n      root.ref.overlayShadow.opacity = 1;\n      root.ref.overlayError.opacity = 0;\n      root.ref.overlaySuccess.opacity = 0;\n    };\n\n    var didThrowError = function didThrowError(_ref10) {\n      var root = _ref10.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlayError.opacity = 1;\n    };\n\n    var didCompleteProcessing = function didCompleteProcessing(_ref11) {\n      var root = _ref11.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlaySuccess.opacity = 1;\n    };\n\n    /**\n     * Constructor\n     */\n    var create = function create(_ref12) {\n      var root = _ref12.root;\n\n      // image view\n      root.ref.images = [];\n\n      // the preview image data (we need this to filter the image)\n      root.ref.imageData = null;\n\n      // image bin\n      root.ref.imageViewBin = [];\n\n      // image overlays\n      root.ref.overlayShadow = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'idle'\n        })\n      );\n\n      root.ref.overlaySuccess = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'success'\n        })\n      );\n\n      root.ref.overlayError = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'failure'\n        })\n      );\n    };\n\n    return _.utils.createView({\n      name: 'image-preview-wrapper',\n      create: create,\n      styles: ['height'],\n\n      apis: ['height'],\n\n      destroy: function destroy(_ref13) {\n        var root = _ref13.root;\n        // we resize the image so memory on iOS 12 is released more quickly (it seems)\n        root.ref.images.forEach(function(imageView) {\n          imageView.image.width = 1;\n          imageView.image.height = 1;\n        });\n      },\n      didWriteView: function didWriteView(_ref14) {\n        var root = _ref14.root;\n        root.ref.images.forEach(function(imageView) {\n          imageView.dirty = false;\n        });\n      },\n      write: _.utils.createRoute(\n        {\n          // image preview stated\n          DID_IMAGE_PREVIEW_DRAW: didDrawPreview,\n          DID_IMAGE_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n          DID_FINISH_CALCULATE_PREVIEWSIZE: drawPreview,\n          DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata,\n\n          // file states\n          DID_THROW_ITEM_LOAD_ERROR: didThrowError,\n          DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\n          DID_THROW_ITEM_INVALID: didThrowError,\n          DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\n          DID_START_ITEM_PROCESSING: restoreOverlay,\n          DID_REVERT_ITEM_PROCESSING: restoreOverlay\n        },\n        function(_ref15) {\n          var root = _ref15.root;\n\n          // views on death row\n          var viewsToRemove = root.ref.imageViewBin.filter(function(imageView) {\n            return imageView.opacity === 0;\n          });\n\n          // views to retain\n          root.ref.imageViewBin = root.ref.imageViewBin.filter(function(\n            imageView\n          ) {\n            return imageView.opacity > 0;\n          });\n\n          // remove these views\n          viewsToRemove.forEach(function(imageView) {\n            return removeImageView(root, imageView);\n          });\n          viewsToRemove.length = 0;\n        }\n      )\n    });\n  };\n\n  /**\n   * Image Preview Plugin\n   */\n  var plugin = function plugin(fpAPI) {\n    var addFilter = fpAPI.addFilter,\n      utils = fpAPI.utils;\n    var Type = utils.Type,\n      createRoute = utils.createRoute,\n      isFile = utils.isFile;\n\n    // imagePreviewView\n    var imagePreviewView = createImageWrapperView(fpAPI);\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', function(viewAPI) {\n      // get reference to created view\n      var is = viewAPI.is,\n        view = viewAPI.view,\n        query = viewAPI.query;\n\n      // only hook up to item view and only if is enabled for this cropper\n      if (!is('file') || !query('GET_ALLOW_IMAGE_PREVIEW')) return;\n\n      // create the image preview plugin, but only do so if the item is an image\n      var didLoadItem = function didLoadItem(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        var id = props.id;\n        var item = query('GET_ITEM', id);\n\n        // item could theoretically have been removed in the mean time\n        if (!item || !isFile(item.file) || item.archived) return;\n\n        // get the file object\n        var file = item.file;\n\n        // exit if this is not an image\n        if (!isPreviewableImage(file)) return;\n\n        // test if is filtered\n        if (!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item)) return;\n\n        // exit if image size is too high and no createImageBitmap support\n        // this would simply bring the browser to its knees and that is not what we want\n        var supportsCreateImageBitmap = 'createImageBitmap' in (window || {});\n        var maxPreviewFileSize = query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');\n        if (\n          !supportsCreateImageBitmap &&\n          maxPreviewFileSize &&\n          file.size > maxPreviewFileSize\n        )\n          return;\n\n        // set preview view\n        root.ref.imagePreview = view.appendChildView(\n          view.createChildView(imagePreviewView, { id: id })\n        );\n\n        // update height if is fixed\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (fixedPreviewHeight) {\n          root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n            id: item.id,\n            height: fixedPreviewHeight\n          });\n        }\n\n        // now ready\n        var queue =\n          !supportsCreateImageBitmap &&\n          file.size > query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');\n        root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE', { id: id }, queue);\n      };\n\n      var rescaleItem = function rescaleItem(root, props) {\n        if (!root.ref.imagePreview) return;\n        var id = props.id;\n\n        // get item\n        var item = root.query('GET_ITEM', { id: id });\n        if (!item) return;\n\n        // if is fixed height or panel has aspect ratio, exit here, height has already been defined\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var itemPanelAspectRatio = root.query('GET_ITEM_PANEL_ASPECT_RATIO');\n        var fixedHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (panelAspectRatio || itemPanelAspectRatio || fixedHeight) return;\n\n        // no data!\n        var _root$ref = root.ref,\n          imageWidth = _root$ref.imageWidth,\n          imageHeight = _root$ref.imageHeight;\n        if (!imageWidth || !imageHeight) return;\n\n        // get height min and max\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap of orientation is incorrect\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref2 = [imageHeight, imageWidth];\n          imageWidth = _ref2[0];\n          imageHeight = _ref2[1];\n        }\n\n        // scale up width and height when we're dealing with an SVG\n        if (!isBitmap(item.file) || root.query('GET_IMAGE_PREVIEW_UPSCALE')) {\n          var scalar = 2048 / imageWidth;\n          imageWidth *= scalar;\n          imageHeight *= scalar;\n        }\n\n        // image aspect ratio\n        var imageAspectRatio = imageHeight / imageWidth;\n\n        // we need the item to get to the crop size\n        var previewAspectRatio =\n          (item.getMetadata('crop') || {}).aspectRatio || imageAspectRatio;\n\n        // preview height range\n        var previewHeightMax = Math.max(\n          minPreviewHeight,\n          Math.min(imageHeight, maxPreviewHeight)\n        );\n        var itemWidth = root.rect.element.width;\n        var previewHeight = Math.min(\n          itemWidth * previewAspectRatio,\n          previewHeightMax\n        );\n\n        // request update to panel height\n        root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n          id: item.id,\n          height: previewHeight\n        });\n      };\n\n      var didResizeView = function didResizeView(_ref3) {\n        var root = _ref3.root;\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n        var root = _ref4.root,\n          action = _ref4.action;\n\n        if (action.change.key !== 'crop') return;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didCalculatePreviewSize = function didCalculatePreviewSize(_ref5) {\n        var root = _ref5.root,\n          action = _ref5.action;\n\n        // remember dimensions\n        root.ref.imageWidth = action.width;\n        root.ref.imageHeight = action.height;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n        root.ref.shouldDrawPreview = true;\n\n        // as image load could take a while and fire when draw loop is resting we need to give it a kick\n        root.dispatch('KICK');\n      };\n\n      // start writing\n      view.registerWriter(\n        createRoute(\n          {\n            DID_RESIZE_ROOT: didResizeView,\n            DID_STOP_RESIZE: didResizeView,\n            DID_LOAD_ITEM: didLoadItem,\n            DID_IMAGE_PREVIEW_CALCULATE_SIZE: didCalculatePreviewSize,\n            DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\n          },\n          function(_ref6) {\n            var root = _ref6.root,\n              props = _ref6.props;\n\n            // no preview view attached\n            if (!root.ref.imagePreview) return;\n\n            // don't do anything while hidden\n            if (root.rect.element.hidden) return;\n\n            // resize the item panel\n            if (root.ref.shouldRescale) {\n              rescaleItem(root, props);\n              root.ref.shouldRescale = false;\n            }\n\n            if (root.ref.shouldDrawPreview) {\n              // queue till next frame so we're sure the height has been applied this forces the draw image call inside the wrapper view to use the correct height\n              requestAnimationFrame(function() {\n                root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE', {\n                  id: props.id\n                });\n              });\n              root.ref.shouldDrawPreview = false;\n            }\n          }\n        )\n      );\n    });\n\n    // expose plugin\n    return {\n      options: {\n        // Enable or disable image preview\n        allowImagePreview: [true, Type.BOOLEAN],\n\n        // filters file items to determine which are shown as preview\n        imagePreviewFilterItem: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ],\n\n        // Fixed preview height\n        imagePreviewHeight: [null, Type.INT],\n\n        // Min image height\n        imagePreviewMinHeight: [44, Type.INT],\n\n        // Max image height\n        imagePreviewMaxHeight: [256, Type.INT],\n\n        // Max size of preview file for when createImageBitmap is not supported\n        imagePreviewMaxFileSize: [null, Type.INT],\n\n        // The amount of extra pixels added to the image preview to allow comfortable zooming\n        imagePreviewZoomFactor: [2, Type.INT],\n\n        // Should we upscale small images to fit the max bounding box of the preview area\n        imagePreviewUpscale: [false, Type.BOOLEAN],\n\n        // Max size of preview file that we allow to try to instant preview if createImageBitmap is not supported, else image is queued for loading\n        imagePreviewMaxInstantPreviewFileSize: [1000000, Type.INT],\n\n        // Style of the transparancy indicator used behind images\n        imagePreviewTransparencyIndicator: [null, Type.STRING],\n\n        // Enables or disables reading average image color\n        imagePreviewCalculateAverageImageColor: [false, Type.BOOLEAN],\n\n        // Enables or disables the previewing of markup\n        imagePreviewMarkupShow: [true, Type.BOOLEAN],\n\n        // Allows filtering of markup to only show certain shapes\n        imagePreviewMarkupFilter: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginMediaPreview 1.0.7\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit undefined for details.\n */\n\n/* eslint-disable */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global =\n        typeof globalThis !== 'undefined' ? globalThis : global || self),\n      (global.FilePondPluginMediaPreview = factory()));\n})(this, function () {\n  'use strict';\n\n  const isPreviewableVideo = (file) => /^video/.test(file.type);\n\n  const isPreviewableAudio = (file) => /^audio/.test(file.type);\n\n  ('use strict');\n\n  class AudioPlayer {\n    constructor(mediaEl, audioElems) {\n      this.mediaEl = mediaEl;\n      this.audioElems = audioElems;\n      this.onplayhead = false;\n      this.duration = 0;\n      this.timelineWidth =\n        this.audioElems.timeline.offsetWidth -\n        this.audioElems.playhead.offsetWidth;\n      this.moveplayheadFn = this.moveplayhead.bind(this);\n      this.registerListeners();\n    }\n\n    registerListeners() {\n      this.mediaEl.addEventListener(\n        'timeupdate',\n        this.timeUpdate.bind(this),\n        false\n      );\n      this.mediaEl.addEventListener(\n        'canplaythrough',\n        () => (this.duration = this.mediaEl.duration),\n        false\n      );\n      this.audioElems.timeline.addEventListener(\n        'click',\n        this.timelineClicked.bind(this),\n        false\n      );\n      this.audioElems.button.addEventListener('click', this.play.bind(this));\n      this.audioElems.playhead.addEventListener(\n        'mousedown',\n        this.mouseDown.bind(this),\n        false\n      );\n      window.addEventListener('mouseup', this.mouseUp.bind(this), false);\n    }\n\n    play() {\n      if (this.mediaEl.paused) {\n        this.mediaEl.play();\n      } else {\n        this.mediaEl.pause();\n      }\n\n      this.audioElems.button.classList.toggle('play');\n      this.audioElems.button.classList.toggle('pause');\n    }\n\n    timeUpdate() {\n      let playPercent = (this.mediaEl.currentTime / this.duration) * 100;\n      this.audioElems.playhead.style.marginLeft = playPercent + '%';\n\n      if (this.mediaEl.currentTime === this.duration) {\n        this.audioElems.button.classList.toggle('play');\n        this.audioElems.button.classList.toggle('pause');\n      }\n    }\n\n    moveplayhead(event) {\n      let newMargLeft =\n        event.clientX - this.getPosition(this.audioElems.timeline);\n\n      if (newMargLeft >= 0 && newMargLeft <= this.timelineWidth) {\n        this.audioElems.playhead.style.marginLeft = newMargLeft + 'px';\n      }\n\n      if (newMargLeft < 0) {\n        this.audioElems.playhead.style.marginLeft = '0px';\n      }\n\n      if (newMargLeft > this.timelineWidth) {\n        this.audioElems.playhead.style.marginLeft =\n          this.timelineWidth - 4 + 'px';\n      }\n    }\n\n    timelineClicked(event) {\n      this.moveplayhead(event);\n      this.mediaEl.currentTime = this.duration * this.clickPercent(event);\n    }\n\n    mouseDown() {\n      this.onplayhead = true;\n      window.addEventListener('mousemove', this.moveplayheadFn, true);\n      this.mediaEl.removeEventListener(\n        'timeupdate',\n        this.timeUpdate.bind(this),\n        false\n      );\n    }\n\n    mouseUp(event) {\n      window.removeEventListener('mousemove', this.moveplayheadFn, true);\n\n      if (this.onplayhead == true) {\n        this.moveplayhead(event); // change current time\n\n        this.mediaEl.currentTime = this.duration * this.clickPercent(event);\n        this.mediaEl.addEventListener(\n          'timeupdate',\n          this.timeUpdate.bind(this),\n          false\n        );\n      }\n\n      this.onplayhead = false;\n    }\n\n    clickPercent(event) {\n      return (\n        (event.clientX - this.getPosition(this.audioElems.timeline)) /\n        this.timelineWidth\n      );\n    }\n\n    getPosition(el) {\n      return el.getBoundingClientRect().left;\n    }\n  }\n\n  const createMediaView = (_) =>\n    _.utils.createView({\n      name: 'media-preview',\n      tag: 'div',\n      ignoreRect: true,\n      create: ({ root, props }) => {\n        const { id } = props; // get item\n\n        const item = root.query('GET_ITEM', {\n          id: props.id,\n        });\n        let tagName = isPreviewableAudio(item.file) ? 'audio' : 'video';\n        root.ref.media = document.createElement(tagName);\n        root.ref.media.setAttribute('controls', true);\n        root.element.appendChild(root.ref.media);\n\n        if (isPreviewableAudio(item.file)) {\n          let docfrag = document.createDocumentFragment();\n          root.ref.audio = [];\n          (root.ref.audio.container = document.createElement('div')),\n            (root.ref.audio.button = document.createElement('span')),\n            (root.ref.audio.timeline = document.createElement('div')),\n            (root.ref.audio.playhead = document.createElement('div'));\n          root.ref.audio.container.className = 'audioplayer';\n          root.ref.audio.button.className = 'playpausebtn play';\n          root.ref.audio.timeline.className = 'timeline';\n          root.ref.audio.playhead.className = 'playhead';\n          root.ref.audio.timeline.appendChild(root.ref.audio.playhead);\n          root.ref.audio.container.appendChild(root.ref.audio.button);\n          root.ref.audio.container.appendChild(root.ref.audio.timeline);\n          docfrag.appendChild(root.ref.audio.container);\n          root.element.appendChild(docfrag);\n        }\n      },\n      write: _.utils.createRoute({\n        DID_MEDIA_PREVIEW_LOAD: ({ root, props }) => {\n          const { id } = props; // get item\n\n          const item = root.query('GET_ITEM', {\n            id: props.id,\n          });\n          if (!item) return;\n          let URL = window.URL || window.webkitURL;\n          let blob = new Blob([item.file], {\n            type: item.file.type,\n          });\n          root.ref.media.type = item.file.type;\n          root.ref.media.src = URL.createObjectURL(blob); // create audio player in case of audio file\n\n          if (isPreviewableAudio(item.file)) {\n            new AudioPlayer(root.ref.media, root.ref.audio);\n          } // determine dimensions and update panel accordingly\n\n          root.ref.media.addEventListener(\n            'loadeddata',\n            () => {\n              let height = 75; // default height for audio panel\n\n              if (isPreviewableVideo(item.file)) {\n                let containerWidth = root.ref.media.offsetWidth;\n                let factor = root.ref.media.videoWidth / containerWidth;\n                height = root.ref.media.videoHeight / factor;\n              }\n\n              root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n                id: props.id,\n                height: height,\n              });\n            },\n            false\n          );\n        },\n      }),\n    });\n\n  const createMediaWrapperView = (_) => {\n    /**\n     * Write handler for when preview container has been created\n     */\n    const didCreatePreviewContainer = ({ root, props }) => {\n      const { id } = props;\n      const item = root.query('GET_ITEM', id);\n      if (!item) return; // the preview is now ready to be drawn\n\n      root.dispatch('DID_MEDIA_PREVIEW_LOAD', {\n        id,\n      });\n    };\n    /**\n     * Constructor\n     */\n\n    const create = ({ root, props }) => {\n      const media = createMediaView(_); // append media presenter\n\n      root.ref.media = root.appendChildView(\n        root.createChildView(media, {\n          id: props.id,\n        })\n      );\n    };\n\n    return _.utils.createView({\n      name: 'media-preview-wrapper',\n      create,\n      write: _.utils.createRoute({\n        // media preview stated\n        DID_MEDIA_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n      }),\n    });\n  };\n\n  /**\n   * Media Preview Plugin\n   */\n\n  const plugin = (fpAPI) => {\n    const { addFilter, utils } = fpAPI;\n    const { Type, createRoute } = utils;\n    const mediaWrapperView = createMediaWrapperView(fpAPI); // called for each view that is created right after the 'create' method\n\n    addFilter('CREATE_VIEW', (viewAPI) => {\n      // get reference to created view\n      const { is, view, query } = viewAPI; // only hook up to item view\n\n      if (!is('file')) {\n        return;\n      } // create the media preview plugin, but only do so if the item is video or audio\n\n      const didLoadItem = ({ root, props }) => {\n        const { id } = props;\n        const item = query('GET_ITEM', id);\n\n        if (\n          !item ||\n          item.archived ||\n          (!isPreviewableVideo(item.file) && !isPreviewableAudio(item.file))\n        ) {\n          return;\n        } // set preview view\n\n        root.ref.mediaPreview = view.appendChildView(\n          view.createChildView(mediaWrapperView, {\n            id,\n          })\n        ); // now ready\n\n        root.dispatch('DID_MEDIA_PREVIEW_CONTAINER_CREATE', {\n          id,\n        });\n      }; // start writing\n\n      view.registerWriter(\n        createRoute(\n          {\n            DID_LOAD_ITEM: didLoadItem,\n          },\n          ({ root, props }) => {\n            const { id } = props;\n            const item = query('GET_ITEM', id); // don't do anything while not an video or audio file or hidden\n\n            if (\n              (!isPreviewableVideo(item.file) &&\n                !isPreviewableAudio(item.file)) ||\n              root.rect.element.hidden\n            )\n              return;\n          }\n        )\n      );\n    }); // expose plugin\n\n    return {\n      options: {\n        allowVideoPreview: [true, Type.BOOLEAN],\n        allowAudioPreview: [true, Type.BOOLEAN],\n      },\n    };\n  }; // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n\n  const isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', {\n        detail: plugin,\n      })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePond 4.21.1\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? factory(exports)\n    : typeof define === 'function' && define.amd\n    ? define(['exports'], factory)\n    : ((global = global || self), factory((global.FilePond = {})));\n})(this, function(exports) {\n  'use strict';\n\n  var isNode = function isNode(value) {\n    return value instanceof HTMLElement;\n  };\n\n  var createStore = function createStore(initialState) {\n    var queries =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var actions =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    // internal state\n    var state = Object.assign({}, initialState);\n\n    // contains all actions for next frame, is clear when actions are requested\n    var actionQueue = [];\n    var dispatchQueue = [];\n\n    // returns a duplicate of the current state\n    var getState = function getState() {\n      return Object.assign({}, state);\n    };\n\n    // returns a duplicate of the actions array and clears the actions array\n    var processActionQueue = function processActionQueue() {\n      // create copy of actions queue\n      var queue = [].concat(actionQueue);\n\n      // clear actions queue (we don't want no double actions)\n      actionQueue.length = 0;\n\n      return queue;\n    };\n\n    // processes actions that might block the main UI thread\n    var processDispatchQueue = function processDispatchQueue() {\n      // create copy of actions queue\n      var queue = [].concat(dispatchQueue);\n\n      // clear actions queue (we don't want no double actions)\n      dispatchQueue.length = 0;\n\n      // now dispatch these actions\n      queue.forEach(function(_ref) {\n        var type = _ref.type,\n          data = _ref.data;\n        dispatch(type, data);\n      });\n    };\n\n    // adds a new action, calls its handler and\n    var dispatch = function dispatch(type, data, isBlocking) {\n      // is blocking action (should never block if document is hidden)\n      if (isBlocking && !document.hidden) {\n        dispatchQueue.push({ type: type, data: data });\n        return;\n      }\n\n      // if this action has a handler, handle the action\n      if (actionHandlers[type]) {\n        actionHandlers[type](data);\n      }\n\n      // now add action\n      actionQueue.push({\n        type: type,\n        data: data\n      });\n    };\n\n    var query = function query(str) {\n      var _queryHandles;\n      for (\n        var _len = arguments.length,\n          args = new Array(_len > 1 ? _len - 1 : 0),\n          _key = 1;\n        _key < _len;\n        _key++\n      ) {\n        args[_key - 1] = arguments[_key];\n      }\n      return queryHandles[str]\n        ? (_queryHandles = queryHandles)[str].apply(_queryHandles, args)\n        : null;\n    };\n\n    var api = {\n      getState: getState,\n      processActionQueue: processActionQueue,\n      processDispatchQueue: processDispatchQueue,\n      dispatch: dispatch,\n      query: query\n    };\n\n    var queryHandles = {};\n    queries.forEach(function(query) {\n      queryHandles = Object.assign({}, query(state), {}, queryHandles);\n    });\n\n    var actionHandlers = {};\n    actions.forEach(function(action) {\n      actionHandlers = Object.assign(\n        {},\n        action(dispatch, query, state),\n        {},\n        actionHandlers\n      );\n    });\n\n    return api;\n  };\n\n  var defineProperty = function defineProperty(obj, property, definition) {\n    if (typeof definition === 'function') {\n      obj[property] = definition;\n      return;\n    }\n    Object.defineProperty(obj, property, Object.assign({}, definition));\n  };\n\n  var forin = function forin(obj, cb) {\n    for (var key in obj) {\n      if (!obj.hasOwnProperty(key)) {\n        continue;\n      }\n\n      cb(key, obj[key]);\n    }\n  };\n\n  var createObject = function createObject(definition) {\n    var obj = {};\n    forin(definition, function(property) {\n      defineProperty(obj, property, definition[property]);\n    });\n    return obj;\n  };\n\n  var attr = function attr(node, name) {\n    var value =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    if (value === null) {\n      return node.getAttribute(name) || node.hasAttribute(name);\n    }\n    node.setAttribute(name, value);\n  };\n\n  var ns = 'http://www.w3.org/2000/svg';\n  var svgElements = ['svg', 'path']; // only svg elements used\n\n  var isSVGElement = function isSVGElement(tag) {\n    return svgElements.includes(tag);\n  };\n\n  var createElement = function createElement(tag, className) {\n    var attributes =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    if (typeof className === 'object') {\n      attributes = className;\n      className = null;\n    }\n    var element = isSVGElement(tag)\n      ? document.createElementNS(ns, tag)\n      : document.createElement(tag);\n    if (className) {\n      if (isSVGElement(tag)) {\n        attr(element, 'class', className);\n      } else {\n        element.className = className;\n      }\n    }\n    forin(attributes, function(name, value) {\n      attr(element, name, value);\n    });\n    return element;\n  };\n\n  var appendChild = function appendChild(parent) {\n    return function(child, index) {\n      if (typeof index !== 'undefined' && parent.children[index]) {\n        parent.insertBefore(child, parent.children[index]);\n      } else {\n        parent.appendChild(child);\n      }\n    };\n  };\n\n  var appendChildView = function appendChildView(parent, childViews) {\n    return function(view, index) {\n      if (typeof index !== 'undefined') {\n        childViews.splice(index, 0, view);\n      } else {\n        childViews.push(view);\n      }\n\n      return view;\n    };\n  };\n\n  var removeChildView = function removeChildView(parent, childViews) {\n    return function(view) {\n      // remove from child views\n      childViews.splice(childViews.indexOf(view), 1);\n\n      // remove the element\n      if (view.element.parentNode) {\n        parent.removeChild(view.element);\n      }\n\n      return view;\n    };\n  };\n\n  var IS_BROWSER = (function() {\n    return (\n      typeof window !== 'undefined' && typeof window.document !== 'undefined'\n    );\n  })();\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  };\n\n  var testElement = isBrowser() ? createElement('svg') : {};\n  var getChildCount =\n    'children' in testElement\n      ? function(el) {\n          return el.children.length;\n        }\n      : function(el) {\n          return el.childNodes.length;\n        };\n\n  var getViewRect = function getViewRect(\n    elementRect,\n    childViews,\n    offset,\n    scale\n  ) {\n    var left = offset[0] || elementRect.left;\n    var top = offset[1] || elementRect.top;\n    var right = left + elementRect.width;\n    var bottom = top + elementRect.height * (scale[1] || 1);\n\n    var rect = {\n      // the rectangle of the element itself\n      element: Object.assign({}, elementRect),\n\n      // the rectangle of the element expanded to contain its children, does not include any margins\n      inner: {\n        left: elementRect.left,\n        top: elementRect.top,\n        right: elementRect.right,\n        bottom: elementRect.bottom\n      },\n\n      // the rectangle of the element expanded to contain its children including own margin and child margins\n      // margins will be added after we've recalculated the size\n      outer: {\n        left: left,\n        top: top,\n        right: right,\n        bottom: bottom\n      }\n    };\n\n    // expand rect to fit all child rectangles\n    childViews\n      .filter(function(childView) {\n        return !childView.isRectIgnored();\n      })\n      .map(function(childView) {\n        return childView.rect;\n      })\n      .forEach(function(childViewRect) {\n        expandRect(rect.inner, Object.assign({}, childViewRect.inner));\n        expandRect(rect.outer, Object.assign({}, childViewRect.outer));\n      });\n\n    // calculate inner width and height\n    calculateRectSize(rect.inner);\n\n    // append additional margin (top and left margins are included in top and left automatically)\n    rect.outer.bottom += rect.element.marginBottom;\n    rect.outer.right += rect.element.marginRight;\n\n    // calculate outer width and height\n    calculateRectSize(rect.outer);\n\n    return rect;\n  };\n\n  var expandRect = function expandRect(parent, child) {\n    // adjust for parent offset\n    child.top += parent.top;\n    child.right += parent.left;\n    child.bottom += parent.top;\n    child.left += parent.left;\n\n    if (child.bottom > parent.bottom) {\n      parent.bottom = child.bottom;\n    }\n\n    if (child.right > parent.right) {\n      parent.right = child.right;\n    }\n  };\n\n  var calculateRectSize = function calculateRectSize(rect) {\n    rect.width = rect.right - rect.left;\n    rect.height = rect.bottom - rect.top;\n  };\n\n  var isNumber = function isNumber(value) {\n    return typeof value === 'number';\n  };\n\n  /**\n   * Determines if position is at destination\n   * @param position\n   * @param destination\n   * @param velocity\n   * @param errorMargin\n   * @returns {boolean}\n   */\n  var thereYet = function thereYet(position, destination, velocity) {\n    var errorMargin =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.001;\n    return (\n      Math.abs(position - destination) < errorMargin &&\n      Math.abs(velocity) < errorMargin\n    );\n  };\n\n  /**\n   * Spring animation\n   */\n  var spring =\n    // default options\n    function spring() // method definition\n    {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$stiffness = _ref.stiffness,\n        stiffness = _ref$stiffness === void 0 ? 0.5 : _ref$stiffness,\n        _ref$damping = _ref.damping,\n        damping = _ref$damping === void 0 ? 0.75 : _ref$damping,\n        _ref$mass = _ref.mass,\n        mass = _ref$mass === void 0 ? 10 : _ref$mass;\n      var target = null;\n      var position = null;\n      var velocity = 0;\n      var resting = false;\n\n      // updates spring state\n      var interpolate = function interpolate(ts, skipToEndState) {\n        // in rest, don't animate\n        if (resting) return;\n\n        // need at least a target or position to do springy things\n        if (!(isNumber(target) && isNumber(position))) {\n          resting = true;\n          velocity = 0;\n          return;\n        }\n\n        // calculate spring force\n        var f = -(position - target) * stiffness;\n\n        // update velocity by adding force based on mass\n        velocity += f / mass;\n\n        // update position by adding velocity\n        position += velocity;\n\n        // slow down based on amount of damping\n        velocity *= damping;\n\n        // we've arrived if we're near target and our velocity is near zero\n        if (thereYet(position, target, velocity) || skipToEndState) {\n          position = target;\n          velocity = 0;\n          resting = true;\n\n          // we done\n          api.onupdate(position);\n          api.oncomplete(position);\n        } else {\n          // progress update\n          api.onupdate(position);\n        }\n      };\n\n      /**\n       * Set new target value\n       * @param value\n       */\n      var setTarget = function setTarget(value) {\n        // if currently has no position, set target and position to this value\n        if (isNumber(value) && !isNumber(position)) {\n          position = value;\n        }\n\n        // next target value will not be animated to\n        if (target === null) {\n          target = value;\n          position = value;\n        }\n\n        // let start moving to target\n        target = value;\n\n        // already at target\n        if (position === target || typeof target === 'undefined') {\n          // now resting as target is current position, stop moving\n          resting = true;\n          velocity = 0;\n\n          // done!\n          api.onupdate(position);\n          api.oncomplete(position);\n\n          return;\n        }\n\n        resting = false;\n      };\n\n      // need 'api' to call onupdate callback\n      var api = createObject({\n        interpolate: interpolate,\n        target: {\n          set: setTarget,\n          get: function get() {\n            return target;\n          }\n        },\n\n        resting: {\n          get: function get() {\n            return resting;\n          }\n        },\n\n        onupdate: function onupdate(value) {},\n        oncomplete: function oncomplete(value) {}\n      });\n\n      return api;\n    };\n\n  var easeLinear = function easeLinear(t) {\n    return t;\n  };\n  var easeInOutQuad = function easeInOutQuad(t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  };\n\n  var tween =\n    // default values\n    function tween() // method definition\n    {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$duration = _ref.duration,\n        duration = _ref$duration === void 0 ? 500 : _ref$duration,\n        _ref$easing = _ref.easing,\n        easing = _ref$easing === void 0 ? easeInOutQuad : _ref$easing,\n        _ref$delay = _ref.delay,\n        delay = _ref$delay === void 0 ? 0 : _ref$delay;\n      var start = null;\n      var t;\n      var p;\n      var resting = true;\n      var reverse = false;\n      var target = null;\n\n      var interpolate = function interpolate(ts, skipToEndState) {\n        if (resting || target === null) return;\n\n        if (start === null) {\n          start = ts;\n        }\n\n        if (ts - start < delay) return;\n\n        t = ts - start - delay;\n\n        if (t >= duration || skipToEndState) {\n          t = 1;\n          p = reverse ? 0 : 1;\n          api.onupdate(p * target);\n          api.oncomplete(p * target);\n          resting = true;\n        } else {\n          p = t / duration;\n          api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n        }\n      };\n\n      // need 'api' to call onupdate callback\n      var api = createObject({\n        interpolate: interpolate,\n        target: {\n          get: function get() {\n            return reverse ? 0 : target;\n          },\n          set: function set(value) {\n            // is initial value\n            if (target === null) {\n              target = value;\n              api.onupdate(value);\n              api.oncomplete(value);\n              return;\n            }\n\n            // want to tween to a smaller value and have a current value\n            if (value < target) {\n              target = 1;\n              reverse = true;\n            } else {\n              // not tweening to a smaller value\n              reverse = false;\n              target = value;\n            }\n\n            // let's go!\n            resting = false;\n            start = null;\n          }\n        },\n\n        resting: {\n          get: function get() {\n            return resting;\n          }\n        },\n\n        onupdate: function onupdate(value) {},\n        oncomplete: function oncomplete(value) {}\n      });\n\n      return api;\n    };\n\n  var animator = {\n    spring: spring,\n    tween: tween\n  };\n\n  /*\n                       { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n                       { translation: { type: 'spring', ... }, ... }\n                       { translation: { x: { type: 'spring', ... } } }\n                      */\n  var createAnimator = function createAnimator(definition, category, property) {\n    // default is single definition\n    // we check if transform is set, if so, we check if property is set\n    var def =\n      definition[category] && typeof definition[category][property] === 'object'\n        ? definition[category][property]\n        : definition[category] || definition;\n\n    var type = typeof def === 'string' ? def : def.type;\n    var props = typeof def === 'object' ? Object.assign({}, def) : {};\n\n    return animator[type] ? animator[type](props) : null;\n  };\n\n  var addGetSet = function addGetSet(keys, obj, props) {\n    var overwrite =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    obj = Array.isArray(obj) ? obj : [obj];\n    obj.forEach(function(o) {\n      keys.forEach(function(key) {\n        var name = key;\n        var getter = function getter() {\n          return props[key];\n        };\n        var setter = function setter(value) {\n          return (props[key] = value);\n        };\n\n        if (typeof key === 'object') {\n          name = key.key;\n          getter = key.getter || getter;\n          setter = key.setter || setter;\n        }\n\n        if (o[name] && !overwrite) {\n          return;\n        }\n\n        o[name] = {\n          get: getter,\n          set: setter\n        };\n      });\n    });\n  };\n\n  // add to state,\n  // add getters and setters to internal and external api (if not set)\n  // setup animators\n\n  var animations = function animations(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI;\n    // initial properties\n    var initialProps = Object.assign({}, viewProps);\n\n    // list of all active animations\n    var animations = [];\n\n    // setup animators\n    forin(mixinConfig, function(property, animation) {\n      var animator = createAnimator(animation);\n      if (!animator) {\n        return;\n      }\n\n      // when the animator updates, update the view state value\n      animator.onupdate = function(value) {\n        viewProps[property] = value;\n      };\n\n      // set animator target\n      animator.target = initialProps[property];\n\n      // when value is set, set the animator target value\n      var prop = {\n        key: property,\n        setter: function setter(value) {\n          // if already at target, we done!\n          if (animator.target === value) {\n            return;\n          }\n\n          animator.target = value;\n        },\n        getter: function getter() {\n          return viewProps[property];\n        }\n      };\n\n      // add getters and setters\n      addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n      // add it to the list for easy updating from the _write method\n      animations.push(animator);\n    });\n\n    // expose internal write api\n    return {\n      write: function write(ts) {\n        var skipToEndState = document.hidden;\n        var resting = true;\n        animations.forEach(function(animation) {\n          if (!animation.resting) resting = false;\n          animation.interpolate(ts, skipToEndState);\n        });\n        return resting;\n      },\n      destroy: function destroy() {}\n    };\n  };\n\n  var addEvent = function addEvent(element) {\n    return function(type, fn) {\n      element.addEventListener(type, fn);\n    };\n  };\n\n  var removeEvent = function removeEvent(element) {\n    return function(type, fn) {\n      element.removeEventListener(type, fn);\n    };\n  };\n\n  // mixin\n  var listeners = function listeners(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI,\n      viewState = _ref.viewState,\n      view = _ref.view;\n    var events = [];\n\n    var add = addEvent(view.element);\n    var remove = removeEvent(view.element);\n\n    viewExternalAPI.on = function(type, fn) {\n      events.push({\n        type: type,\n        fn: fn\n      });\n\n      add(type, fn);\n    };\n\n    viewExternalAPI.off = function(type, fn) {\n      events.splice(\n        events.findIndex(function(event) {\n          return event.type === type && event.fn === fn;\n        }),\n        1\n      );\n\n      remove(type, fn);\n    };\n\n    return {\n      write: function write() {\n        // not busy\n        return true;\n      },\n      destroy: function destroy() {\n        events.forEach(function(event) {\n          remove(event.type, event.fn);\n        });\n      }\n    };\n  };\n\n  // add to external api and link to props\n\n  var apis = function apis(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewExternalAPI = _ref.viewExternalAPI;\n    addGetSet(mixinConfig, viewExternalAPI, viewProps);\n  };\n\n  var isDefined = function isDefined(value) {\n    return value != null;\n  };\n\n  // add to state,\n  // add getters and setters to internal and external api (if not set)\n  // set initial state based on props in viewProps\n  // apply as transforms each frame\n\n  var defaults = {\n    opacity: 1,\n    scaleX: 1,\n    scaleY: 1,\n    translateX: 0,\n    translateY: 0,\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    originX: 0,\n    originY: 0\n  };\n\n  var styles = function styles(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI,\n      view = _ref.view;\n    // initial props\n    var initialProps = Object.assign({}, viewProps);\n\n    // current props\n    var currentProps = {};\n\n    // we will add those properties to the external API and link them to the viewState\n    addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n    // override rect on internal and external rect getter so it takes in account transforms\n    var getOffset = function getOffset() {\n      return [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n    };\n\n    var getScale = function getScale() {\n      return [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n    };\n    var getRect = function getRect() {\n      return view.rect\n        ? getViewRect(view.rect, view.childViews, getOffset(), getScale())\n        : null;\n    };\n    viewInternalAPI.rect = { get: getRect };\n    viewExternalAPI.rect = { get: getRect };\n\n    // apply view props\n    mixinConfig.forEach(function(key) {\n      viewProps[key] =\n        typeof initialProps[key] === 'undefined'\n          ? defaults[key]\n          : initialProps[key];\n    });\n\n    // expose api\n    return {\n      write: function write() {\n        // see if props have changed\n        if (!propsHaveChanged(currentProps, viewProps)) {\n          return;\n        }\n\n        // moves element to correct position on screen\n        applyStyles(view.element, viewProps);\n\n        // store new transforms\n        Object.assign(currentProps, Object.assign({}, viewProps));\n\n        // no longer busy\n        return true;\n      },\n      destroy: function destroy() {}\n    };\n  };\n\n  var propsHaveChanged = function propsHaveChanged(currentProps, newProps) {\n    // different amount of keys\n    if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n      return true;\n    }\n\n    // lets analyze the individual props\n    for (var prop in newProps) {\n      if (newProps[prop] !== currentProps[prop]) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  var applyStyles = function applyStyles(element, _ref2) {\n    var opacity = _ref2.opacity,\n      perspective = _ref2.perspective,\n      translateX = _ref2.translateX,\n      translateY = _ref2.translateY,\n      scaleX = _ref2.scaleX,\n      scaleY = _ref2.scaleY,\n      rotateX = _ref2.rotateX,\n      rotateY = _ref2.rotateY,\n      rotateZ = _ref2.rotateZ,\n      originX = _ref2.originX,\n      originY = _ref2.originY,\n      width = _ref2.width,\n      height = _ref2.height;\n\n    var transforms = '';\n    var styles = '';\n\n    // handle transform origin\n    if (isDefined(originX) || isDefined(originY)) {\n      styles +=\n        'transform-origin: ' + (originX || 0) + 'px ' + (originY || 0) + 'px;';\n    }\n\n    // transform order is relevant\n    // 0. perspective\n    if (isDefined(perspective)) {\n      transforms += 'perspective(' + perspective + 'px) ';\n    }\n\n    // 1. translate\n    if (isDefined(translateX) || isDefined(translateY)) {\n      transforms +=\n        'translate3d(' +\n        (translateX || 0) +\n        'px, ' +\n        (translateY || 0) +\n        'px, 0) ';\n    }\n\n    // 2. scale\n    if (isDefined(scaleX) || isDefined(scaleY)) {\n      transforms +=\n        'scale3d(' +\n        (isDefined(scaleX) ? scaleX : 1) +\n        ', ' +\n        (isDefined(scaleY) ? scaleY : 1) +\n        ', 1) ';\n    }\n\n    // 3. rotate\n    if (isDefined(rotateZ)) {\n      transforms += 'rotateZ(' + rotateZ + 'rad) ';\n    }\n\n    if (isDefined(rotateX)) {\n      transforms += 'rotateX(' + rotateX + 'rad) ';\n    }\n\n    if (isDefined(rotateY)) {\n      transforms += 'rotateY(' + rotateY + 'rad) ';\n    }\n\n    // add transforms\n    if (transforms.length) {\n      styles += 'transform:' + transforms + ';';\n    }\n\n    // add opacity\n    if (isDefined(opacity)) {\n      styles += 'opacity:' + opacity + ';';\n\n      // if we reach zero, we make the element inaccessible\n      if (opacity === 0) {\n        styles += 'visibility:hidden;';\n      }\n\n      // if we're below 100% opacity this element can't be clicked\n      if (opacity < 1) {\n        styles += 'pointer-events:none;';\n      }\n    }\n\n    // add height\n    if (isDefined(height)) {\n      styles += 'height:' + height + 'px;';\n    }\n\n    // add width\n    if (isDefined(width)) {\n      styles += 'width:' + width + 'px;';\n    }\n\n    // apply styles\n    var elementCurrentStyle = element.elementCurrentStyle || '';\n\n    // if new styles does not match current styles, lets update!\n    if (\n      styles.length !== elementCurrentStyle.length ||\n      styles !== elementCurrentStyle\n    ) {\n      element.style.cssText = styles;\n      // store current styles so we can compare them to new styles later on\n      // _not_ getting the style value is faster\n      element.elementCurrentStyle = styles;\n    }\n  };\n\n  var Mixins = {\n    styles: styles,\n    listeners: listeners,\n    animations: animations,\n    apis: apis\n  };\n\n  var updateRect = function updateRect() {\n    var rect =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var element =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var style =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (!element.layoutCalculated) {\n      rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n      rect.marginTop = parseInt(style.marginTop, 10) || 0;\n      rect.marginRight = parseInt(style.marginRight, 10) || 0;\n      rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n      rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n      element.layoutCalculated = true;\n    }\n\n    rect.left = element.offsetLeft || 0;\n    rect.top = element.offsetTop || 0;\n    rect.width = element.offsetWidth || 0;\n    rect.height = element.offsetHeight || 0;\n\n    rect.right = rect.left + rect.width;\n    rect.bottom = rect.top + rect.height;\n\n    rect.scrollTop = element.scrollTop;\n\n    rect.hidden = element.offsetParent === null;\n\n    return rect;\n  };\n\n  var createView =\n    // default view definition\n    function createView() {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$tag = _ref.tag,\n        tag = _ref$tag === void 0 ? 'div' : _ref$tag,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? null : _ref$name,\n        _ref$attributes = _ref.attributes,\n        attributes = _ref$attributes === void 0 ? {} : _ref$attributes,\n        _ref$read = _ref.read,\n        read = _ref$read === void 0 ? function() {} : _ref$read,\n        _ref$write = _ref.write,\n        write = _ref$write === void 0 ? function() {} : _ref$write,\n        _ref$create = _ref.create,\n        create = _ref$create === void 0 ? function() {} : _ref$create,\n        _ref$destroy = _ref.destroy,\n        destroy = _ref$destroy === void 0 ? function() {} : _ref$destroy,\n        _ref$filterFrameActio = _ref.filterFrameActionsForChild,\n        filterFrameActionsForChild =\n          _ref$filterFrameActio === void 0\n            ? function(child, actions) {\n                return actions;\n              }\n            : _ref$filterFrameActio,\n        _ref$didCreateView = _ref.didCreateView,\n        didCreateView =\n          _ref$didCreateView === void 0 ? function() {} : _ref$didCreateView,\n        _ref$didWriteView = _ref.didWriteView,\n        didWriteView =\n          _ref$didWriteView === void 0 ? function() {} : _ref$didWriteView,\n        _ref$ignoreRect = _ref.ignoreRect,\n        ignoreRect = _ref$ignoreRect === void 0 ? false : _ref$ignoreRect,\n        _ref$ignoreRectUpdate = _ref.ignoreRectUpdate,\n        ignoreRectUpdate =\n          _ref$ignoreRectUpdate === void 0 ? false : _ref$ignoreRectUpdate,\n        _ref$mixins = _ref.mixins,\n        mixins = _ref$mixins === void 0 ? [] : _ref$mixins;\n      return function(\n        // each view requires reference to store\n        store\n      ) {\n        var props =\n          arguments.length > 1 && arguments[1] !== undefined\n            ? arguments[1]\n            : {};\n        // root element should not be changed\n        var element = createElement(tag, 'filepond--' + name, attributes);\n\n        // style reference should also not be changed\n        var style = window.getComputedStyle(element, null);\n\n        // element rectangle\n        var rect = updateRect();\n        var frameRect = null;\n\n        // rest state\n        var isResting = false;\n\n        // pretty self explanatory\n        var childViews = [];\n\n        // loaded mixins\n        var activeMixins = [];\n\n        // references to created children\n        var ref = {};\n\n        // state used for each instance\n        var state = {};\n\n        // list of writers that will be called to update this view\n        var writers = [\n          write // default writer\n        ];\n\n        var readers = [\n          read // default reader\n        ];\n\n        var destroyers = [\n          destroy // default destroy\n        ];\n\n        // core view methods\n        var getElement = function getElement() {\n          return element;\n        };\n        var getChildViews = function getChildViews() {\n          return childViews.concat();\n        };\n        var getReference = function getReference() {\n          return ref;\n        };\n        var createChildView = function createChildView(store) {\n          return function(view, props) {\n            return view(store, props);\n          };\n        };\n        var getRect = function getRect() {\n          if (frameRect) {\n            return frameRect;\n          }\n          frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n          return frameRect;\n        };\n        var getStyle = function getStyle() {\n          return style;\n        };\n\n        /**\n         * Read data from DOM\n         * @private\n         */\n        var _read = function _read() {\n          frameRect = null;\n\n          // read child views\n          childViews.forEach(function(child) {\n            return child._read();\n          });\n\n          var shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n          if (shouldUpdate) {\n            updateRect(rect, element, style);\n          }\n\n          // readers\n          var api = { root: internalAPI, props: props, rect: rect };\n          readers.forEach(function(reader) {\n            return reader(api);\n          });\n        };\n\n        /**\n         * Write data to DOM\n         * @private\n         */\n        var _write = function _write(ts, frameActions, shouldOptimize) {\n          // if no actions, we assume that the view is resting\n          var resting = frameActions.length === 0;\n\n          // writers\n          writers.forEach(function(writer) {\n            var writerResting = writer({\n              props: props,\n              root: internalAPI,\n              actions: frameActions,\n              timestamp: ts,\n              shouldOptimize: shouldOptimize\n            });\n\n            if (writerResting === false) {\n              resting = false;\n            }\n          });\n\n          // run mixins\n          activeMixins.forEach(function(mixin) {\n            // if one of the mixins is still busy after write operation, we are not resting\n            var mixinResting = mixin.write(ts);\n            if (mixinResting === false) {\n              resting = false;\n            }\n          });\n\n          // updates child views that are currently attached to the DOM\n          childViews\n            .filter(function(child) {\n              return !!child.element.parentNode;\n            })\n            .forEach(function(child) {\n              // if a child view is not resting, we are not resting\n              var childResting = child._write(\n                ts,\n                filterFrameActionsForChild(child, frameActions),\n                shouldOptimize\n              );\n\n              if (!childResting) {\n                resting = false;\n              }\n            });\n\n          // append new elements to DOM and update those\n          childViews\n            //.filter(child => !child.element.parentNode)\n            .forEach(function(child, index) {\n              // skip\n              if (child.element.parentNode) {\n                return;\n              }\n\n              // append to DOM\n              internalAPI.appendChild(child.element, index);\n\n              // call read (need to know the size of these elements)\n              child._read();\n\n              // re-call write\n              child._write(\n                ts,\n                filterFrameActionsForChild(child, frameActions),\n                shouldOptimize\n              );\n\n              // we just added somthing to the dom, no rest\n              resting = false;\n            });\n\n          // update resting state\n          isResting = resting;\n\n          didWriteView({\n            props: props,\n            root: internalAPI,\n            actions: frameActions,\n            timestamp: ts\n          });\n\n          // let parent know if we are resting\n          return resting;\n        };\n\n        var _destroy = function _destroy() {\n          activeMixins.forEach(function(mixin) {\n            return mixin.destroy();\n          });\n          destroyers.forEach(function(destroyer) {\n            destroyer({ root: internalAPI, props: props });\n          });\n          childViews.forEach(function(child) {\n            return child._destroy();\n          });\n        };\n\n        // sharedAPI\n        var sharedAPIDefinition = {\n          element: {\n            get: getElement\n          },\n\n          style: {\n            get: getStyle\n          },\n\n          childViews: {\n            get: getChildViews\n          }\n        };\n\n        // private API definition\n        var internalAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n          rect: {\n            get: getRect\n          },\n\n          // access to custom children references\n          ref: {\n            get: getReference\n          },\n\n          // dom modifiers\n          is: function is(needle) {\n            return name === needle;\n          },\n          appendChild: appendChild(element),\n          createChildView: createChildView(store),\n          linkView: function linkView(view) {\n            childViews.push(view);\n            return view;\n          },\n          unlinkView: function unlinkView(view) {\n            childViews.splice(childViews.indexOf(view), 1);\n          },\n          appendChildView: appendChildView(element, childViews),\n          removeChildView: removeChildView(element, childViews),\n          registerWriter: function registerWriter(writer) {\n            return writers.push(writer);\n          },\n          registerReader: function registerReader(reader) {\n            return readers.push(reader);\n          },\n          registerDestroyer: function registerDestroyer(destroyer) {\n            return destroyers.push(destroyer);\n          },\n          invalidateLayout: function invalidateLayout() {\n            return (element.layoutCalculated = false);\n          },\n\n          // access to data store\n          dispatch: store.dispatch,\n          query: store.query\n        });\n\n        // public view API methods\n        var externalAPIDefinition = {\n          element: {\n            get: getElement\n          },\n\n          childViews: {\n            get: getChildViews\n          },\n\n          rect: {\n            get: getRect\n          },\n\n          resting: {\n            get: function get() {\n              return isResting;\n            }\n          },\n\n          isRectIgnored: function isRectIgnored() {\n            return ignoreRect;\n          },\n          _read: _read,\n          _write: _write,\n          _destroy: _destroy\n        };\n\n        // mixin API methods\n        var mixinAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n          rect: {\n            get: function get() {\n              return rect;\n            }\n          }\n        });\n\n        // add mixin functionality\n        Object.keys(mixins)\n          .sort(function(a, b) {\n            // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n            if (a === 'styles') {\n              return 1;\n            } else if (b === 'styles') {\n              return -1;\n            }\n            return 0;\n          })\n          .forEach(function(key) {\n            var mixinAPI = Mixins[key]({\n              mixinConfig: mixins[key],\n              viewProps: props,\n              viewState: state,\n              viewInternalAPI: internalAPIDefinition,\n              viewExternalAPI: externalAPIDefinition,\n              view: createObject(mixinAPIDefinition)\n            });\n\n            if (mixinAPI) {\n              activeMixins.push(mixinAPI);\n            }\n          });\n\n        // construct private api\n        var internalAPI = createObject(internalAPIDefinition);\n\n        // create the view\n        create({\n          root: internalAPI,\n          props: props\n        });\n\n        // append created child views to root node\n        var childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n        childViews.forEach(function(child, index) {\n          internalAPI.appendChild(child.element, childCount + index);\n        });\n\n        // call did create\n        didCreateView(internalAPI);\n\n        // expose public api\n        return createObject(externalAPIDefinition);\n      };\n    };\n\n  var createPainter = function createPainter(read, write) {\n    var fps =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n\n    var name = '__framePainter';\n\n    // set global painter\n    if (window[name]) {\n      window[name].readers.push(read);\n      window[name].writers.push(write);\n      return;\n    }\n\n    window[name] = {\n      readers: [read],\n      writers: [write]\n    };\n\n    var painter = window[name];\n\n    var interval = 1000 / fps;\n    var last = null;\n    var id = null;\n    var requestTick = null;\n    var cancelTick = null;\n\n    var setTimerType = function setTimerType() {\n      if (document.hidden) {\n        requestTick = function requestTick() {\n          return window.setTimeout(function() {\n            return tick(performance.now());\n          }, interval);\n        };\n        cancelTick = function cancelTick() {\n          return window.clearTimeout(id);\n        };\n      } else {\n        requestTick = function requestTick() {\n          return window.requestAnimationFrame(tick);\n        };\n        cancelTick = function cancelTick() {\n          return window.cancelAnimationFrame(id);\n        };\n      }\n    };\n\n    document.addEventListener('visibilitychange', function() {\n      if (cancelTick) cancelTick();\n      setTimerType();\n      tick(performance.now());\n    });\n\n    var tick = function tick(ts) {\n      // queue next tick\n      id = requestTick(tick);\n\n      // limit fps\n      if (!last) {\n        last = ts;\n      }\n\n      var delta = ts - last;\n\n      if (delta <= interval) {\n        // skip frame\n        return;\n      }\n\n      // align next frame\n      last = ts - (delta % interval);\n\n      // update view\n      painter.readers.forEach(function(read) {\n        return read();\n      });\n      painter.writers.forEach(function(write) {\n        return write(ts);\n      });\n    };\n\n    setTimerType();\n    tick(performance.now());\n\n    return {\n      pause: function pause() {\n        cancelTick(id);\n      }\n    };\n  };\n\n  var createRoute = function createRoute(routes, fn) {\n    return function(_ref) {\n      var root = _ref.root,\n        props = _ref.props,\n        _ref$actions = _ref.actions,\n        actions = _ref$actions === void 0 ? [] : _ref$actions,\n        timestamp = _ref.timestamp,\n        shouldOptimize = _ref.shouldOptimize;\n      actions\n        .filter(function(action) {\n          return routes[action.type];\n        })\n        .forEach(function(action) {\n          return routes[action.type]({\n            root: root,\n            props: props,\n            action: action.data,\n            timestamp: timestamp,\n            shouldOptimize: shouldOptimize\n          });\n        });\n\n      if (fn) {\n        fn({\n          root: root,\n          props: props,\n          actions: actions,\n          timestamp: timestamp,\n          shouldOptimize: shouldOptimize\n        });\n      }\n    };\n  };\n\n  var insertBefore = function insertBefore(newNode, referenceNode) {\n    return referenceNode.parentNode.insertBefore(newNode, referenceNode);\n  };\n\n  var insertAfter = function insertAfter(newNode, referenceNode) {\n    return referenceNode.parentNode.insertBefore(\n      newNode,\n      referenceNode.nextSibling\n    );\n  };\n\n  var isArray = function isArray(value) {\n    return Array.isArray(value);\n  };\n\n  var isEmpty = function isEmpty(value) {\n    return value == null;\n  };\n\n  var trim = function trim(str) {\n    return str.trim();\n  };\n\n  var toString = function toString(value) {\n    return '' + value;\n  };\n\n  var toArray = function toArray(value) {\n    var splitter =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n    if (isEmpty(value)) {\n      return [];\n    }\n    if (isArray(value)) {\n      return value;\n    }\n    return toString(value)\n      .split(splitter)\n      .map(trim)\n      .filter(function(str) {\n        return str.length;\n      });\n  };\n\n  var isBoolean = function isBoolean(value) {\n    return typeof value === 'boolean';\n  };\n\n  var toBoolean = function toBoolean(value) {\n    return isBoolean(value) ? value : value === 'true';\n  };\n\n  var isString = function isString(value) {\n    return typeof value === 'string';\n  };\n\n  var toNumber = function toNumber(value) {\n    return isNumber(value)\n      ? value\n      : isString(value)\n      ? toString(value).replace(/[a-z]+/gi, '')\n      : 0;\n  };\n\n  var toInt = function toInt(value) {\n    return parseInt(toNumber(value), 10);\n  };\n\n  var toFloat = function toFloat(value) {\n    return parseFloat(toNumber(value));\n  };\n\n  var isInt = function isInt(value) {\n    return isNumber(value) && isFinite(value) && Math.floor(value) === value;\n  };\n\n  var toBytes = function toBytes(value) {\n    var base =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n    // is in bytes\n    if (isInt(value)) {\n      return value;\n    }\n\n    // is natural file size\n    var naturalFileSize = toString(value).trim();\n\n    // if is value in megabytes\n    if (/MB$/i.test(naturalFileSize)) {\n      naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n      return toInt(naturalFileSize) * base * base;\n    }\n\n    // if is value in kilobytes\n    if (/KB/i.test(naturalFileSize)) {\n      naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n      return toInt(naturalFileSize) * base;\n    }\n\n    return toInt(naturalFileSize);\n  };\n\n  var isFunction = function isFunction(value) {\n    return typeof value === 'function';\n  };\n\n  var toFunctionReference = function toFunctionReference(string) {\n    var ref = self;\n    var levels = string.split('.');\n    var level = null;\n    while ((level = levels.shift())) {\n      ref = ref[level];\n      if (!ref) {\n        return null;\n      }\n    }\n    return ref;\n  };\n\n  var methods = {\n    process: 'POST',\n    patch: 'PATCH',\n    revert: 'DELETE',\n    fetch: 'GET',\n    restore: 'GET',\n    load: 'GET'\n  };\n\n  var createServerAPI = function createServerAPI(outline) {\n    var api = {};\n\n    api.url = isString(outline) ? outline : outline.url || '';\n    api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n    api.headers = outline.headers ? outline.headers : {};\n\n    forin(methods, function(key) {\n      api[key] = createAction(\n        key,\n        outline[key],\n        methods[key],\n        api.timeout,\n        api.headers\n      );\n    });\n\n    // special treatment for remove\n    api.remove = outline.remove || null;\n\n    // remove generic headers from api object\n    delete api.headers;\n\n    return api;\n  };\n\n  var createAction = function createAction(\n    name,\n    outline,\n    method,\n    timeout,\n    headers\n  ) {\n    // is explicitely set to null so disable\n    if (outline === null) {\n      return null;\n    }\n\n    // if is custom function, done! Dev handles everything.\n    if (typeof outline === 'function') {\n      return outline;\n    }\n\n    // build action object\n    var action = {\n      url: method === 'GET' || method === 'PATCH' ? '?' + name + '=' : '',\n      method: method,\n      headers: headers,\n      withCredentials: false,\n      timeout: timeout,\n      onload: null,\n      ondata: null,\n      onerror: null\n    };\n\n    // is a single url\n    if (isString(outline)) {\n      action.url = outline;\n      return action;\n    }\n\n    // overwrite\n    Object.assign(action, outline);\n\n    // see if should reformat headers;\n    if (isString(action.headers)) {\n      var parts = action.headers.split(/:(.+)/);\n      action.headers = {\n        header: parts[0],\n        value: parts[1]\n      };\n    }\n\n    // if is bool withCredentials\n    action.withCredentials = toBoolean(action.withCredentials);\n\n    return action;\n  };\n\n  var toServerAPI = function toServerAPI(value) {\n    return createServerAPI(value);\n  };\n\n  var isNull = function isNull(value) {\n    return value === null;\n  };\n\n  var isObject = function isObject(value) {\n    return typeof value === 'object' && value !== null;\n  };\n\n  var isAPI = function isAPI(value) {\n    return (\n      isObject(value) &&\n      isString(value.url) &&\n      isObject(value.process) &&\n      isObject(value.revert) &&\n      isObject(value.restore) &&\n      isObject(value.fetch)\n    );\n  };\n\n  var getType = function getType(value) {\n    if (isArray(value)) {\n      return 'array';\n    }\n\n    if (isNull(value)) {\n      return 'null';\n    }\n\n    if (isInt(value)) {\n      return 'int';\n    }\n\n    if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n      return 'bytes';\n    }\n\n    if (isAPI(value)) {\n      return 'api';\n    }\n\n    return typeof value;\n  };\n\n  var replaceSingleQuotes = function replaceSingleQuotes(str) {\n    return str\n      .replace(/{\\s*'/g, '{\"')\n      .replace(/'\\s*}/g, '\"}')\n      .replace(/'\\s*:/g, '\":')\n      .replace(/:\\s*'/g, ':\"')\n      .replace(/,\\s*'/g, ',\"')\n      .replace(/'\\s*,/g, '\",');\n  };\n\n  var conversionTable = {\n    array: toArray,\n    boolean: toBoolean,\n    int: function int(value) {\n      return getType(value) === 'bytes' ? toBytes(value) : toInt(value);\n    },\n    number: toFloat,\n    float: toFloat,\n    bytes: toBytes,\n    string: function string(value) {\n      return isFunction(value) ? value : toString(value);\n    },\n    function: function _function(value) {\n      return toFunctionReference(value);\n    },\n    serverapi: toServerAPI,\n    object: function object(value) {\n      try {\n        return JSON.parse(replaceSingleQuotes(value));\n      } catch (e) {\n        return null;\n      }\n    }\n  };\n\n  var convertTo = function convertTo(value, type) {\n    return conversionTable[type](value);\n  };\n\n  var getValueByType = function getValueByType(\n    newValue,\n    defaultValue,\n    valueType\n  ) {\n    // can always assign default value\n    if (newValue === defaultValue) {\n      return newValue;\n    }\n\n    // get the type of the new value\n    var newValueType = getType(newValue);\n\n    // is valid type?\n    if (newValueType !== valueType) {\n      // is string input, let's attempt to convert\n      var convertedValue = convertTo(newValue, valueType);\n\n      // what is the type now\n      newValueType = getType(convertedValue);\n\n      // no valid conversions found\n      if (convertedValue === null) {\n        throw 'Trying to assign value with incorrect type to \"' +\n          option +\n          '\", allowed type: \"' +\n          valueType +\n          '\"';\n      } else {\n        newValue = convertedValue;\n      }\n    }\n\n    // assign new value\n    return newValue;\n  };\n\n  var createOption = function createOption(defaultValue, valueType) {\n    var currentValue = defaultValue;\n    return {\n      enumerable: true,\n      get: function get() {\n        return currentValue;\n      },\n      set: function set(newValue) {\n        currentValue = getValueByType(newValue, defaultValue, valueType);\n      }\n    };\n  };\n\n  var createOptions = function createOptions(options) {\n    var obj = {};\n    forin(options, function(prop) {\n      var optionDefinition = options[prop];\n      obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n    });\n    return createObject(obj);\n  };\n\n  var createInitialState = function createInitialState(options) {\n    return {\n      // model\n      items: [],\n\n      // timeout used for calling update items\n      listUpdateTimeout: null,\n\n      // timeout used for stacking metadata updates\n      itemUpdateTimeout: null,\n\n      // queue of items waiting to be processed\n      processingQueue: [],\n\n      // options\n      options: createOptions(options)\n    };\n  };\n\n  var fromCamels = function fromCamels(string) {\n    var separator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n    return string\n      .split(/(?=[A-Z])/)\n      .map(function(part) {\n        return part.toLowerCase();\n      })\n      .join(separator);\n  };\n\n  var createOptionAPI = function createOptionAPI(store, options) {\n    var obj = {};\n    forin(options, function(key) {\n      obj[key] = {\n        get: function get() {\n          return store.getState().options[key];\n        },\n        set: function set(value) {\n          store.dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n            value: value\n          });\n        }\n      };\n    });\n    return obj;\n  };\n\n  var createOptionActions = function createOptionActions(options) {\n    return function(dispatch, query, state) {\n      var obj = {};\n      forin(options, function(key) {\n        var name = fromCamels(key, '_').toUpperCase();\n\n        obj['SET_' + name] = function(action) {\n          try {\n            state.options[key] = action.value;\n          } catch (e) {} // nope, failed\n\n          // we successfully set the value of this option\n          dispatch('DID_SET_' + name, { value: state.options[key] });\n        };\n      });\n      return obj;\n    };\n  };\n\n  var createOptionQueries = function createOptionQueries(options) {\n    return function(state) {\n      var obj = {};\n      forin(options, function(key) {\n        obj['GET_' + fromCamels(key, '_').toUpperCase()] = function(action) {\n          return state.options[key];\n        };\n      });\n      return obj;\n    };\n  };\n\n  var InteractionMethod = {\n    API: 1,\n    DROP: 2,\n    BROWSE: 3,\n    PASTE: 4,\n    NONE: 5\n  };\n\n  var getUniqueId = function getUniqueId() {\n    return Math.random()\n      .toString(36)\n      .substr(2, 9);\n  };\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function(obj) {\n        return obj &&\n          typeof Symbol === 'function' &&\n          obj.constructor === Symbol &&\n          obj !== Symbol.prototype\n          ? 'symbol'\n          : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var REACT_ELEMENT_TYPE;\n\n  function _jsx(type, props, key, children) {\n    if (!REACT_ELEMENT_TYPE) {\n      REACT_ELEMENT_TYPE =\n        (typeof Symbol === 'function' &&\n          Symbol['for'] &&\n          Symbol['for']('react.element')) ||\n        0xeac7;\n    }\n\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {\n        children: void 0\n      };\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = new Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  }\n\n  function _asyncIterator(iterable) {\n    var method;\n\n    if (typeof Symbol !== 'undefined') {\n      if (Symbol.asyncIterator) {\n        method = iterable[Symbol.asyncIterator];\n        if (method != null) return method.call(iterable);\n      }\n\n      if (Symbol.iterator) {\n        method = iterable[Symbol.iterator];\n        if (method != null) return method.call(iterable);\n      }\n    }\n\n    throw new TypeError('Object is not async iterable');\n  }\n\n  function _AwaitValue(value) {\n    this.wrapped = value;\n  }\n\n  function _AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function(resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n        var wrappedAwait = value instanceof _AwaitValue;\n        Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n          function(arg) {\n            if (wrappedAwait) {\n              resume('next', arg);\n              return;\n            }\n\n            settle(result.done ? 'return' : 'normal', arg);\n          },\n          function(err) {\n            resume('throw', err);\n          }\n        );\n      } catch (err) {\n        settle('throw', err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case 'return':\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case 'throw':\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== 'function') {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n    _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n      return this;\n    };\n  }\n\n  _AsyncGenerator.prototype.next = function(arg) {\n    return this._invoke('next', arg);\n  };\n\n  _AsyncGenerator.prototype.throw = function(arg) {\n    return this._invoke('throw', arg);\n  };\n\n  _AsyncGenerator.prototype.return = function(arg) {\n    return this._invoke('return', arg);\n  };\n\n  function _wrapAsyncGenerator(fn) {\n    return function() {\n      return new _AsyncGenerator(fn.apply(this, arguments));\n    };\n  }\n\n  function _awaitAsyncGenerator(value) {\n    return new _AwaitValue(value);\n  }\n\n  function _asyncGeneratorDelegate(inner, awaitWrap) {\n    var iter = {},\n      waiting = false;\n\n    function pump(key, value) {\n      waiting = true;\n      value = new Promise(function(resolve) {\n        resolve(inner[key](value));\n      });\n      return {\n        done: false,\n        value: awaitWrap(value)\n      };\n    }\n\n    if (typeof Symbol === 'function' && Symbol.iterator) {\n      iter[Symbol.iterator] = function() {\n        return this;\n      };\n    }\n\n    iter.next = function(value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump('next', value);\n    };\n\n    if (typeof inner.throw === 'function') {\n      iter.throw = function(value) {\n        if (waiting) {\n          waiting = false;\n          throw value;\n        }\n\n        return pump('throw', value);\n      };\n    }\n\n    if (typeof inner.return === 'function') {\n      iter.return = function(value) {\n        return pump('return', value);\n      };\n    }\n\n    return iter;\n  }\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self = this,\n        args = arguments;\n      return new Promise(function(resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(\n            gen,\n            resolve,\n            reject,\n            _next,\n            _throw,\n            'next',\n            value\n          );\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineEnumerableProperties(obj, descs) {\n    for (var key in descs) {\n      var desc = descs[key];\n      desc.configurable = desc.enumerable = true;\n      if ('value' in desc) desc.writable = true;\n      Object.defineProperty(obj, key, desc);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n      for (var i = 0; i < objectSymbols.length; i++) {\n        var sym = objectSymbols[i];\n        var desc = descs[sym];\n        desc.configurable = desc.enumerable = true;\n        if ('value' in desc) desc.writable = true;\n        Object.defineProperty(obj, sym, desc);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defaults(obj, defaults) {\n    var keys = Object.getOwnPropertyNames(defaults);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n      if (value && value.configurable && obj[key] === undefined) {\n        Object.defineProperty(obj, key, value);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends =\n      Object.assign ||\n      function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(\n          Object.getOwnPropertySymbols(source).filter(function(sym) {\n            return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n          })\n        );\n      }\n\n      ownKeys.forEach(function(key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly)\n        symbols = symbols.filter(function(sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function(key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(\n          target,\n          Object.getOwnPropertyDescriptors(source)\n        );\n      } else {\n        ownKeys(source).forEach(function(key) {\n          Object.defineProperty(\n            target,\n            key,\n            Object.getOwnPropertyDescriptor(source, key)\n          );\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function _getPrototypeOf(o) {\n          return o.__proto__ || Object.getPrototypeOf(o);\n        };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf =\n      Object.setPrototypeOf ||\n      function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === 'function') return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf('[native code]') !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== 'function') {\n        throw new TypeError(\n          'Super expression must either be null or a function'\n        );\n      }\n\n      if (typeof _cache !== 'undefined') {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _instanceof(left, right) {\n    if (\n      right != null &&\n      typeof Symbol !== 'undefined' &&\n      right[Symbol.hasInstance]\n    ) {\n      return !!right[Symbol.hasInstance](left);\n    } else {\n      return left instanceof right;\n    }\n  }\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj\n        };\n  }\n\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc =\n              Object.defineProperty && Object.getOwnPropertyDescriptor\n                ? Object.getOwnPropertyDescriptor(obj, key)\n                : {};\n\n            if (desc.get || desc.set) {\n              Object.defineProperty(newObj, key, desc);\n            } else {\n              newObj[key] = obj[key];\n            }\n          }\n        }\n      }\n\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  function _newArrowCheck(innerThis, boundThis) {\n    if (innerThis !== boundThis) {\n      throw new TypeError('Cannot instantiate an arrow function');\n    }\n  }\n\n  function _objectDestructuringEmpty(obj) {\n    if (obj == null) throw new TypeError('Cannot destructure undefined');\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\n        \"this hasn't been initialised - super() hasn't been called\"\n      );\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set = Reflect.set;\n    } else {\n      set = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(\n      Object.defineProperties(strings, {\n        raw: {\n          value: Object.freeze(raw)\n        }\n      })\n    );\n  }\n\n  function _taggedTemplateLiteralLoose(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    strings.raw = raw;\n    return strings;\n  }\n\n  function _temporalRef(val, name) {\n    if (val === _temporalUndefined) {\n      throw new ReferenceError(name + ' is not defined - temporal dead zone');\n    } else {\n      return val;\n    }\n  }\n\n  function _readOnlyError(name) {\n    throw new Error('\"' + name + '\" is read-only');\n  }\n\n  function _classNameTDZError(name) {\n    throw new Error(\n      'Class \"' + name + '\" cannot be referenced in computed property keys.'\n    );\n  }\n\n  var _temporalUndefined = {};\n\n  function _slicedToArray(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimit(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _slicedToArrayLoose(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimitLoose(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _toArray(arr) {\n    return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return (\n      _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\n    );\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n        arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (\n      Symbol.iterator in Object(iter) ||\n      Object.prototype.toString.call(iter) === '[object Arguments]'\n    )\n      return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (\n        var _i = arr[Symbol.iterator](), _s;\n        !(_n = (_s = _i.next()).done);\n        _n = true\n      ) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _iterableToArrayLimitLoose(arr, i) {\n    var _arr = [];\n\n    for (\n      var _iterator = arr[Symbol.iterator](), _step;\n      !(_step = _iterator.next()).done;\n\n    ) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError('Invalid attempt to spread non-iterable instance');\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  function _skipFirstGeneratorNext(fn) {\n    return function() {\n      var it = fn.apply(this, arguments);\n      it.next();\n      return it;\n    };\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== 'object' || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || 'default');\n      if (typeof res !== 'object') return res;\n      throw new TypeError('@@toPrimitive must return a primitive value.');\n    }\n\n    return (hint === 'string' ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, 'string');\n\n    return typeof key === 'symbol' ? key : String(key);\n  }\n\n  function _initializerWarningHelper(descriptor, context) {\n    throw new Error(\n      'Decorating class property failed. Please ensure that ' +\n        'proposal-class-properties is enabled and set to use loose mode. ' +\n        'To use proposal-class-properties in spec mode with decorators, wait for ' +\n        'the next major version of decorators in stage 2.'\n    );\n  }\n\n  function _initializerDefineProperty(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n      enumerable: descriptor.enumerable,\n      configurable: descriptor.configurable,\n      writable: descriptor.writable,\n      value: descriptor.initializer\n        ? descriptor.initializer.call(context)\n        : void 0\n    });\n  }\n\n  function _applyDecoratedDescriptor(\n    target,\n    property,\n    decorators,\n    descriptor,\n    context\n  ) {\n    var desc = {};\n    Object.keys(descriptor).forEach(function(key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators\n      .slice()\n      .reverse()\n      .reduce(function(desc, decorator) {\n        return decorator(target, property, desc) || desc;\n      }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object.defineProperty(target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var id = 0;\n\n  function _classPrivateFieldLooseKey(name) {\n    return '__private_' + id++ + '_' + name;\n  }\n\n  function _classPrivateFieldLooseBase(receiver, privateKey) {\n    if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n      throw new TypeError('attempted to use private field on non-instance');\n    }\n\n    return receiver;\n  }\n\n  function _classPrivateFieldGet(receiver, privateMap) {\n    var descriptor = privateMap.get(receiver);\n\n    if (!descriptor) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    if (descriptor.get) {\n      return descriptor.get.call(receiver);\n    }\n\n    return descriptor.value;\n  }\n\n  function _classPrivateFieldSet(receiver, privateMap, value) {\n    var descriptor = privateMap.get(receiver);\n\n    if (!descriptor) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    if (descriptor.set) {\n      descriptor.set.call(receiver, value);\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      descriptor.value = value;\n    }\n\n    return value;\n  }\n\n  function _classPrivateFieldDestructureSet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.set) {\n      if (!('__destrObj' in descriptor)) {\n        descriptor.__destrObj = {\n          set value(v) {\n            descriptor.set.call(receiver, v);\n          }\n        };\n      }\n\n      return descriptor.__destrObj;\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      return descriptor;\n    }\n  }\n\n  function _classStaticPrivateFieldSpecGet(\n    receiver,\n    classConstructor,\n    descriptor\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return descriptor.value;\n  }\n\n  function _classStaticPrivateFieldSpecSet(\n    receiver,\n    classConstructor,\n    descriptor,\n    value\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    if (!descriptor.writable) {\n      throw new TypeError('attempted to set read only private field');\n    }\n\n    descriptor.value = value;\n    return value;\n  }\n\n  function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return method;\n  }\n\n  function _classStaticPrivateMethodSet() {\n    throw new TypeError('attempted to set read only static private field');\n  }\n\n  function _decorate(decorators, factory, superClass, mixins) {\n    var api = _getDecoratorsApi();\n\n    if (mixins) {\n      for (var i = 0; i < mixins.length; i++) {\n        api = mixins[i](api);\n      }\n    }\n\n    var r = factory(function initialize(O) {\n      api.initializeInstanceElements(O, decorated.elements);\n    }, superClass);\n    var decorated = api.decorateClass(\n      _coalesceClassElements(r.d.map(_createElementDescriptor)),\n      decorators\n    );\n    api.initializeClassElements(r.F, decorated.elements);\n    return api.runClassFinishers(r.F, decorated.finishers);\n  }\n\n  function _getDecoratorsApi() {\n    _getDecoratorsApi = function() {\n      return api;\n    };\n\n    var api = {\n      elementsDefinitionOrder: [['method'], ['field']],\n      initializeInstanceElements: function(O, elements) {\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            if (element.kind === kind && element.placement === 'own') {\n              this.defineClassElement(O, element);\n            }\n          }, this);\n        }, this);\n      },\n      initializeClassElements: function(F, elements) {\n        var proto = F.prototype;\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            var placement = element.placement;\n\n            if (\n              element.kind === kind &&\n              (placement === 'static' || placement === 'prototype')\n            ) {\n              var receiver = placement === 'static' ? F : proto;\n              this.defineClassElement(receiver, element);\n            }\n          }, this);\n        }, this);\n      },\n      defineClassElement: function(receiver, element) {\n        var descriptor = element.descriptor;\n\n        if (element.kind === 'field') {\n          var initializer = element.initializer;\n          descriptor = {\n            enumerable: descriptor.enumerable,\n            writable: descriptor.writable,\n            configurable: descriptor.configurable,\n            value: initializer === void 0 ? void 0 : initializer.call(receiver)\n          };\n        }\n\n        Object.defineProperty(receiver, element.key, descriptor);\n      },\n      decorateClass: function(elements, decorators) {\n        var newElements = [];\n        var finishers = [];\n        var placements = {\n          static: [],\n          prototype: [],\n          own: []\n        };\n        elements.forEach(function(element) {\n          this.addElementPlacement(element, placements);\n        }, this);\n        elements.forEach(function(element) {\n          if (!_hasDecorators(element)) return newElements.push(element);\n          var elementFinishersExtras = this.decorateElement(\n            element,\n            placements\n          );\n          newElements.push(elementFinishersExtras.element);\n          newElements.push.apply(newElements, elementFinishersExtras.extras);\n          finishers.push.apply(finishers, elementFinishersExtras.finishers);\n        }, this);\n\n        if (!decorators) {\n          return {\n            elements: newElements,\n            finishers: finishers\n          };\n        }\n\n        var result = this.decorateConstructor(newElements, decorators);\n        finishers.push.apply(finishers, result.finishers);\n        result.finishers = finishers;\n        return result;\n      },\n      addElementPlacement: function(element, placements, silent) {\n        var keys = placements[element.placement];\n\n        if (!silent && keys.indexOf(element.key) !== -1) {\n          throw new TypeError('Duplicated element (' + element.key + ')');\n        }\n\n        keys.push(element.key);\n      },\n      decorateElement: function(element, placements) {\n        var extras = [];\n        var finishers = [];\n\n        for (\n          var decorators = element.decorators, i = decorators.length - 1;\n          i >= 0;\n          i--\n        ) {\n          var keys = placements[element.placement];\n          keys.splice(keys.indexOf(element.key), 1);\n          var elementObject = this.fromElementDescriptor(element);\n          var elementFinisherExtras = this.toElementFinisherExtras(\n            (0, decorators[i])(elementObject) || elementObject\n          );\n          element = elementFinisherExtras.element;\n          this.addElementPlacement(element, placements);\n\n          if (elementFinisherExtras.finisher) {\n            finishers.push(elementFinisherExtras.finisher);\n          }\n\n          var newExtras = elementFinisherExtras.extras;\n\n          if (newExtras) {\n            for (var j = 0; j < newExtras.length; j++) {\n              this.addElementPlacement(newExtras[j], placements);\n            }\n\n            extras.push.apply(extras, newExtras);\n          }\n        }\n\n        return {\n          element: element,\n          finishers: finishers,\n          extras: extras\n        };\n      },\n      decorateConstructor: function(elements, decorators) {\n        var finishers = [];\n\n        for (var i = decorators.length - 1; i >= 0; i--) {\n          var obj = this.fromClassDescriptor(elements);\n          var elementsAndFinisher = this.toClassDescriptor(\n            (0, decorators[i])(obj) || obj\n          );\n\n          if (elementsAndFinisher.finisher !== undefined) {\n            finishers.push(elementsAndFinisher.finisher);\n          }\n\n          if (elementsAndFinisher.elements !== undefined) {\n            elements = elementsAndFinisher.elements;\n\n            for (var j = 0; j < elements.length - 1; j++) {\n              for (var k = j + 1; k < elements.length; k++) {\n                if (\n                  elements[j].key === elements[k].key &&\n                  elements[j].placement === elements[k].placement\n                ) {\n                  throw new TypeError(\n                    'Duplicated element (' + elements[j].key + ')'\n                  );\n                }\n              }\n            }\n          }\n        }\n\n        return {\n          elements: elements,\n          finishers: finishers\n        };\n      },\n      fromElementDescriptor: function(element) {\n        var obj = {\n          kind: element.kind,\n          key: element.key,\n          placement: element.placement,\n          descriptor: element.descriptor\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        if (element.kind === 'field') obj.initializer = element.initializer;\n        return obj;\n      },\n      toElementDescriptors: function(elementObjects) {\n        if (elementObjects === undefined) return;\n        return _toArray(elementObjects).map(function(elementObject) {\n          var element = this.toElementDescriptor(elementObject);\n          this.disallowProperty(\n            elementObject,\n            'finisher',\n            'An element descriptor'\n          );\n          this.disallowProperty(\n            elementObject,\n            'extras',\n            'An element descriptor'\n          );\n          return element;\n        }, this);\n      },\n      toElementDescriptor: function(elementObject) {\n        var kind = String(elementObject.kind);\n\n        if (kind !== 'method' && kind !== 'field') {\n          throw new TypeError(\n            'An element descriptor\\'s .kind property must be either \"method\" or' +\n              ' \"field\", but a decorator created an element descriptor with' +\n              ' .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        var key = _toPropertyKey(elementObject.key);\n\n        var placement = String(elementObject.placement);\n\n        if (\n          placement !== 'static' &&\n          placement !== 'prototype' &&\n          placement !== 'own'\n        ) {\n          throw new TypeError(\n            'An element descriptor\\'s .placement property must be one of \"static\",' +\n              ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n              ' with .placement \"' +\n              placement +\n              '\"'\n          );\n        }\n\n        var descriptor = elementObject.descriptor;\n        this.disallowProperty(\n          elementObject,\n          'elements',\n          'An element descriptor'\n        );\n        var element = {\n          kind: kind,\n          key: key,\n          placement: placement,\n          descriptor: Object.assign({}, descriptor)\n        };\n\n        if (kind !== 'field') {\n          this.disallowProperty(\n            elementObject,\n            'initializer',\n            'A method descriptor'\n          );\n        } else {\n          this.disallowProperty(\n            descriptor,\n            'get',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'set',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'value',\n            'The property descriptor of a field descriptor'\n          );\n          element.initializer = elementObject.initializer;\n        }\n\n        return element;\n      },\n      toElementFinisherExtras: function(elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n\n        var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n        var extras = this.toElementDescriptors(elementObject.extras);\n        return {\n          element: element,\n          finisher: finisher,\n          extras: extras\n        };\n      },\n      fromClassDescriptor: function(elements) {\n        var obj = {\n          kind: 'class',\n          elements: elements.map(this.fromElementDescriptor, this)\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        return obj;\n      },\n      toClassDescriptor: function(obj) {\n        var kind = String(obj.kind);\n\n        if (kind !== 'class') {\n          throw new TypeError(\n            'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n              ' created a class descriptor with .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        this.disallowProperty(obj, 'key', 'A class descriptor');\n        this.disallowProperty(obj, 'placement', 'A class descriptor');\n        this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n        this.disallowProperty(obj, 'initializer', 'A class descriptor');\n        this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n        var finisher = _optionalCallableProperty(obj, 'finisher');\n\n        var elements = this.toElementDescriptors(obj.elements);\n        return {\n          elements: elements,\n          finisher: finisher\n        };\n      },\n      runClassFinishers: function(constructor, finishers) {\n        for (var i = 0; i < finishers.length; i++) {\n          var newConstructor = (0, finishers[i])(constructor);\n\n          if (newConstructor !== undefined) {\n            if (typeof newConstructor !== 'function') {\n              throw new TypeError('Finishers must return a constructor.');\n            }\n\n            constructor = newConstructor;\n          }\n        }\n\n        return constructor;\n      },\n      disallowProperty: function(obj, name, objectType) {\n        if (obj[name] !== undefined) {\n          throw new TypeError(\n            objectType + \" can't have a .\" + name + ' property.'\n          );\n        }\n      }\n    };\n    return api;\n  }\n\n  function _createElementDescriptor(def) {\n    var key = _toPropertyKey(def.key);\n\n    var descriptor;\n\n    if (def.kind === 'method') {\n      descriptor = {\n        value: def.value,\n        writable: true,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'get') {\n      descriptor = {\n        get: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'set') {\n      descriptor = {\n        set: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'field') {\n      descriptor = {\n        configurable: true,\n        writable: true,\n        enumerable: true\n      };\n    }\n\n    var element = {\n      kind: def.kind === 'field' ? 'field' : 'method',\n      key: key,\n      placement: def.static\n        ? 'static'\n        : def.kind === 'field'\n        ? 'own'\n        : 'prototype',\n      descriptor: descriptor\n    };\n    if (def.decorators) element.decorators = def.decorators;\n    if (def.kind === 'field') element.initializer = def.value;\n    return element;\n  }\n\n  function _coalesceGetterSetter(element, other) {\n    if (element.descriptor.get !== undefined) {\n      other.descriptor.get = element.descriptor.get;\n    } else {\n      other.descriptor.set = element.descriptor.set;\n    }\n  }\n\n  function _coalesceClassElements(elements) {\n    var newElements = [];\n\n    var isSameElement = function(other) {\n      return (\n        other.kind === 'method' &&\n        other.key === element.key &&\n        other.placement === element.placement\n      );\n    };\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var other;\n\n      if (\n        element.kind === 'method' &&\n        (other = newElements.find(isSameElement))\n      ) {\n        if (\n          _isDataDescriptor(element.descriptor) ||\n          _isDataDescriptor(other.descriptor)\n        ) {\n          if (_hasDecorators(element) || _hasDecorators(other)) {\n            throw new ReferenceError(\n              'Duplicated methods (' + element.key + \") can't be decorated.\"\n            );\n          }\n\n          other.descriptor = element.descriptor;\n        } else {\n          if (_hasDecorators(element)) {\n            if (_hasDecorators(other)) {\n              throw new ReferenceError(\n                \"Decorators can't be placed on different accessors with for \" +\n                  'the same property (' +\n                  element.key +\n                  ').'\n              );\n            }\n\n            other.decorators = element.decorators;\n          }\n\n          _coalesceGetterSetter(element, other);\n        }\n      } else {\n        newElements.push(element);\n      }\n    }\n\n    return newElements;\n  }\n\n  function _hasDecorators(element) {\n    return element.decorators && element.decorators.length;\n  }\n\n  function _isDataDescriptor(desc) {\n    return (\n      desc !== undefined &&\n      !(desc.value === undefined && desc.writable === undefined)\n    );\n  }\n\n  function _optionalCallableProperty(obj, name) {\n    var value = obj[name];\n\n    if (value !== undefined && typeof value !== 'function') {\n      throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n    }\n\n    return value;\n  }\n\n  function _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    return fn;\n  }\n\n  function _classPrivateMethodSet() {\n    throw new TypeError('attempted to reassign private method');\n  }\n\n  function _wrapRegExp(re, groups) {\n    _wrapRegExp = function(re, groups) {\n      return new BabelRegExp(re, groups);\n    };\n\n    var _RegExp = _wrapNativeSuper(RegExp);\n\n    var _super = RegExp.prototype;\n\n    var _groups = new WeakMap();\n\n    function BabelRegExp(re, groups) {\n      var _this = _RegExp.call(this, re);\n\n      _groups.set(_this, groups);\n\n      return _this;\n    }\n\n    _inherits(BabelRegExp, _RegExp);\n\n    BabelRegExp.prototype.exec = function(str) {\n      var result = _super.exec.call(this, str);\n\n      if (result) result.groups = buildGroups(result, this);\n      return result;\n    };\n\n    BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n      if (typeof substitution === 'string') {\n        var groups = _groups.get(this);\n\n        return _super[Symbol.replace].call(\n          this,\n          str,\n          substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n            return '$' + groups[name];\n          })\n        );\n      } else if (typeof substitution === 'function') {\n        var _this = this;\n\n        return _super[Symbol.replace].call(this, str, function() {\n          var args = [];\n          args.push.apply(args, arguments);\n\n          if (typeof args[args.length - 1] !== 'object') {\n            args.push(buildGroups(args, _this));\n          }\n\n          return substitution.apply(this, args);\n        });\n      } else {\n        return _super[Symbol.replace].call(this, str, substitution);\n      }\n    };\n\n    function buildGroups(result, re) {\n      var g = _groups.get(re);\n\n      return Object.keys(g).reduce(function(groups, name) {\n        groups[name] = result[g[name]];\n        return groups;\n      }, Object.create(null));\n    }\n\n    return _wrapRegExp.apply(this, arguments);\n  }\n\n  var arrayRemove = function arrayRemove(arr, index) {\n    return arr.splice(index, 1);\n  };\n\n  var run = function run(cb, sync) {\n    if (sync) {\n      cb();\n    } else if (document.hidden) {\n      Promise.resolve(1).then(cb);\n    } else {\n      setTimeout(cb, 0);\n    }\n  };\n\n  var on = function on() {\n    var listeners = [];\n    var off = function off(event, cb) {\n      arrayRemove(\n        listeners,\n        listeners.findIndex(function(listener) {\n          return listener.event === event && (listener.cb === cb || !cb);\n        })\n      );\n    };\n    var _fire = function fire(event, args, sync) {\n      listeners\n        .filter(function(listener) {\n          return listener.event === event;\n        })\n        .map(function(listener) {\n          return listener.cb;\n        })\n        .forEach(function(cb) {\n          return run(function() {\n            return cb.apply(void 0, _toConsumableArray(args));\n          }, sync);\n        });\n    };\n    return {\n      fireSync: function fireSync(event) {\n        for (\n          var _len = arguments.length,\n            args = new Array(_len > 1 ? _len - 1 : 0),\n            _key = 1;\n          _key < _len;\n          _key++\n        ) {\n          args[_key - 1] = arguments[_key];\n        }\n        _fire(event, args, true);\n      },\n      fire: function fire(event) {\n        for (\n          var _len2 = arguments.length,\n            args = new Array(_len2 > 1 ? _len2 - 1 : 0),\n            _key2 = 1;\n          _key2 < _len2;\n          _key2++\n        ) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        _fire(event, args, false);\n      },\n      on: function on(event, cb) {\n        listeners.push({ event: event, cb: cb });\n      },\n      onOnce: function onOnce(event, _cb) {\n        listeners.push({\n          event: event,\n          cb: function cb() {\n            off(event, _cb);\n            _cb.apply(void 0, arguments);\n          }\n        });\n      },\n      off: off\n    };\n  };\n\n  var copyObjectPropertiesToObject = function copyObjectPropertiesToObject(\n    src,\n    target,\n    excluded\n  ) {\n    Object.getOwnPropertyNames(src)\n      .filter(function(property) {\n        return !excluded.includes(property);\n      })\n      .forEach(function(key) {\n        return Object.defineProperty(\n          target,\n          key,\n          Object.getOwnPropertyDescriptor(src, key)\n        );\n      });\n  };\n\n  var PRIVATE = [\n    'fire',\n    'process',\n    'revert',\n    'load',\n    'on',\n    'off',\n    'onOnce',\n    'retryLoad',\n    'extend',\n    'archive',\n    'archived',\n    'release',\n    'released',\n    'requestProcessing',\n    'freeze'\n  ];\n\n  var createItemAPI = function createItemAPI(item) {\n    var api = {};\n    copyObjectPropertiesToObject(item, api, PRIVATE);\n    return api;\n  };\n\n  var removeReleasedItems = function removeReleasedItems(items) {\n    items.forEach(function(item, index) {\n      if (item.released) {\n        arrayRemove(items, index);\n      }\n    });\n  };\n\n  var ItemStatus = {\n    INIT: 1,\n    IDLE: 2,\n    PROCESSING_QUEUED: 9,\n    PROCESSING: 3,\n    PROCESSING_COMPLETE: 5,\n    PROCESSING_ERROR: 6,\n    PROCESSING_REVERT_ERROR: 10,\n    LOADING: 7,\n    LOAD_ERROR: 8\n  };\n\n  var FileOrigin = {\n    INPUT: 1,\n    LIMBO: 2,\n    LOCAL: 3\n  };\n\n  var getNonNumeric = function getNonNumeric(str) {\n    return /[^0-9]+/.exec(str);\n  };\n\n  var getDecimalSeparator = function getDecimalSeparator() {\n    return getNonNumeric((1.1).toLocaleString())[0];\n  };\n\n  var getThousandsSeparator = function getThousandsSeparator() {\n    // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n    // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n    var decimalSeparator = getDecimalSeparator();\n    var thousandsStringWithSeparator = (1000.0).toLocaleString();\n    var thousandsStringWithoutSeparator = (1000.0).toString();\n    if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n      return getNonNumeric(thousandsStringWithSeparator)[0];\n    }\n    return decimalSeparator === '.' ? ',' : '.';\n  };\n\n  var Type = {\n    BOOLEAN: 'boolean',\n    INT: 'int',\n    NUMBER: 'number',\n    STRING: 'string',\n    ARRAY: 'array',\n    OBJECT: 'object',\n    FUNCTION: 'function',\n    ACTION: 'action',\n    SERVER_API: 'serverapi',\n    REGEX: 'regex'\n  };\n\n  // all registered filters\n  var filters = [];\n\n  // loops over matching filters and passes options to each filter, returning the mapped results\n  var applyFilterChain = function applyFilterChain(key, value, utils) {\n    return new Promise(function(resolve, reject) {\n      // find matching filters for this key\n      var matchingFilters = filters\n        .filter(function(f) {\n          return f.key === key;\n        })\n        .map(function(f) {\n          return f.cb;\n        });\n\n      // resolve now\n      if (matchingFilters.length === 0) {\n        resolve(value);\n        return;\n      }\n\n      // first filter to kick things of\n      var initialFilter = matchingFilters.shift();\n\n      // chain filters\n      matchingFilters\n        .reduce(\n          // loop over promises passing value to next promise\n          function(current, next) {\n            return current.then(function(value) {\n              return next(value, utils);\n            });\n          },\n\n          // call initial filter, will return a promise\n          initialFilter(value, utils)\n\n          // all executed\n        )\n        .then(function(value) {\n          return resolve(value);\n        })\n        .catch(function(error) {\n          return reject(error);\n        });\n    });\n  };\n\n  var applyFilters = function applyFilters(key, value, utils) {\n    return filters\n      .filter(function(f) {\n        return f.key === key;\n      })\n      .map(function(f) {\n        return f.cb(value, utils);\n      });\n  };\n\n  // adds a new filter to the list\n  var addFilter = function addFilter(key, cb) {\n    return filters.push({ key: key, cb: cb });\n  };\n\n  var extendDefaultOptions = function extendDefaultOptions(additionalOptions) {\n    return Object.assign(defaultOptions, additionalOptions);\n  };\n\n  var getOptions = function getOptions() {\n    return Object.assign({}, defaultOptions);\n  };\n\n  var setOptions = function setOptions(opts) {\n    forin(opts, function(key, value) {\n      // key does not exist, so this option cannot be set\n      if (!defaultOptions[key]) {\n        return;\n      }\n      defaultOptions[key][0] = getValueByType(\n        value,\n        defaultOptions[key][0],\n        defaultOptions[key][1]\n      );\n    });\n  };\n\n  // default options on app\n  var defaultOptions = {\n    // the id to add to the root element\n    id: [null, Type.STRING],\n\n    // input field name to use\n    name: ['filepond', Type.STRING],\n\n    // disable the field\n    disabled: [false, Type.BOOLEAN],\n\n    // classname to put on wrapper\n    className: [null, Type.STRING],\n\n    // is the field required\n    required: [false, Type.BOOLEAN],\n\n    // Allow media capture when value is set\n    captureMethod: [null, Type.STRING],\n    // - \"camera\", \"microphone\" or \"camcorder\",\n    // - Does not work with multiple on apple devices\n    // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n    // sync `acceptedFileTypes` property with `accept` attribute\n    allowSyncAcceptAttribute: [true, Type.BOOLEAN],\n\n    // Feature toggles\n    allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n    allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n    allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n    allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n    allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n    allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n    allowRemove: [true, Type.BOOLEAN], // Allow user to remove a file\n    allowProcess: [true, Type.BOOLEAN], // Allows user to process a file, when set to false, this removes the file upload button\n    allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n    allowDirectoriesOnly: [false, Type.BOOLEAN], // Allow only selecting directories with browse (no support for filtering dnd at this point)\n\n    // Revert mode\n    forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n    // Input requirements\n    maxFiles: [null, Type.INT], // Max number of files\n    checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n    // Where to put file\n    itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n    itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n    itemInsertInterval: [75, Type.INT],\n\n    // Drag 'n Drop related\n    dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n    dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n    dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n    ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n    // Upload related\n    instantUpload: [true, Type.BOOLEAN], // Should upload files immediately on drop\n    maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n\n    // Chunks\n    chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n    chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n    chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n    chunkRetryDelays: [[500, 1000, 3000], Type.Array], // Amount of times to retry upload of a chunk when it fails\n\n    // The server api end points to use for uploading (see docs)\n    server: [null, Type.SERVER_API],\n\n    // File size calculations, can set to 1024, this is only used for display, properties use file size base 1000\n    fileSizeBase: [1000, Type.INT],\n\n    // Labels and status messages\n    labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n    labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n    labelIdle: [\n      'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n      Type.STRING\n    ],\n    labelInvalidField: ['Field contains invalid files', Type.STRING],\n    labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n    labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n    labelFileCountSingular: ['file in list', Type.STRING],\n    labelFileCountPlural: ['files in list', Type.STRING],\n    labelFileLoading: ['Loading', Type.STRING],\n    labelFileAdded: ['Added', Type.STRING], // assistive only\n    labelFileLoadError: ['Error during load', Type.STRING],\n    labelFileRemoved: ['Removed', Type.STRING], // assistive only\n    labelFileRemoveError: ['Error during remove', Type.STRING],\n    labelFileProcessing: ['Uploading', Type.STRING],\n    labelFileProcessingComplete: ['Upload complete', Type.STRING],\n    labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n    labelFileProcessingError: ['Error during upload', Type.STRING],\n    labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n    labelTapToCancel: ['tap to cancel', Type.STRING],\n    labelTapToRetry: ['tap to retry', Type.STRING],\n    labelTapToUndo: ['tap to undo', Type.STRING],\n\n    labelButtonRemoveItem: ['Remove', Type.STRING],\n    labelButtonAbortItemLoad: ['Abort', Type.STRING],\n    labelButtonRetryItemLoad: ['Retry', Type.STRING],\n    labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n    labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n    labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n    labelButtonProcessItem: ['Upload', Type.STRING],\n\n    // make sure width and height plus viewpox are even numbers so icons are nicely centered\n    iconRemove: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconProcess: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n      Type.STRING\n    ],\n\n    iconRetry: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconUndo: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconDone: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    // event handlers\n    oninit: [null, Type.FUNCTION],\n    onwarning: [null, Type.FUNCTION],\n    onerror: [null, Type.FUNCTION],\n    onactivatefile: [null, Type.FUNCTION],\n    oninitfile: [null, Type.FUNCTION],\n    onaddfilestart: [null, Type.FUNCTION],\n    onaddfileprogress: [null, Type.FUNCTION],\n    onaddfile: [null, Type.FUNCTION],\n    onprocessfilestart: [null, Type.FUNCTION],\n    onprocessfileprogress: [null, Type.FUNCTION],\n    onprocessfileabort: [null, Type.FUNCTION],\n    onprocessfilerevert: [null, Type.FUNCTION],\n    onprocessfile: [null, Type.FUNCTION],\n    onprocessfiles: [null, Type.FUNCTION],\n    onremovefile: [null, Type.FUNCTION],\n    onpreparefile: [null, Type.FUNCTION],\n    onupdatefiles: [null, Type.FUNCTION],\n    onreorderfiles: [null, Type.FUNCTION],\n\n    // hooks\n    beforeDropFile: [null, Type.FUNCTION],\n    beforeAddFile: [null, Type.FUNCTION],\n    beforeRemoveFile: [null, Type.FUNCTION],\n\n    // styles\n    stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n    stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n    styleItemPanelAspectRatio: [null, Type.STRING],\n    styleButtonRemoveItemPosition: ['left', Type.STRING],\n    styleButtonProcessItemPosition: ['right', Type.STRING],\n    styleLoadIndicatorPosition: ['right', Type.STRING],\n    styleProgressIndicatorPosition: ['right', Type.STRING],\n    styleButtonRemoveItemAlign: [false, Type.BOOLEAN],\n\n    // custom initial files array\n    files: [[], Type.ARRAY]\n  };\n\n  var getItemByQuery = function getItemByQuery(items, query) {\n    // just return first index\n    if (isEmpty(query)) {\n      return items[0] || null;\n    }\n\n    // query is index\n    if (isInt(query)) {\n      return items[query] || null;\n    }\n\n    // if query is item, get the id\n    if (typeof query === 'object') {\n      query = query.id;\n    }\n\n    // assume query is a string and return item by id\n    return (\n      items.find(function(item) {\n        return item.id === query;\n      }) || null\n    );\n  };\n\n  var getNumericAspectRatioFromString = function getNumericAspectRatioFromString(\n    aspectRatio\n  ) {\n    if (isEmpty(aspectRatio)) {\n      return aspectRatio;\n    }\n    if (/:/.test(aspectRatio)) {\n      var parts = aspectRatio.split(':');\n      return parts[1] / parts[0];\n    }\n    return parseFloat(aspectRatio);\n  };\n\n  var getActiveItems = function getActiveItems(items) {\n    return items.filter(function(item) {\n      return !item.archived;\n    });\n  };\n\n  var Status = {\n    EMPTY: 0,\n    IDLE: 1, // waiting\n    ERROR: 2, // a file is in error state\n    BUSY: 3, // busy processing or loading\n    READY: 4 // all files uploaded\n  };\n\n  var ITEM_ERROR = [\n    ItemStatus.LOAD_ERROR,\n    ItemStatus.PROCESSING_ERROR,\n    ItemStatus.PROCESSING_REVERT_ERROR\n  ];\n  var ITEM_BUSY = [\n    ItemStatus.LOADING,\n    ItemStatus.PROCESSING,\n    ItemStatus.PROCESSING_QUEUED,\n    ItemStatus.INIT\n  ];\n  var ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\n  var isItemInErrorState = function isItemInErrorState(item) {\n    return ITEM_ERROR.includes(item.status);\n  };\n  var isItemInBusyState = function isItemInBusyState(item) {\n    return ITEM_BUSY.includes(item.status);\n  };\n  var isItemInReadyState = function isItemInReadyState(item) {\n    return ITEM_READY.includes(item.status);\n  };\n\n  var queries = function queries(state) {\n    return {\n      GET_STATUS: function GET_STATUS() {\n        var items = getActiveItems(state.items);\n        var EMPTY = Status.EMPTY,\n          ERROR = Status.ERROR,\n          BUSY = Status.BUSY,\n          IDLE = Status.IDLE,\n          READY = Status.READY;\n\n        if (items.length === 0) return EMPTY;\n\n        if (items.some(isItemInErrorState)) return ERROR;\n\n        if (items.some(isItemInBusyState)) return BUSY;\n\n        if (items.some(isItemInReadyState)) return READY;\n\n        return IDLE;\n      },\n\n      GET_ITEM: function GET_ITEM(query) {\n        return getItemByQuery(state.items, query);\n      },\n\n      GET_ACTIVE_ITEM: function GET_ACTIVE_ITEM(query) {\n        return getItemByQuery(getActiveItems(state.items), query);\n      },\n\n      GET_ACTIVE_ITEMS: function GET_ACTIVE_ITEMS() {\n        return getActiveItems(state.items);\n      },\n\n      GET_ITEMS: function GET_ITEMS() {\n        return state.items;\n      },\n\n      GET_ITEM_NAME: function GET_ITEM_NAME(query) {\n        var item = getItemByQuery(state.items, query);\n        return item ? item.filename : null;\n      },\n\n      GET_ITEM_SIZE: function GET_ITEM_SIZE(query) {\n        var item = getItemByQuery(state.items, query);\n        return item ? item.fileSize : null;\n      },\n\n      GET_STYLES: function GET_STYLES() {\n        return Object.keys(state.options)\n          .filter(function(key) {\n            return /^style/.test(key);\n          })\n          .map(function(option) {\n            return {\n              name: option,\n              value: state.options[option]\n            };\n          });\n      },\n\n      GET_PANEL_ASPECT_RATIO: function GET_PANEL_ASPECT_RATIO() {\n        var isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n        var aspectRatio = isShapeCircle\n          ? 1\n          : getNumericAspectRatioFromString(\n              state.options.stylePanelAspectRatio\n            );\n        return aspectRatio;\n      },\n\n      GET_ITEM_PANEL_ASPECT_RATIO: function GET_ITEM_PANEL_ASPECT_RATIO() {\n        return state.options.styleItemPanelAspectRatio;\n      },\n\n      GET_ITEMS_BY_STATUS: function GET_ITEMS_BY_STATUS(status) {\n        return getActiveItems(state.items).filter(function(item) {\n          return item.status === status;\n        });\n      },\n\n      GET_TOTAL_ITEMS: function GET_TOTAL_ITEMS() {\n        return getActiveItems(state.items).length;\n      },\n\n      IS_ASYNC: function IS_ASYNC() {\n        return (\n          isObject(state.options.server) &&\n          (isObject(state.options.server.process) ||\n            isFunction(state.options.server.process))\n        );\n      }\n    };\n  };\n\n  var hasRoomForItem = function hasRoomForItem(state) {\n    var count = getActiveItems(state.items).length;\n\n    // if cannot have multiple items, to add one item it should currently not contain items\n    if (!state.options.allowMultiple) {\n      return count === 0;\n    }\n\n    // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n    var maxFileCount = state.options.maxFiles;\n    if (maxFileCount === null) {\n      return true;\n    }\n\n    // we check if the current count is smaller than the max count, if so, another file can still be added\n    if (count < maxFileCount) {\n      return true;\n    }\n\n    // no more room for another file\n    return false;\n  };\n\n  var limit = function limit(value, min, max) {\n    return Math.max(Math.min(max, value), min);\n  };\n\n  var arrayInsert = function arrayInsert(arr, index, item) {\n    return arr.splice(index, 0, item);\n  };\n\n  var insertItem = function insertItem(items, item, index) {\n    if (isEmpty(item)) {\n      return null;\n    }\n\n    // if index is undefined, append\n    if (typeof index === 'undefined') {\n      items.push(item);\n      return item;\n    }\n\n    // limit the index to the size of the items array\n    index = limit(index, 0, items.length);\n\n    // add item to array\n    arrayInsert(items, index, item);\n\n    // expose\n    return item;\n  };\n\n  var isBase64DataURI = function isBase64DataURI(str) {\n    return /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n      str\n    );\n  };\n\n  var getFilenameFromURL = function getFilenameFromURL(url) {\n    return url\n      .split('/')\n      .pop()\n      .split('?')\n      .shift();\n  };\n\n  var getExtensionFromFilename = function getExtensionFromFilename(name) {\n    return name.split('.').pop();\n  };\n\n  var guesstimateExtension = function guesstimateExtension(type) {\n    // if no extension supplied, exit here\n    if (typeof type !== 'string') {\n      return '';\n    }\n\n    // get subtype\n    var subtype = type.split('/').pop();\n\n    // is svg subtype\n    if (/svg/.test(subtype)) {\n      return 'svg';\n    }\n\n    if (/zip|compressed/.test(subtype)) {\n      return 'zip';\n    }\n\n    if (/plain/.test(subtype)) {\n      return 'txt';\n    }\n\n    if (/msword/.test(subtype)) {\n      return 'doc';\n    }\n\n    // if is valid subtype\n    if (/[a-z]+/.test(subtype)) {\n      // always use jpg extension\n      if (subtype === 'jpeg') {\n        return 'jpg';\n      }\n\n      // return subtype\n      return subtype;\n    }\n\n    return '';\n  };\n\n  var leftPad = function leftPad(value) {\n    var padding =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    return (padding + value).slice(-padding.length);\n  };\n\n  var getDateString = function getDateString() {\n    var date =\n      arguments.length > 0 && arguments[0] !== undefined\n        ? arguments[0]\n        : new Date();\n    return (\n      date.getFullYear() +\n      '-' +\n      leftPad(date.getMonth() + 1, '00') +\n      '-' +\n      leftPad(date.getDate(), '00') +\n      '_' +\n      leftPad(date.getHours(), '00') +\n      '-' +\n      leftPad(date.getMinutes(), '00') +\n      '-' +\n      leftPad(date.getSeconds(), '00')\n    );\n  };\n\n  var getFileFromBlob = function getFileFromBlob(blob, filename) {\n    var type =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var extension =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var file =\n      typeof type === 'string'\n        ? blob.slice(0, blob.size, type)\n        : blob.slice(0, blob.size, blob.type);\n    file.lastModifiedDate = new Date();\n\n    // copy relative path\n    if (blob._relativePath) file._relativePath = blob._relativePath;\n\n    // if blob has name property, use as filename if no filename supplied\n    if (!isString(filename)) {\n      filename = getDateString();\n    }\n\n    // if filename supplied but no extension and filename has extension\n    if (filename && extension === null && getExtensionFromFilename(filename)) {\n      file.name = filename;\n    } else {\n      extension = extension || guesstimateExtension(file.type);\n      file.name = filename + (extension ? '.' + extension : '');\n    }\n\n    return file;\n  };\n\n  var getBlobBuilder = function getBlobBuilder() {\n    return (window.BlobBuilder =\n      window.BlobBuilder ||\n      window.WebKitBlobBuilder ||\n      window.MozBlobBuilder ||\n      window.MSBlobBuilder);\n  };\n\n  var createBlob = function createBlob(arrayBuffer, mimeType) {\n    var BB = getBlobBuilder();\n\n    if (BB) {\n      var bb = new BB();\n      bb.append(arrayBuffer);\n      return bb.getBlob(mimeType);\n    }\n\n    return new Blob([arrayBuffer], {\n      type: mimeType\n    });\n  };\n\n  var getBlobFromByteStringWithMimeType = function getBlobFromByteStringWithMimeType(\n    byteString,\n    mimeType\n  ) {\n    var ab = new ArrayBuffer(byteString.length);\n    var ia = new Uint8Array(ab);\n\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n\n    return createBlob(ab, mimeType);\n  };\n\n  var getMimeTypeFromBase64DataURI = function getMimeTypeFromBase64DataURI(\n    dataURI\n  ) {\n    return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n  };\n\n  var getBase64DataFromBase64DataURI = function getBase64DataFromBase64DataURI(\n    dataURI\n  ) {\n    // get data part of string (remove data:image/jpeg...,)\n    var data = dataURI.split(',')[1];\n\n    // remove any whitespace as that causes InvalidCharacterError in IE\n    return data.replace(/\\s/g, '');\n  };\n\n  var getByteStringFromBase64DataURI = function getByteStringFromBase64DataURI(\n    dataURI\n  ) {\n    return atob(getBase64DataFromBase64DataURI(dataURI));\n  };\n\n  var getBlobFromBase64DataURI = function getBlobFromBase64DataURI(dataURI) {\n    var mimeType = getMimeTypeFromBase64DataURI(dataURI);\n    var byteString = getByteStringFromBase64DataURI(dataURI);\n\n    return getBlobFromByteStringWithMimeType(byteString, mimeType);\n  };\n\n  var getFileFromBase64DataURI = function getFileFromBase64DataURI(\n    dataURI,\n    filename,\n    extension\n  ) {\n    return getFileFromBlob(\n      getBlobFromBase64DataURI(dataURI),\n      filename,\n      null,\n      extension\n    );\n  };\n\n  var getFileNameFromHeader = function getFileNameFromHeader(header) {\n    // test if is content disposition header, if not exit\n    if (!/^content-disposition:/i.test(header)) return null;\n\n    // get filename parts\n    var matches = header\n      .split(/filename=|filename\\*=.+''/)\n      .splice(1)\n      .map(function(name) {\n        return name.trim().replace(/^[\"']|[;\"']{0,2}$/g, '');\n      })\n      .filter(function(name) {\n        return name.length;\n      });\n\n    return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n  };\n\n  var getFileSizeFromHeader = function getFileSizeFromHeader(header) {\n    if (/content-length:/i.test(header)) {\n      var size = header.match(/[0-9]+/)[0];\n      return size ? parseInt(size, 10) : null;\n    }\n    return null;\n  };\n\n  var getTranfserIdFromHeader = function getTranfserIdFromHeader(header) {\n    if (/x-content-transfer-id:/i.test(header)) {\n      var id = (header.split(':')[1] || '').trim();\n      return id || null;\n    }\n    return null;\n  };\n\n  var getFileInfoFromHeaders = function getFileInfoFromHeaders(headers) {\n    var info = {\n      source: null,\n      name: null,\n      size: null\n    };\n\n    var rows = headers.split('\\n');\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n    try {\n      for (\n        var _iterator = rows[Symbol.iterator](), _step;\n        !(_iteratorNormalCompletion = (_step = _iterator.next()).done);\n        _iteratorNormalCompletion = true\n      ) {\n        var header = _step.value;\n\n        var name = getFileNameFromHeader(header);\n        if (name) {\n          info.name = name;\n          continue;\n        }\n\n        var size = getFileSizeFromHeader(header);\n        if (size) {\n          info.size = size;\n          continue;\n        }\n\n        var source = getTranfserIdFromHeader(header);\n        if (source) {\n          info.source = source;\n          continue;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return info;\n  };\n\n  var createFileLoader = function createFileLoader(fetchFn) {\n    var state = {\n      source: null,\n      complete: false,\n      progress: 0,\n      size: null,\n      timestamp: null,\n      duration: 0,\n      request: null\n    };\n\n    var getProgress = function getProgress() {\n      return state.progress;\n    };\n    var abort = function abort() {\n      if (state.request && state.request.abort) {\n        state.request.abort();\n      }\n    };\n\n    // load source\n    var load = function load() {\n      // get quick reference\n      var source = state.source;\n\n      api.fire('init', source);\n\n      // Load Files\n      if (source instanceof File) {\n        api.fire('load', source);\n      } else if (source instanceof Blob) {\n        // Load blobs, set default name to current date\n        api.fire('load', getFileFromBlob(source, source.name));\n      } else if (isBase64DataURI(source)) {\n        // Load base 64, set default name to current date\n        api.fire('load', getFileFromBase64DataURI(source));\n      } else {\n        // Deal as if is external URL, let's load it!\n        loadURL(source);\n      }\n    };\n\n    // loads a url\n    var loadURL = function loadURL(url) {\n      // is remote url and no fetch method supplied\n      if (!fetchFn) {\n        api.fire('error', {\n          type: 'error',\n          body: \"Can't load URL\",\n          code: 400\n        });\n\n        return;\n      }\n\n      // set request start\n      state.timestamp = Date.now();\n\n      // load file\n      state.request = fetchFn(\n        url,\n        function(response) {\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // done!\n          state.complete = true;\n\n          // turn blob response into a file\n          if (response instanceof Blob) {\n            response = getFileFromBlob(\n              response,\n              response.name || getFilenameFromURL(url)\n            );\n          }\n\n          api.fire(\n            'load',\n            // if has received blob, we go with blob, if no response, we return null\n            response instanceof Blob\n              ? response\n              : response\n              ? response.body\n              : null\n          );\n        },\n        function(error) {\n          api.fire(\n            'error',\n            typeof error === 'string'\n              ? {\n                  type: 'error',\n                  code: 0,\n                  body: error\n                }\n              : error\n          );\n        },\n        function(computable, current, total) {\n          // collected some meta data already\n          if (total) {\n            state.size = total;\n          }\n\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // if we can't compute progress, we're not going to fire progress events\n          if (!computable) {\n            state.progress = null;\n            return;\n          }\n\n          // update progress percentage\n          state.progress = current / total;\n\n          // expose\n          api.fire('progress', state.progress);\n        },\n        function() {\n          api.fire('abort');\n        },\n        function(response) {\n          var fileinfo = getFileInfoFromHeaders(\n            typeof response === 'string' ? response : response.headers\n          );\n          api.fire('meta', {\n            size: state.size || fileinfo.size,\n            filename: fileinfo.name,\n            source: fileinfo.source\n          });\n        }\n      );\n    };\n\n    var api = Object.assign({}, on(), {\n      setSource: function setSource(source) {\n        return (state.source = source);\n      },\n      getProgress: getProgress, // file load progress\n      abort: abort, // abort file load\n      load: load // start load\n    });\n\n    return api;\n  };\n\n  var isGet = function isGet(method) {\n    return /GET|HEAD/.test(method);\n  };\n\n  var sendRequest = function sendRequest(data, url, options) {\n    var api = {\n      onheaders: function onheaders() {},\n      onprogress: function onprogress() {},\n      onload: function onload() {},\n      ontimeout: function ontimeout() {},\n      onerror: function onerror() {},\n      onabort: function onabort() {},\n      abort: function abort() {\n        aborted = true;\n        xhr.abort();\n      }\n    };\n\n    // timeout identifier, only used when timeout is defined\n    var aborted = false;\n    var headersReceived = false;\n\n    // set default options\n    options = Object.assign(\n      {\n        method: 'POST',\n        headers: {},\n        withCredentials: false\n      },\n      options\n    );\n\n    // encode url\n    url = encodeURI(url);\n\n    // if method is GET, add any received data to url\n\n    if (isGet(options.method) && data) {\n      url =\n        '' +\n        url +\n        encodeURIComponent(\n          typeof data === 'string' ? data : JSON.stringify(data)\n        );\n    }\n\n    // create request\n    var xhr = new XMLHttpRequest();\n\n    // progress of load\n    var process = isGet(options.method) ? xhr : xhr.upload;\n    process.onprogress = function(e) {\n      // no progress event when aborted ( onprogress is called once after abort() )\n      if (aborted) {\n        return;\n      }\n\n      api.onprogress(e.lengthComputable, e.loaded, e.total);\n    };\n\n    // tries to get header info to the app as fast as possible\n    xhr.onreadystatechange = function() {\n      // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n      if (xhr.readyState < 2) {\n        return;\n      }\n\n      // no server response\n      if (xhr.readyState === 4 && xhr.status === 0) {\n        return;\n      }\n\n      if (headersReceived) {\n        return;\n      }\n\n      headersReceived = true;\n\n      // we've probably received some useful data in response headers\n      api.onheaders(xhr);\n    };\n\n    // load successful\n    xhr.onload = function() {\n      // is classified as valid response\n      if (xhr.status >= 200 && xhr.status < 300) {\n        api.onload(xhr);\n      } else {\n        api.onerror(xhr);\n      }\n    };\n\n    // error during load\n    xhr.onerror = function() {\n      return api.onerror(xhr);\n    };\n\n    // request aborted\n    xhr.onabort = function() {\n      aborted = true;\n      api.onabort();\n    };\n\n    // request timeout\n    xhr.ontimeout = function() {\n      return api.ontimeout(xhr);\n    };\n\n    // open up open up!\n    xhr.open(options.method, url, true);\n\n    // set timeout if defined (do it after open so IE11 plays ball)\n    if (isInt(options.timeout)) {\n      xhr.timeout = options.timeout;\n    }\n\n    // add headers\n    Object.keys(options.headers).forEach(function(key) {\n      var value = unescape(encodeURIComponent(options.headers[key]));\n      xhr.setRequestHeader(key, value);\n    });\n\n    // set type of response\n    if (options.responseType) {\n      xhr.responseType = options.responseType;\n    }\n\n    // set credentials\n    if (options.withCredentials) {\n      xhr.withCredentials = true;\n    }\n\n    // let's send our data\n    xhr.send(data);\n\n    return api;\n  };\n\n  var createResponse = function createResponse(type, code, body, headers) {\n    return {\n      type: type,\n      code: code,\n      body: body,\n      headers: headers\n    };\n  };\n\n  var createTimeoutResponse = function createTimeoutResponse(cb) {\n    return function(xhr) {\n      cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n    };\n  };\n\n  var hasQS = function hasQS(str) {\n    return /\\?/.test(str);\n  };\n  var buildURL = function buildURL() {\n    var url = '';\n    for (\n      var _len = arguments.length, parts = new Array(_len), _key = 0;\n      _key < _len;\n      _key++\n    ) {\n      parts[_key] = arguments[_key];\n    }\n    parts.forEach(function(part) {\n      url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, '&') : part;\n    });\n    return url;\n  };\n\n  var createFetchFunction = function createFetchFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function') {\n      return action;\n    }\n\n    // no action supplied\n    if (!action || !isString(action.url)) {\n      return null;\n    }\n\n    // set onload hanlder\n    var onload =\n      action.onload ||\n      function(res) {\n        return res;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // internal handler\n    return function(url, load, error, progress, abort, headers) {\n      // do local or remote request based on if the url is external\n      var request = sendRequest(\n        url,\n        buildURL(apiUrl, action.url),\n        Object.assign({}, action, {\n          responseType: 'blob'\n        })\n      );\n\n      request.onload = function(xhr) {\n        // get headers\n        var headers = xhr.getAllResponseHeaders();\n\n        // get filename\n        var filename =\n          getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n        // create response\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            action.method === 'HEAD'\n              ? null\n              : getFileFromBlob(onload(xhr.response), filename),\n            headers\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onheaders = function(xhr) {\n        headers(\n          createResponse(\n            'headers',\n            xhr.status,\n            null,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n      request.onprogress = progress;\n      request.onabort = abort;\n\n      // should return request\n      return request;\n    };\n  };\n\n  var ChunkStatus = {\n    QUEUED: 0,\n    COMPLETE: 1,\n    PROCESSING: 2,\n    ERROR: 3,\n    WAITING: 4\n  };\n\n  /*\n                                                       function signature:\n                                                         (file, metadata, load, error, progress, abort, transfer, options) => {\n                                                           return {\n                                                           abort:() => {}\n                                                         }\n                                                       }\n                                                       */\n\n  // apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\n  var processFileChunked = function processFileChunked(\n    apiUrl,\n    action,\n    name,\n    file,\n    metadata,\n    load,\n    error,\n    progress,\n    abort,\n    transfer,\n    options\n  ) {\n    // all chunks\n    var chunks = [];\n    var chunkTransferId = options.chunkTransferId,\n      chunkServer = options.chunkServer,\n      chunkSize = options.chunkSize,\n      chunkRetryDelays = options.chunkRetryDelays;\n\n    // default state\n    var state = {\n      serverId: chunkTransferId,\n      aborted: false\n    };\n\n    // set onload handlers\n    var ondata =\n      action.ondata ||\n      function(fd) {\n        return fd;\n      };\n    var onload =\n      action.onload ||\n      function(xhr, method) {\n        return method === 'HEAD'\n          ? xhr.getResponseHeader('Upload-Offset')\n          : xhr.response;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // create server hook\n    var requestTransferId = function requestTransferId(cb) {\n      var formData = new FormData();\n\n      // add metadata under same name\n      if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n      var headers =\n        typeof action.headers === 'function'\n          ? action.headers(file, metadata)\n          : Object.assign({}, action.headers, {\n              'Upload-Length': file.size\n            });\n\n      var requestParams = Object.assign({}, action, {\n        headers: headers\n      });\n\n      // send request object\n      var request = sendRequest(\n        ondata(formData),\n        buildURL(apiUrl, action.url),\n        requestParams\n      );\n\n      request.onload = function(xhr) {\n        return cb(onload(xhr, requestParams.method));\n      };\n\n      request.onerror = function(xhr) {\n        return error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n    };\n\n    var requestTransferOffset = function requestTransferOffset(cb) {\n      var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n      var headers =\n        typeof action.headers === 'function'\n          ? action.headers(state.serverId)\n          : Object.assign({}, action.headers);\n\n      var requestParams = {\n        headers: headers,\n        method: 'HEAD'\n      };\n\n      var request = sendRequest(null, requestUrl, requestParams);\n\n      request.onload = function(xhr) {\n        return cb(onload(xhr, requestParams.method));\n      };\n\n      request.onerror = function(xhr) {\n        return error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n    };\n\n    // create chunks\n    var lastChunkIndex = Math.floor(file.size / chunkSize);\n    for (var i = 0; i <= lastChunkIndex; i++) {\n      var offset = i * chunkSize;\n      var data = file.slice(\n        offset,\n        offset + chunkSize,\n        'application/offset+octet-stream'\n      );\n      chunks[i] = {\n        index: i,\n        size: data.size,\n        offset: offset,\n        data: data,\n        file: file,\n        progress: 0,\n        retries: _toConsumableArray(chunkRetryDelays),\n        status: ChunkStatus.QUEUED,\n        error: null,\n        request: null,\n        timeout: null\n      };\n    }\n\n    var completeProcessingChunks = function completeProcessingChunks() {\n      return load(state.serverId);\n    };\n\n    var canProcessChunk = function canProcessChunk(chunk) {\n      return (\n        chunk.status === ChunkStatus.QUEUED ||\n        chunk.status === ChunkStatus.ERROR\n      );\n    };\n\n    var processChunk = function processChunk(chunk) {\n      // processing is paused, wait here\n      if (state.aborted) return;\n\n      // get next chunk to process\n      chunk = chunk || chunks.find(canProcessChunk);\n\n      // no more chunks to process\n      if (!chunk) {\n        // all done?\n        if (\n          chunks.every(function(chunk) {\n            return chunk.status === ChunkStatus.COMPLETE;\n          })\n        ) {\n          completeProcessingChunks();\n        }\n\n        // no chunk to handle\n        return;\n      }\n\n      // now processing this chunk\n      chunk.status = ChunkStatus.PROCESSING;\n      chunk.progress = null;\n\n      // allow parsing of formdata\n      var ondata =\n        chunkServer.ondata ||\n        function(fd) {\n          return fd;\n        };\n      var onerror =\n        chunkServer.onerror ||\n        function(res) {\n          return null;\n        };\n\n      // send request object\n      var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n      var headers =\n        typeof chunkServer.headers === 'function'\n          ? chunkServer.headers(chunk)\n          : Object.assign({}, chunkServer.headers, {\n              'Content-Type': 'application/offset+octet-stream',\n              'Upload-Offset': chunk.offset,\n              'Upload-Length': file.size,\n              'Upload-Name': file.name\n            });\n\n      var request = (chunk.request = sendRequest(\n        ondata(chunk.data),\n        requestUrl,\n        Object.assign({}, chunkServer, {\n          headers: headers\n        })\n      ));\n\n      request.onload = function() {\n        // done!\n        chunk.status = ChunkStatus.COMPLETE;\n\n        // remove request reference\n        chunk.request = null;\n\n        // start processing more chunks\n        processChunks();\n      };\n\n      request.onprogress = function(lengthComputable, loaded, total) {\n        chunk.progress = lengthComputable ? loaded : null;\n        updateTotalProgress();\n      };\n\n      request.onerror = function(xhr) {\n        chunk.status = ChunkStatus.ERROR;\n        chunk.request = null;\n        chunk.error = onerror(xhr.response) || xhr.statusText;\n        if (!retryProcessChunk(chunk)) {\n          error(\n            createResponse(\n              'error',\n              xhr.status,\n              onerror(xhr.response) || xhr.statusText,\n              xhr.getAllResponseHeaders()\n            )\n          );\n        }\n      };\n\n      request.ontimeout = function(xhr) {\n        chunk.status = ChunkStatus.ERROR;\n        chunk.request = null;\n        if (!retryProcessChunk(chunk)) {\n          createTimeoutResponse(error)(xhr);\n        }\n      };\n\n      request.onabort = function() {\n        chunk.status = ChunkStatus.QUEUED;\n        chunk.request = null;\n        abort();\n      };\n    };\n\n    var retryProcessChunk = function retryProcessChunk(chunk) {\n      // no more retries left\n      if (chunk.retries.length === 0) return false;\n\n      // new retry\n      chunk.status = ChunkStatus.WAITING;\n      clearTimeout(chunk.timeout);\n      chunk.timeout = setTimeout(function() {\n        processChunk(chunk);\n      }, chunk.retries.shift());\n\n      // we're going to retry\n      return true;\n    };\n\n    var updateTotalProgress = function updateTotalProgress() {\n      // calculate total progress fraction\n      var totalBytesTransfered = chunks.reduce(function(p, chunk) {\n        if (p === null || chunk.progress === null) return null;\n        return p + chunk.progress;\n      }, 0);\n\n      // can't compute progress\n      if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n      // calculate progress values\n      var totalSize = chunks.reduce(function(total, chunk) {\n        return total + chunk.size;\n      }, 0);\n\n      // can update progress indicator\n      progress(true, totalBytesTransfered, totalSize);\n    };\n\n    // process new chunks\n    var processChunks = function processChunks() {\n      var totalProcessing = chunks.filter(function(chunk) {\n        return chunk.status === ChunkStatus.PROCESSING;\n      }).length;\n      if (totalProcessing >= 1) return;\n      processChunk();\n    };\n\n    var abortChunks = function abortChunks() {\n      chunks.forEach(function(chunk) {\n        clearTimeout(chunk.timeout);\n        if (chunk.request) {\n          chunk.request.abort();\n        }\n      });\n    };\n\n    // let's go!\n    if (!state.serverId) {\n      requestTransferId(function(serverId) {\n        // stop here if aborted, might have happened in between request and callback\n        if (state.aborted) return;\n\n        // pass back to item so we can use it if something goes wrong\n        transfer(serverId);\n\n        // store internally\n        state.serverId = serverId;\n        processChunks();\n      });\n    } else {\n      requestTransferOffset(function(offset) {\n        // stop here if aborted, might have happened in between request and callback\n        if (state.aborted) return;\n\n        // mark chunks with lower offset as complete\n        chunks\n          .filter(function(chunk) {\n            return chunk.offset < offset;\n          })\n          .forEach(function(chunk) {\n            chunk.status = ChunkStatus.COMPLETE;\n            chunk.progress = chunk.size;\n          });\n\n        // continue processing\n        processChunks();\n      });\n    }\n\n    return {\n      abort: function abort() {\n        state.aborted = true;\n        abortChunks();\n      }\n    };\n  };\n\n  /*\n                                                               function signature:\n                                                                 (file, metadata, load, error, progress, abort) => {\n                                                                   return {\n                                                                   abort:() => {}\n                                                                 }\n                                                               }\n                                                               */\n  var createFileProcessorFunction = function createFileProcessorFunction(\n    apiUrl,\n    action,\n    name,\n    options\n  ) {\n    return function(file, metadata, load, error, progress, abort, transfer) {\n      // no file received\n      if (!file) return;\n\n      // if was passed a file, and we can chunk it, exit here\n      var canChunkUpload = options.chunkUploads;\n      var shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n      var willChunkUpload =\n        canChunkUpload && (shouldChunkUpload || options.chunkForce);\n      if (file instanceof Blob && willChunkUpload)\n        return processFileChunked(\n          apiUrl,\n          action,\n          name,\n          file,\n          metadata,\n          load,\n          error,\n          progress,\n          abort,\n          transfer,\n          options\n        );\n\n      // set handlers\n      var ondata =\n        action.ondata ||\n        function(fd) {\n          return fd;\n        };\n      var onload =\n        action.onload ||\n        function(res) {\n          return res;\n        };\n      var onerror =\n        action.onerror ||\n        function(res) {\n          return null;\n        };\n\n      // create formdata object\n      var formData = new FormData();\n\n      // add metadata under same name\n      if (isObject(metadata)) {\n        formData.append(name, JSON.stringify(metadata));\n      }\n\n      // Turn into an array of objects so no matter what the input, we can handle it the same way\n      (file instanceof Blob ? [{ name: null, file: file }] : file).forEach(\n        function(item) {\n          formData.append(\n            name,\n            item.file,\n            item.name === null\n              ? item.file.name\n              : '' + item.name + item.file.name\n          );\n        }\n      );\n\n      // send request object\n      var request = sendRequest(\n        ondata(formData),\n        buildURL(apiUrl, action.url),\n        action\n      );\n      request.onload = function(xhr) {\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            onload(xhr.response),\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n      request.onprogress = progress;\n      request.onabort = abort;\n\n      // should return request\n      return request;\n    };\n  };\n\n  var createProcessorFunction = function createProcessorFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    var name = arguments.length > 2 ? arguments[2] : undefined;\n    var options = arguments.length > 3 ? arguments[3] : undefined;\n\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function')\n      return function() {\n        for (\n          var _len = arguments.length, params = new Array(_len), _key = 0;\n          _key < _len;\n          _key++\n        ) {\n          params[_key] = arguments[_key];\n        }\n        return action.apply(void 0, [name].concat(params, [options]));\n      };\n\n    // no action supplied\n    if (!action || !isString(action.url)) return null;\n\n    // internal handler\n    return createFileProcessorFunction(apiUrl, action, name, options);\n  };\n\n  /*\n                                                      function signature:\n                                                      (uniqueFileId, load, error) => { }\n                                                      */\n  var createRevertFunction = function createRevertFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    // is custom implementation\n    if (typeof action === 'function') {\n      return action;\n    }\n\n    // no action supplied, return stub function, interface will work, but file won't be removed\n    if (!action || !isString(action.url)) {\n      return function(uniqueFileId, load) {\n        return load();\n      };\n    }\n\n    // set onload hanlder\n    var onload =\n      action.onload ||\n      function(res) {\n        return res;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // internal implementation\n    return function(uniqueFileId, load, error) {\n      var request = sendRequest(\n        uniqueFileId,\n        apiUrl + action.url,\n        action // contains method, headers and withCredentials properties\n      );\n      request.onload = function(xhr) {\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            onload(xhr.response),\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n\n      return request;\n    };\n  };\n\n  var getRandomNumber = function getRandomNumber() {\n    var min =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var max =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return min + Math.random() * (max - min);\n  };\n\n  var createPerceivedPerformanceUpdater = function createPerceivedPerformanceUpdater(\n    cb\n  ) {\n    var duration =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n    var offset =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var tickMin =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 25;\n    var tickMax =\n      arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;\n    var timeout = null;\n    var start = Date.now();\n\n    var tick = function tick() {\n      var runtime = Date.now() - start;\n      var delay = getRandomNumber(tickMin, tickMax);\n\n      if (runtime + delay > duration) {\n        delay = runtime + delay - duration;\n      }\n\n      var progress = runtime / duration;\n      if (progress >= 1 || document.hidden) {\n        cb(1);\n        return;\n      }\n\n      cb(progress);\n\n      timeout = setTimeout(tick, delay);\n    };\n\n    tick();\n\n    return {\n      clear: function clear() {\n        clearTimeout(timeout);\n      }\n    };\n  };\n\n  var createFileProcessor = function createFileProcessor(processFn) {\n    var state = {\n      complete: false,\n      perceivedProgress: 0,\n      perceivedPerformanceUpdater: null,\n      progress: null,\n      timestamp: null,\n      perceivedDuration: 0,\n      duration: 0,\n      request: null,\n      response: null\n    };\n\n    var process = function process(file, metadata) {\n      var progressFn = function progressFn() {\n        // we've not yet started the real download, stop here\n        // the request might not go through, for instance, there might be some server trouble\n        // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n        if (state.duration === 0 || state.progress === null) return;\n\n        // as we're now processing, fire the progress event\n        api.fire('progress', api.getProgress());\n      };\n\n      var completeFn = function completeFn() {\n        state.complete = true;\n        api.fire('load-perceived', state.response.body);\n      };\n\n      // let's start processing\n      api.fire('start');\n\n      // set request start\n      state.timestamp = Date.now();\n\n      // create perceived performance progress indicator\n      state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n        function(progress) {\n          state.perceivedProgress = progress;\n          state.perceivedDuration = Date.now() - state.timestamp;\n\n          progressFn();\n\n          // if fake progress is done, and a response has been received,\n          // and we've not yet called the complete method\n          if (\n            state.response &&\n            state.perceivedProgress === 1 &&\n            !state.complete\n          ) {\n            // we done!\n            completeFn();\n          }\n        },\n        // random delay as in a list of files you start noticing\n        // files uploading at the exact same speed\n        getRandomNumber(750, 1500)\n      );\n\n      // remember request so we can abort it later\n      state.request = processFn(\n        // the file to process\n        file,\n\n        // the metadata to send along\n        metadata,\n\n        // callbacks (load, error, progress, abort, transfer)\n        // load expects the body to be a server id if\n        // you want to make use of revert\n        function(response) {\n          // we put the response in state so we can access\n          // it outside of this method\n          state.response = isObject(response)\n            ? response\n            : {\n                type: 'load',\n                code: 200,\n                body: '' + response,\n                headers: {}\n              };\n\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // force progress to 1 as we're now done\n          state.progress = 1;\n\n          // actual load is done let's share results\n          api.fire('load', state.response.body);\n\n          // we are really done\n          // if perceived progress is 1 ( wait for perceived progress to complete )\n          // or if server does not support progress ( null )\n          if (state.perceivedProgress === 1) {\n            completeFn();\n          }\n        },\n\n        // error is expected to be an object with type, code, body\n        function(error) {\n          // cancel updater\n          state.perceivedPerformanceUpdater.clear();\n\n          // update others about this error\n          api.fire(\n            'error',\n            isObject(error)\n              ? error\n              : {\n                  type: 'error',\n                  code: 0,\n                  body: '' + error\n                }\n          );\n        },\n\n        // actual processing progress\n        function(computable, current, total) {\n          // update actual duration\n          state.duration = Date.now() - state.timestamp;\n\n          // update actual progress\n          state.progress = computable ? current / total : null;\n\n          progressFn();\n        },\n\n        // abort does not expect a value\n        function() {\n          // stop updater\n          state.perceivedPerformanceUpdater.clear();\n\n          // fire the abort event so we can switch visuals\n          api.fire('abort', state.response ? state.response.body : null);\n        },\n\n        // register the id for this transfer\n        function(transferId) {\n          api.fire('transfer', transferId);\n        }\n      );\n    };\n\n    var abort = function abort() {\n      // no request running, can't abort\n      if (!state.request) return;\n\n      // stop updater\n      state.perceivedPerformanceUpdater.clear();\n\n      // abort actual request\n      if (state.request.abort) state.request.abort();\n\n      // if has response object, we've completed the request\n      state.complete = true;\n    };\n\n    var reset = function reset() {\n      abort();\n      state.complete = false;\n      state.perceivedProgress = 0;\n      state.progress = 0;\n      state.timestamp = null;\n      state.perceivedDuration = 0;\n      state.duration = 0;\n      state.request = null;\n      state.response = null;\n    };\n\n    var getProgress = function getProgress() {\n      return state.progress\n        ? Math.min(state.progress, state.perceivedProgress)\n        : null;\n    };\n    var getDuration = function getDuration() {\n      return Math.min(state.duration, state.perceivedDuration);\n    };\n\n    var api = Object.assign({}, on(), {\n      process: process, // start processing file\n      abort: abort, // abort active process request\n      getProgress: getProgress,\n      getDuration: getDuration,\n      reset: reset\n    });\n\n    return api;\n  };\n\n  var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n    return name.substr(0, name.lastIndexOf('.')) || name;\n  };\n\n  var createFileStub = function createFileStub(source) {\n    var data = [source.name, source.size, source.type];\n\n    // is blob or base64, then we need to set the name\n    if (source instanceof Blob || isBase64DataURI(source)) {\n      data[0] = source.name || getDateString();\n    } else if (isBase64DataURI(source)) {\n      // if is base64 data uri we need to determine the average size and type\n      data[1] = source.length;\n      data[2] = getMimeTypeFromBase64DataURI(source);\n    } else if (isString(source)) {\n      // url\n      data[0] = getFilenameFromURL(source);\n      data[1] = 0;\n      data[2] = 'application/octet-stream';\n    }\n\n    return {\n      name: data[0],\n      size: data[1],\n      type: data[2]\n    };\n  };\n\n  var isFile = function isFile(value) {\n    return !!(value instanceof File || (value instanceof Blob && value.name));\n  };\n\n  var deepCloneObject = function deepCloneObject(src) {\n    if (!isObject(src)) return src;\n    var target = isArray(src) ? [] : {};\n    for (var key in src) {\n      if (!src.hasOwnProperty(key)) continue;\n      var v = src[key];\n      target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n    }\n    return target;\n  };\n\n  var createItem = function createItem() {\n    var origin =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var serverFileReference =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var file =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    // unique id for this item, is used to identify the item across views\n    var id = getUniqueId();\n\n    /**\n     * Internal item state\n     */\n    var state = {\n      // is archived\n      archived: false,\n\n      // if is frozen, no longer fires events\n      frozen: false,\n\n      // removed from view\n      released: false,\n\n      // original source\n      source: null,\n\n      // file model reference\n      file: file,\n\n      // id of file on server\n      serverFileReference: serverFileReference,\n\n      // id of file transfer on server\n      transferId: null,\n\n      // is aborted\n      processingAborted: false,\n\n      // current item status\n      status: serverFileReference\n        ? ItemStatus.PROCESSING_COMPLETE\n        : ItemStatus.INIT,\n\n      // active processes\n      activeLoader: null,\n      activeProcessor: null\n    };\n\n    // callback used when abort processing is called to link back to the resolve method\n    var abortProcessingRequestComplete = null;\n\n    /**\n     * Externally added item metadata\n     */\n    var metadata = {};\n\n    // item data\n    var setStatus = function setStatus(status) {\n      return (state.status = status);\n    };\n\n    // fire event unless the item has been archived\n    var fire = function fire(event) {\n      if (state.released || state.frozen) return;\n      for (\n        var _len = arguments.length,\n          params = new Array(_len > 1 ? _len - 1 : 0),\n          _key = 1;\n        _key < _len;\n        _key++\n      ) {\n        params[_key - 1] = arguments[_key];\n      }\n      api.fire.apply(api, [event].concat(params));\n    };\n\n    // file data\n    var getFileExtension = function getFileExtension() {\n      return getExtensionFromFilename(state.file.name);\n    };\n    var getFileType = function getFileType() {\n      return state.file.type;\n    };\n    var getFileSize = function getFileSize() {\n      return state.file.size;\n    };\n    var getFile = function getFile() {\n      return state.file;\n    };\n\n    //\n    // logic to load a file\n    //\n    var load = function load(source, loader, onload) {\n      // remember the original item source\n      state.source = source;\n\n      // source is known\n      api.fireSync('init');\n\n      // file stub is already there\n      if (state.file) {\n        api.fireSync('load-skip');\n        return;\n      }\n\n      // set a stub file object while loading the actual data\n      state.file = createFileStub(source);\n\n      // starts loading\n      loader.on('init', function() {\n        fire('load-init');\n      });\n\n      // we'eve received a size indication, let's update the stub\n      loader.on('meta', function(meta) {\n        // set size of file stub\n        state.file.size = meta.size;\n\n        // set name of file stub\n        state.file.filename = meta.filename;\n\n        // if has received source, we done\n        if (meta.source) {\n          origin = FileOrigin.LIMBO;\n          state.serverFileReference = meta.source;\n          state.status = ItemStatus.PROCESSING_COMPLETE;\n        }\n\n        // size has been updated\n        fire('load-meta');\n      });\n\n      // the file is now loading we need to update the progress indicators\n      loader.on('progress', function(progress) {\n        setStatus(ItemStatus.LOADING);\n\n        fire('load-progress', progress);\n      });\n\n      // an error was thrown while loading the file, we need to switch to error state\n      loader.on('error', function(error) {\n        setStatus(ItemStatus.LOAD_ERROR);\n\n        fire('load-request-error', error);\n      });\n\n      // user or another process aborted the file load (cannot retry)\n      loader.on('abort', function() {\n        setStatus(ItemStatus.INIT);\n        fire('load-abort');\n      });\n\n      // done loading\n      loader.on('load', function(file) {\n        // as we've now loaded the file the loader is no longer required\n        state.activeLoader = null;\n\n        // called when file has loaded succesfully\n        var success = function success(result) {\n          // set (possibly) transformed file\n          state.file = isFile(result) ? result : state.file;\n\n          // file received\n          if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n            setStatus(ItemStatus.PROCESSING_COMPLETE);\n          } else {\n            setStatus(ItemStatus.IDLE);\n          }\n\n          fire('load');\n        };\n\n        var error = function error(result) {\n          // set original file\n          state.file = file;\n          fire('load-meta');\n\n          setStatus(ItemStatus.LOAD_ERROR);\n          fire('load-file-error', result);\n        };\n\n        // if we already have a server file reference, we don't need to call the onload method\n        if (state.serverFileReference) {\n          success(file);\n          return;\n        }\n\n        // no server id, let's give this file the full treatment\n        onload(file, success, error);\n      });\n\n      // set loader source data\n      loader.setSource(source);\n\n      // set as active loader\n      state.activeLoader = loader;\n\n      // load the source data\n      loader.load();\n    };\n\n    var retryLoad = function retryLoad() {\n      if (!state.activeLoader) {\n        return;\n      }\n      state.activeLoader.load();\n    };\n\n    var abortLoad = function abortLoad() {\n      if (state.activeLoader) {\n        state.activeLoader.abort();\n        return;\n      }\n      setStatus(ItemStatus.INIT);\n      fire('load-abort');\n    };\n\n    //\n    // logic to process a file\n    //\n    var process = function process(processor, onprocess) {\n      // processing was aborted\n      if (state.processingAborted) {\n        state.processingAborted = false;\n        return;\n      }\n\n      // now processing\n      setStatus(ItemStatus.PROCESSING);\n\n      // reset abort callback\n      abortProcessingRequestComplete = null;\n\n      // if no file loaded we'll wait for the load event\n      if (!(state.file instanceof Blob)) {\n        api.on('load', function() {\n          process(processor, onprocess);\n        });\n        return;\n      }\n\n      // setup processor\n      processor.on('load', function(serverFileReference) {\n        // need this id to be able to revert the upload\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n      });\n\n      // register transfer id\n      processor.on('transfer', function(transferId) {\n        // need this id to be able to revert the upload\n        state.transferId = transferId;\n      });\n\n      processor.on('load-perceived', function(serverFileReference) {\n        // no longer required\n        state.activeProcessor = null;\n\n        // need this id to be able to rever the upload\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n\n        setStatus(ItemStatus.PROCESSING_COMPLETE);\n        fire('process-complete', serverFileReference);\n      });\n\n      processor.on('start', function() {\n        fire('process-start');\n      });\n\n      processor.on('error', function(error) {\n        state.activeProcessor = null;\n        setStatus(ItemStatus.PROCESSING_ERROR);\n        fire('process-error', error);\n      });\n\n      processor.on('abort', function(serverFileReference) {\n        state.activeProcessor = null;\n\n        // if file was uploaded but processing was cancelled during perceived processor time store file reference\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n\n        setStatus(ItemStatus.IDLE);\n        fire('process-abort');\n\n        // has timeout so doesn't interfere with remove action\n        if (abortProcessingRequestComplete) {\n          abortProcessingRequestComplete();\n        }\n      });\n\n      processor.on('progress', function(progress) {\n        fire('process-progress', progress);\n      });\n\n      // when successfully transformed\n      var success = function success(file) {\n        // if was archived in the mean time, don't process\n        if (state.archived) return;\n\n        // process file!\n        processor.process(file, Object.assign({}, metadata));\n      };\n\n      // something went wrong during transform phase\n      var error = console.error;\n\n      // start processing the file\n      onprocess(state.file, success, error);\n\n      // set as active processor\n      state.activeProcessor = processor;\n    };\n\n    var requestProcessing = function requestProcessing() {\n      state.processingAborted = false;\n      setStatus(ItemStatus.PROCESSING_QUEUED);\n    };\n\n    var abortProcessing = function abortProcessing() {\n      return new Promise(function(resolve) {\n        if (!state.activeProcessor) {\n          state.processingAborted = true;\n\n          setStatus(ItemStatus.IDLE);\n          fire('process-abort');\n\n          resolve();\n          return;\n        }\n\n        abortProcessingRequestComplete = function abortProcessingRequestComplete() {\n          resolve();\n        };\n\n        state.activeProcessor.abort();\n      });\n    };\n\n    //\n    // logic to revert a processed file\n    //\n    var revert = function revert(revertFileUpload, forceRevert) {\n      return new Promise(function(resolve, reject) {\n        // cannot revert without a server id for this process\n        if (state.serverFileReference === null) {\n          resolve();\n          return;\n        }\n\n        // revert the upload (fire and forget)\n        revertFileUpload(\n          state.serverFileReference,\n          function() {\n            // reset file server id as now it's no available on the server\n            state.serverFileReference = null;\n            resolve();\n          },\n          function(error) {\n            // don't set error state when reverting is optional, it will always resolve\n            if (!forceRevert) {\n              resolve();\n              return;\n            }\n\n            // oh no errors\n            setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n            fire('process-revert-error');\n            reject(error);\n          }\n        );\n\n        // fire event\n        setStatus(ItemStatus.IDLE);\n        fire('process-revert');\n      });\n    };\n\n    // exposed methods\n    var _setMetadata = function setMetadata(key, value, silent) {\n      var keys = key.split('.');\n      var root = keys[0];\n      var last = keys.pop();\n      var data = metadata;\n      keys.forEach(function(key) {\n        return (data = data[key]);\n      });\n\n      // compare old value against new value, if they're the same, we're not updating\n      if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n      // update value\n      data[last] = value;\n\n      // don't fire update\n      if (silent) return;\n\n      // fire update\n      fire('metadata-update', {\n        key: root,\n        value: metadata[root]\n      });\n    };\n\n    var getMetadata = function getMetadata(key) {\n      return deepCloneObject(key ? metadata[key] : metadata);\n    };\n\n    var api = Object.assign(\n      {\n        id: {\n          get: function get() {\n            return id;\n          }\n        },\n        origin: {\n          get: function get() {\n            return origin;\n          }\n        },\n        serverId: {\n          get: function get() {\n            return state.serverFileReference;\n          }\n        },\n        transferId: {\n          get: function get() {\n            return state.transferId;\n          }\n        },\n        status: {\n          get: function get() {\n            return state.status;\n          }\n        },\n        filename: {\n          get: function get() {\n            return state.file.name;\n          }\n        },\n        filenameWithoutExtension: {\n          get: function get() {\n            return getFilenameWithoutExtension(state.file.name);\n          }\n        },\n        fileExtension: { get: getFileExtension },\n        fileType: { get: getFileType },\n        fileSize: { get: getFileSize },\n        file: { get: getFile },\n        relativePath: {\n          get: function get() {\n            return state.file._relativePath;\n          }\n        },\n\n        source: {\n          get: function get() {\n            return state.source;\n          }\n        },\n\n        getMetadata: getMetadata,\n        setMetadata: function setMetadata(key, value, silent) {\n          if (isObject(key)) {\n            var data = key;\n            Object.keys(data).forEach(function(key) {\n              _setMetadata(key, data[key], value);\n            });\n            return key;\n          }\n          _setMetadata(key, value, silent);\n          return value;\n        },\n\n        extend: function extend(name, handler) {\n          return (itemAPI[name] = handler);\n        },\n\n        abortLoad: abortLoad,\n        retryLoad: retryLoad,\n        requestProcessing: requestProcessing,\n        abortProcessing: abortProcessing,\n\n        load: load,\n        process: process,\n        revert: revert\n      },\n\n      on(),\n      {\n        freeze: function freeze() {\n          return (state.frozen = true);\n        },\n\n        release: function release() {\n          return (state.released = true);\n        },\n        released: {\n          get: function get() {\n            return state.released;\n          }\n        },\n\n        archive: function archive() {\n          return (state.archived = true);\n        },\n        archived: {\n          get: function get() {\n            return state.archived;\n          }\n        }\n      }\n    );\n\n    // create it here instead of returning it instantly so we can extend it later\n    var itemAPI = createObject(api);\n\n    return itemAPI;\n  };\n\n  var getItemIndexByQuery = function getItemIndexByQuery(items, query) {\n    // just return first index\n    if (isEmpty(query)) {\n      return 0;\n    }\n\n    // invalid queries\n    if (!isString(query)) {\n      return -1;\n    }\n\n    // return item by id (or -1 if not found)\n    return items.findIndex(function(item) {\n      return item.id === query;\n    });\n  };\n\n  var getItemById = function getItemById(items, itemId) {\n    var index = getItemIndexByQuery(items, itemId);\n    if (index < 0) {\n      return;\n    }\n    return items[index] || null;\n  };\n\n  var fetchBlob = function fetchBlob(\n    url,\n    load,\n    error,\n    progress,\n    abort,\n    headers\n  ) {\n    var request = sendRequest(null, url, {\n      method: 'GET',\n      responseType: 'blob'\n    });\n\n    request.onload = function(xhr) {\n      // get headers\n      var headers = xhr.getAllResponseHeaders();\n\n      // get filename\n      var filename =\n        getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n      // create response\n      load(\n        createResponse(\n          'load',\n          xhr.status,\n          getFileFromBlob(xhr.response, filename),\n          headers\n        )\n      );\n    };\n\n    request.onerror = function(xhr) {\n      error(\n        createResponse(\n          'error',\n          xhr.status,\n          xhr.statusText,\n          xhr.getAllResponseHeaders()\n        )\n      );\n    };\n\n    request.onheaders = function(xhr) {\n      headers(\n        createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders())\n      );\n    };\n\n    request.ontimeout = createTimeoutResponse(error);\n    request.onprogress = progress;\n    request.onabort = abort;\n\n    // should return request\n    return request;\n  };\n\n  var getDomainFromURL = function getDomainFromURL(url) {\n    if (url.indexOf('//') === 0) {\n      url = location.protocol + url;\n    }\n    return url\n      .toLowerCase()\n      .replace('blob:', '')\n      .replace(/([a-z])?:\\/\\//, '$1')\n      .split('/')[0];\n  };\n\n  var isExternalURL = function isExternalURL(url) {\n    return (\n      (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n      getDomainFromURL(location.href) !== getDomainFromURL(url)\n    );\n  };\n\n  var dynamicLabel = function dynamicLabel(label) {\n    return function() {\n      return isFunction(label) ? label.apply(void 0, arguments) : label;\n    };\n  };\n\n  var isMockItem = function isMockItem(item) {\n    return !isFile(item.file);\n  };\n\n  var listUpdated = function listUpdated(dispatch, state) {\n    clearTimeout(state.listUpdateTimeout);\n    state.listUpdateTimeout = setTimeout(function() {\n      dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n    }, 0);\n  };\n\n  var optionalPromise = function optionalPromise(fn) {\n    for (\n      var _len = arguments.length,\n        params = new Array(_len > 1 ? _len - 1 : 0),\n        _key = 1;\n      _key < _len;\n      _key++\n    ) {\n      params[_key - 1] = arguments[_key];\n    }\n    return new Promise(function(resolve) {\n      if (!fn) {\n        return resolve(true);\n      }\n\n      var result = fn.apply(void 0, params);\n\n      if (result == null) {\n        return resolve(true);\n      }\n\n      if (typeof result === 'boolean') {\n        return resolve(result);\n      }\n\n      if (typeof result.then === 'function') {\n        result.then(resolve);\n      }\n    });\n  };\n\n  var sortItems = function sortItems(state, compare) {\n    state.items.sort(function(a, b) {\n      return compare(createItemAPI(a), createItemAPI(b));\n    });\n  };\n\n  // returns item based on state\n  var getItemByQueryFromState = function getItemByQueryFromState(\n    state,\n    itemHandler\n  ) {\n    return function() {\n      var _ref =\n        arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var query = _ref.query,\n        _ref$success = _ref.success,\n        success = _ref$success === void 0 ? function() {} : _ref$success,\n        _ref$failure = _ref.failure,\n        failure = _ref$failure === void 0 ? function() {} : _ref$failure,\n        options = _objectWithoutProperties(_ref, [\n          'query',\n          'success',\n          'failure'\n        ]);\n      var item = getItemByQuery(state.items, query);\n      if (!item) {\n        failure({\n          error: createResponse('error', 0, 'Item not found'),\n\n          file: null\n        });\n\n        return;\n      }\n      itemHandler(item, success, failure, options || {});\n    };\n  };\n\n  var actions = function actions(dispatch, query, state) {\n    return {\n      /**\n       * Aborts all ongoing processes\n       */\n      ABORT_ALL: function ABORT_ALL() {\n        getActiveItems(state.items).forEach(function(item) {\n          item.freeze();\n          item.abortLoad();\n          item.abortProcessing();\n        });\n      },\n\n      /**\n       * Sets initial files\n       */\n      DID_SET_FILES: function DID_SET_FILES(_ref2) {\n        var _ref2$value = _ref2.value,\n          value = _ref2$value === void 0 ? [] : _ref2$value;\n\n        // map values to file objects\n        var files = value.map(function(file) {\n          return {\n            source: file.source ? file.source : file,\n            options: file.options\n          };\n        });\n\n        // loop over files, if file is in list, leave it be, if not, remove\n        // test if items should be moved\n        var activeItems = getActiveItems(state.items);\n\n        activeItems.forEach(function(item) {\n          // if item not is in new value, remove\n          if (\n            !files.find(function(file) {\n              return file.source === item.source || file.source === item.file;\n            })\n          ) {\n            dispatch('REMOVE_ITEM', { query: item, remove: false });\n          }\n        });\n\n        // add new files\n        activeItems = getActiveItems(state.items);\n        files.forEach(function(file, index) {\n          // if file is already in list\n          if (\n            activeItems.find(function(item) {\n              return item.source === file.source || item.file === file.source;\n            })\n          )\n            return;\n\n          // not in list, add\n          dispatch(\n            'ADD_ITEM',\n            Object.assign({}, file, {\n              interactionMethod: InteractionMethod.NONE,\n              index: index\n            })\n          );\n        });\n      },\n\n      DID_UPDATE_ITEM_METADATA: function DID_UPDATE_ITEM_METADATA(_ref3) {\n        var id = _ref3.id;\n\n        // if is called multiple times in close succession we combined all calls together to save resources\n        clearTimeout(state.itemUpdateTimeout);\n        state.itemUpdateTimeout = setTimeout(function() {\n          var item = getItemById(state.items, id);\n\n          // only revert and attempt to upload when we're uploading to a server\n          if (!query('IS_ASYNC')) {\n            // should we update the output data\n            applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n              item: item,\n              query: query\n            }).then(function(shouldPrepareOutput) {\n              if (!shouldPrepareOutput) {\n                return;\n              }\n              dispatch(\n                'REQUEST_PREPARE_OUTPUT',\n                {\n                  query: id,\n                  item: item,\n                  success: function success(file) {\n                    dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                  }\n                },\n                true\n              );\n            });\n\n            return;\n          }\n\n          // for async scenarios\n          var upload = function upload() {\n            // we push this forward a bit so the interface is updated correctly\n            setTimeout(function() {\n              dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n            }, 32);\n          };\n\n          var revert = function revert(doUpload) {\n            item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                query('GET_FORCE_REVERT')\n              )\n              .then(doUpload ? upload : function() {})\n              .catch(function() {});\n          };\n\n          var abort = function abort(doUpload) {\n            item.abortProcessing().then(doUpload ? upload : function() {});\n          };\n\n          // if we should re-upload the file immediately\n          if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n            return revert(state.options.instantUpload);\n          }\n\n          // if currently uploading, cancel upload\n          if (item.status === ItemStatus.PROCESSING) {\n            return abort(state.options.instantUpload);\n          }\n\n          if (state.options.instantUpload) {\n            upload();\n          }\n        }, 0);\n      },\n\n      MOVE_ITEM: function MOVE_ITEM(_ref4) {\n        var query = _ref4.query,\n          index = _ref4.index;\n        var item = getItemByQuery(state.items, query);\n        if (!item) return;\n        var currentIndex = state.items.indexOf(item);\n        index = limit(index, 0, state.items.length - 1);\n        if (currentIndex === index) return;\n        state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n      },\n\n      SORT: function SORT(_ref5) {\n        var compare = _ref5.compare;\n        sortItems(state, compare);\n        dispatch('DID_SORT_ITEMS', {\n          items: query('GET_ACTIVE_ITEMS')\n        });\n      },\n\n      ADD_ITEMS: function ADD_ITEMS(_ref6) {\n        var items = _ref6.items,\n          index = _ref6.index,\n          interactionMethod = _ref6.interactionMethod,\n          _ref6$success = _ref6.success,\n          success = _ref6$success === void 0 ? function() {} : _ref6$success,\n          _ref6$failure = _ref6.failure,\n          failure = _ref6$failure === void 0 ? function() {} : _ref6$failure;\n\n        var currentIndex = index;\n\n        if (index === -1 || typeof index === 'undefined') {\n          var insertLocation = query('GET_ITEM_INSERT_LOCATION');\n          var totalItems = query('GET_TOTAL_ITEMS');\n          currentIndex = insertLocation === 'before' ? 0 : totalItems;\n        }\n\n        var ignoredFiles = query('GET_IGNORED_FILES');\n        var isValidFile = function isValidFile(source) {\n          return isFile(source)\n            ? !ignoredFiles.includes(source.name.toLowerCase())\n            : !isEmpty(source);\n        };\n        var validItems = items.filter(isValidFile);\n\n        var promises = validItems.map(function(source) {\n          return new Promise(function(resolve, reject) {\n            dispatch('ADD_ITEM', {\n              interactionMethod: interactionMethod,\n              source: source.source || source,\n              success: resolve,\n              failure: reject,\n              index: currentIndex++,\n              options: source.options || {}\n            });\n          });\n        });\n\n        Promise.all(promises)\n          .then(success)\n          .catch(failure);\n      },\n\n      /**\n       * @param source\n       * @param index\n       * @param interactionMethod\n       */\n      ADD_ITEM: function ADD_ITEM(_ref7) {\n        var source = _ref7.source,\n          _ref7$index = _ref7.index,\n          index = _ref7$index === void 0 ? -1 : _ref7$index,\n          interactionMethod = _ref7.interactionMethod,\n          _ref7$success = _ref7.success,\n          success = _ref7$success === void 0 ? function() {} : _ref7$success,\n          _ref7$failure = _ref7.failure,\n          failure = _ref7$failure === void 0 ? function() {} : _ref7$failure,\n          _ref7$options = _ref7.options,\n          options = _ref7$options === void 0 ? {} : _ref7$options;\n\n        // if no source supplied\n        if (isEmpty(source)) {\n          failure({\n            error: createResponse('error', 0, 'No source'),\n\n            file: null\n          });\n\n          return;\n        }\n\n        // filter out invalid file items, used to filter dropped directory contents\n        if (\n          isFile(source) &&\n          state.options.ignoredFiles.includes(source.name.toLowerCase())\n        ) {\n          // fail silently\n          return;\n        }\n\n        // test if there's still room in the list of files\n        if (!hasRoomForItem(state)) {\n          // if multiple allowed, we can't replace\n          // or if only a single item is allowed but we're not allowed to replace it we exit\n          if (\n            state.options.allowMultiple ||\n            (!state.options.allowMultiple && !state.options.allowReplace)\n          ) {\n            var error = createResponse('warning', 0, 'Max files');\n\n            dispatch('DID_THROW_MAX_FILES', {\n              source: source,\n              error: error\n            });\n\n            failure({ error: error, file: null });\n\n            return;\n          }\n\n          // let's replace the item\n          // id of first item we're about to remove\n          var _item = getActiveItems(state.items)[0];\n\n          // if has been processed remove it from the server as well\n          if (\n            _item.status === ItemStatus.PROCESSING_COMPLETE ||\n            _item.status === ItemStatus.PROCESSING_REVERT_ERROR\n          ) {\n            var forceRevert = query('GET_FORCE_REVERT');\n            _item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                forceRevert\n              )\n              .then(function() {\n                if (!forceRevert) return;\n\n                // try to add now\n                dispatch('ADD_ITEM', {\n                  source: source,\n                  index: index,\n                  interactionMethod: interactionMethod,\n                  success: success,\n                  failure: failure,\n                  options: options\n                });\n              })\n              .catch(function() {}); // no need to handle this catch state for now\n\n            if (forceRevert) return;\n          }\n\n          // remove first item as it will be replaced by this item\n          dispatch('REMOVE_ITEM', { query: _item.id });\n        }\n\n        // where did the file originate\n        var origin =\n          options.type === 'local'\n            ? FileOrigin.LOCAL\n            : options.type === 'limbo'\n            ? FileOrigin.LIMBO\n            : FileOrigin.INPUT;\n\n        // create a new blank item\n        var item = createItem(\n          // where did this file come from\n          origin,\n\n          // an input file never has a server file reference\n          origin === FileOrigin.INPUT ? null : source,\n\n          // file mock data, if defined\n          options.file\n        );\n\n        // set initial meta data\n        Object.keys(options.metadata || {}).forEach(function(key) {\n          item.setMetadata(key, options.metadata[key]);\n        });\n\n        // created the item, let plugins add methods\n        applyFilters('DID_CREATE_ITEM', item, {\n          query: query,\n          dispatch: dispatch\n        });\n\n        // where to insert new items\n        var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n        // adjust index if is not allowed to pick location\n        if (!state.options.itemInsertLocationFreedom) {\n          index = itemInsertLocation === 'before' ? -1 : state.items.length;\n        }\n\n        // add item to list\n        insertItem(state.items, item, index);\n\n        // sort items in list\n        if (isFunction(itemInsertLocation) && source) {\n          sortItems(state, itemInsertLocation);\n        }\n\n        // get a quick reference to the item id\n        var id = item.id;\n\n        // observe item events\n        item.on('init', function() {\n          dispatch('DID_INIT_ITEM', { id: id });\n        });\n\n        item.on('load-init', function() {\n          dispatch('DID_START_ITEM_LOAD', { id: id });\n        });\n\n        item.on('load-meta', function() {\n          dispatch('DID_UPDATE_ITEM_META', { id: id });\n        });\n\n        item.on('load-progress', function(progress) {\n          dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', {\n            id: id,\n            progress: progress\n          });\n        });\n\n        item.on('load-request-error', function(error) {\n          var mainStatus = dynamicLabel(state.options.labelFileLoadError)(\n            error\n          );\n\n          // is client error, no way to recover\n          if (error.code >= 400 && error.code < 500) {\n            dispatch('DID_THROW_ITEM_INVALID', {\n              id: id,\n              error: error,\n              status: {\n                main: mainStatus,\n                sub: error.code + ' (' + error.body + ')'\n              }\n            });\n\n            // reject the file so can be dealt with through API\n            failure({ error: error, file: createItemAPI(item) });\n            return;\n          }\n\n          // is possible server error, so might be possible to retry\n          dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: mainStatus,\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('load-file-error', function(error) {\n          dispatch('DID_THROW_ITEM_INVALID', {\n            id: id,\n            error: error.status,\n            status: error.status\n          });\n\n          failure({ error: error.status, file: createItemAPI(item) });\n        });\n\n        item.on('load-abort', function() {\n          dispatch('REMOVE_ITEM', { query: id });\n        });\n\n        item.on('load-skip', function() {\n          dispatch('COMPLETE_LOAD_ITEM', {\n            query: id,\n            item: item,\n            data: {\n              source: source,\n              success: success\n            }\n          });\n        });\n\n        item.on('load', function() {\n          var handleAdd = function handleAdd(shouldAdd) {\n            // no should not add this file\n            if (!shouldAdd) {\n              dispatch('REMOVE_ITEM', {\n                query: id\n              });\n\n              return;\n            }\n\n            // now interested in metadata updates\n            item.on('metadata-update', function(change) {\n              dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n            });\n\n            // let plugins decide if the output data should be prepared at this point\n            // means we'll do this and wait for idle state\n            applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n              item: item,\n              query: query\n            }).then(function(shouldPrepareOutput) {\n              var loadComplete = function loadComplete() {\n                dispatch('COMPLETE_LOAD_ITEM', {\n                  query: id,\n                  item: item,\n                  data: {\n                    source: source,\n                    success: success\n                  }\n                });\n\n                listUpdated(dispatch, state);\n              };\n\n              // exit\n              if (shouldPrepareOutput) {\n                // wait for idle state and then run PREPARE_OUTPUT\n                dispatch(\n                  'REQUEST_PREPARE_OUTPUT',\n                  {\n                    query: id,\n                    item: item,\n                    success: function success(file) {\n                      dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                      loadComplete();\n                    }\n                  },\n                  true\n                );\n\n                return;\n              }\n\n              loadComplete();\n            });\n          };\n\n          // item loaded, allow plugins to\n          // - read data (quickly)\n          // - add metadata\n          applyFilterChain('DID_LOAD_ITEM', item, {\n            query: query,\n            dispatch: dispatch\n          })\n            .then(function() {\n              optionalPromise(\n                query('GET_BEFORE_ADD_FILE'),\n                createItemAPI(item)\n              ).then(handleAdd);\n            })\n            .catch(function() {\n              handleAdd(false);\n            });\n        });\n\n        item.on('process-start', function() {\n          dispatch('DID_START_ITEM_PROCESSING', { id: id });\n        });\n\n        item.on('process-progress', function(progress) {\n          dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', {\n            id: id,\n            progress: progress\n          });\n        });\n\n        item.on('process-error', function(error) {\n          dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: dynamicLabel(state.options.labelFileProcessingError)(error),\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('process-revert-error', function(error) {\n          dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: dynamicLabel(state.options.labelFileProcessingRevertError)(\n                error\n              ),\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('process-complete', function(serverFileReference) {\n          dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n            id: id,\n            error: null,\n            serverFileReference: serverFileReference\n          });\n\n          dispatch('DID_DEFINE_VALUE', { id: id, value: serverFileReference });\n        });\n\n        item.on('process-abort', function() {\n          dispatch('DID_ABORT_ITEM_PROCESSING', { id: id });\n        });\n\n        item.on('process-revert', function() {\n          dispatch('DID_REVERT_ITEM_PROCESSING', { id: id });\n          dispatch('DID_DEFINE_VALUE', { id: id, value: null });\n        });\n\n        // let view know the item has been inserted\n        dispatch('DID_ADD_ITEM', {\n          id: id,\n          index: index,\n          interactionMethod: interactionMethod\n        });\n\n        listUpdated(dispatch, state);\n\n        // start loading the source\n        var _ref8 = state.options.server || {},\n          url = _ref8.url,\n          load = _ref8.load,\n          restore = _ref8.restore,\n          fetch = _ref8.fetch;\n\n        item.load(\n          source,\n\n          // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n          createFileLoader(\n            origin === FileOrigin.INPUT\n              ? // input, if is remote, see if should use custom fetch, else use default fetchBlob\n                isString(source) && isExternalURL(source)\n                ? fetch\n                  ? createFetchFunction(url, fetch)\n                  : fetchBlob // remote url\n                : fetchBlob // try to fetch url\n              : // limbo or local\n              origin === FileOrigin.LIMBO\n              ? createFetchFunction(url, restore) // limbo\n              : createFetchFunction(url, load) // local\n          ),\n\n          // called when the file is loaded so it can be piped through the filters\n          function(file, success, error) {\n            // let's process the file\n            applyFilterChain('LOAD_FILE', file, { query: query })\n              .then(success)\n              .catch(error);\n          }\n        );\n      },\n\n      REQUEST_PREPARE_OUTPUT: function REQUEST_PREPARE_OUTPUT(_ref9) {\n        var item = _ref9.item,\n          success = _ref9.success,\n          _ref9$failure = _ref9.failure,\n          failure = _ref9$failure === void 0 ? function() {} : _ref9$failure;\n\n        // error response if item archived\n        var err = {\n          error: createResponse('error', 0, 'Item not found'),\n\n          file: null\n        };\n\n        // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n        if (item.archived) return failure(err);\n\n        // allow plugins to alter the file data\n        applyFilterChain('PREPARE_OUTPUT', item.file, {\n          query: query,\n          item: item\n        }).then(function(result) {\n          applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, {\n            query: query,\n            item: item\n          }).then(function(result) {\n            // don't handle archived items, an item could have been archived (load aborted) while being prepared\n            if (item.archived) return failure(err);\n\n            // we done!\n            success(result);\n          });\n        });\n      },\n\n      COMPLETE_LOAD_ITEM: function COMPLETE_LOAD_ITEM(_ref10) {\n        var item = _ref10.item,\n          data = _ref10.data;\n        var success = data.success,\n          source = data.source;\n\n        // sort items in list\n        var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n        if (isFunction(itemInsertLocation) && source) {\n          sortItems(state, itemInsertLocation);\n        }\n\n        // let interface know the item has loaded\n        dispatch('DID_LOAD_ITEM', {\n          id: item.id,\n          error: null,\n          serverFileReference: item.origin === FileOrigin.INPUT ? null : source\n        });\n\n        // item has been successfully loaded and added to the\n        // list of items so can now be safely returned for use\n        success(createItemAPI(item));\n\n        // if this is a local server file we need to show a different state\n        if (item.origin === FileOrigin.LOCAL) {\n          dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n          return;\n        }\n\n        // if is a temp server file we prevent async upload call here (as the file is already on the server)\n        if (item.origin === FileOrigin.LIMBO) {\n          dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n            id: item.id,\n            error: null,\n            serverFileReference: source\n          });\n\n          dispatch('DID_DEFINE_VALUE', {\n            id: item.id,\n            value: source\n          });\n\n          return;\n        }\n\n        // id we are allowed to upload the file immediately, lets do it\n        if (query('IS_ASYNC') && state.options.instantUpload) {\n          dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n        }\n      },\n\n      RETRY_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n        // try loading the source one more time\n        item.retryLoad();\n      }),\n\n      REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, function(\n        item,\n        _success,\n        failure\n      ) {\n        dispatch(\n          'REQUEST_PREPARE_OUTPUT',\n          {\n            query: item.id,\n            item: item,\n            success: function success(file) {\n              dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n              _success({\n                file: item,\n                output: file\n              });\n            },\n            failure: failure\n          },\n          true\n        );\n      }),\n\n      REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n        item,\n        success,\n        failure\n      ) {\n        // cannot be queued (or is already queued)\n        var itemCanBeQueuedForProcessing =\n          // waiting for something\n          item.status === ItemStatus.IDLE ||\n          // processing went wrong earlier\n          item.status === ItemStatus.PROCESSING_ERROR;\n\n        // not ready to be processed\n        if (!itemCanBeQueuedForProcessing) {\n          var processNow = function processNow() {\n            return dispatch('REQUEST_ITEM_PROCESSING', {\n              query: item,\n              success: success,\n              failure: failure\n            });\n          };\n\n          var process = function process() {\n            return document.hidden ? processNow() : setTimeout(processNow, 32);\n          };\n\n          // if already done processing or tried to revert but didn't work, try again\n          if (\n            item.status === ItemStatus.PROCESSING_COMPLETE ||\n            item.status === ItemStatus.PROCESSING_REVERT_ERROR\n          ) {\n            item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                query('GET_FORCE_REVERT')\n              )\n              .then(process)\n              .catch(function() {}); // don't continue with processing if something went wrong\n          } else if (item.status === ItemStatus.PROCESSING) {\n            item.abortProcessing().then(process);\n          }\n\n          return;\n        }\n\n        // already queued for processing\n        if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n        item.requestProcessing();\n\n        dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n        dispatch(\n          'PROCESS_ITEM',\n          { query: item, success: success, failure: failure },\n          true\n        );\n      }),\n\n      PROCESS_ITEM: getItemByQueryFromState(state, function(\n        item,\n        success,\n        failure\n      ) {\n        var maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n        var totalCurrentUploads = query(\n          'GET_ITEMS_BY_STATUS',\n          ItemStatus.PROCESSING\n        ).length;\n\n        // queue and wait till queue is freed up\n        if (totalCurrentUploads === maxParallelUploads) {\n          // queue for later processing\n          state.processingQueue.push({\n            id: item.id,\n            success: success,\n            failure: failure\n          });\n\n          // stop it!\n          return;\n        }\n\n        // if was not queued or is already processing exit here\n        if (item.status === ItemStatus.PROCESSING) return;\n\n        var processNext = function processNext() {\n          // process queueud items\n          var queueEntry = state.processingQueue.shift();\n\n          // no items left\n          if (!queueEntry) return;\n\n          // get item reference\n          var id = queueEntry.id,\n            success = queueEntry.success,\n            failure = queueEntry.failure;\n          var itemReference = getItemByQuery(state.items, id);\n\n          // if item was archived while in queue, jump to next\n          if (!itemReference || itemReference.archived) {\n            processNext();\n            return;\n          }\n\n          // process queued item\n          dispatch(\n            'PROCESS_ITEM',\n            { query: id, success: success, failure: failure },\n            true\n          );\n        };\n\n        // we done function\n        item.onOnce('process-complete', function() {\n          success(createItemAPI(item));\n          processNext();\n\n          // All items processed? No errors?\n          var allItemsProcessed =\n            query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE)\n              .length === state.items.length;\n          if (allItemsProcessed) {\n            dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n          }\n        });\n\n        // we error function\n        item.onOnce('process-error', function(error) {\n          failure({ error: error, file: createItemAPI(item) });\n          processNext();\n        });\n\n        // start file processing\n        var options = state.options;\n        item.process(\n          createFileProcessor(\n            createProcessorFunction(\n              options.server.url,\n              options.server.process,\n              options.name,\n              {\n                chunkTransferId: item.transferId,\n                chunkServer: options.server.patch,\n                chunkUploads: options.chunkUploads,\n                chunkForce: options.chunkForce,\n                chunkSize: options.chunkSize,\n                chunkRetryDelays: options.chunkRetryDelays\n              }\n            )\n          ),\n\n          // called when the file is about to be processed so it can be piped through the transform filters\n          function(file, success, error) {\n            // allow plugins to alter the file data\n            applyFilterChain('PREPARE_OUTPUT', file, {\n              query: query,\n              item: item\n            })\n              .then(function(file) {\n                dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n\n                success(file);\n              })\n              .catch(error);\n          }\n        );\n      }),\n\n      RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n      }),\n\n      REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, function(item) {\n        optionalPromise(\n          query('GET_BEFORE_REMOVE_FILE'),\n          createItemAPI(item)\n        ).then(function(shouldRemove) {\n          if (!shouldRemove) {\n            return;\n          }\n          dispatch('REMOVE_ITEM', { query: item });\n        });\n      }),\n\n      RELEASE_ITEM: getItemByQueryFromState(state, function(item) {\n        item.release();\n      }),\n\n      REMOVE_ITEM: getItemByQueryFromState(state, function(\n        item,\n        success,\n        failure,\n        options\n      ) {\n        var removeFromView = function removeFromView() {\n          // get id reference\n          var id = item.id;\n\n          // archive the item, this does not remove it from the list\n          getItemById(state.items, id).archive();\n\n          // tell the view the item has been removed\n          dispatch('DID_REMOVE_ITEM', { error: null, id: id, item: item });\n\n          // now the list has been modified\n          listUpdated(dispatch, state);\n\n          // correctly removed\n          success(createItemAPI(item));\n        };\n\n        // if this is a local file and the server.remove function has been configured, send source there so dev can remove file from server\n        var server = state.options.server;\n        if (\n          item.origin === FileOrigin.LOCAL &&\n          server &&\n          isFunction(server.remove) &&\n          options.remove !== false\n        ) {\n          dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n          server.remove(\n            item.source,\n            function() {\n              return removeFromView();\n            },\n            function(status) {\n              dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                id: item.id,\n                error: createResponse('error', 0, status, null),\n                status: {\n                  main: dynamicLabel(state.options.labelFileRemoveError)(\n                    status\n                  ),\n                  sub: state.options.labelTapToRetry\n                }\n              });\n            }\n          );\n        } else {\n          // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n          if (\n            options.revert &&\n            item.origin !== FileOrigin.LOCAL &&\n            item.serverId !== null\n          ) {\n            item.revert(\n              createRevertFunction(\n                state.options.server.url,\n                state.options.server.revert\n              ),\n              query('GET_FORCE_REVERT')\n            );\n          }\n\n          // can now safely remove from view\n          removeFromView();\n        }\n      }),\n\n      ABORT_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n        item.abortLoad();\n      }),\n\n      ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        // test if is already processed\n        if (item.serverId) {\n          dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n          return;\n        }\n\n        // abort\n        item.abortProcessing().then(function() {\n          var shouldRemove = state.options.instantUpload;\n          if (shouldRemove) {\n            dispatch('REMOVE_ITEM', { query: item.id });\n          }\n        });\n      }),\n\n      REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n        item\n      ) {\n        // not instant uploading, revert immediately\n        if (!state.options.instantUpload) {\n          dispatch('REVERT_ITEM_PROCESSING', { query: item });\n          return;\n        }\n\n        // if we're instant uploading the file will also be removed if we revert,\n        // so if a before remove file hook is defined we need to run it now\n        var handleRevert = function handleRevert(shouldRevert) {\n          if (!shouldRevert) return;\n          dispatch('REVERT_ITEM_PROCESSING', { query: item });\n        };\n\n        var fn = query('GET_BEFORE_REMOVE_FILE');\n        if (!fn) {\n          return handleRevert(true);\n        }\n\n        var requestRemoveResult = fn(createItemAPI(item));\n        if (requestRemoveResult == null) {\n          // undefined or null\n          return handleRevert(true);\n        }\n\n        if (typeof requestRemoveResult === 'boolean') {\n          return handleRevert(requestRemoveResult);\n        }\n\n        if (typeof requestRemoveResult.then === 'function') {\n          requestRemoveResult.then(handleRevert);\n        }\n      }),\n\n      REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        item\n          .revert(\n            createRevertFunction(\n              state.options.server.url,\n              state.options.server.revert\n            ),\n            query('GET_FORCE_REVERT')\n          )\n          .then(function() {\n            var shouldRemove = state.options.instantUpload || isMockItem(item);\n            if (shouldRemove) {\n              dispatch('REMOVE_ITEM', { query: item.id });\n            }\n          })\n          .catch(function() {});\n      }),\n\n      SET_OPTIONS: function SET_OPTIONS(_ref11) {\n        var options = _ref11.options;\n        forin(options, function(key, value) {\n          dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n            value: value\n          });\n        });\n      }\n    };\n  };\n\n  var formatFilename = function formatFilename(name) {\n    return name;\n  };\n\n  var createElement$1 = function createElement(tagName) {\n    return document.createElement(tagName);\n  };\n\n  var text = function text(node, value) {\n    var textNode = node.childNodes[0];\n    if (!textNode) {\n      textNode = document.createTextNode(value);\n      node.appendChild(textNode);\n    } else if (value !== textNode.nodeValue) {\n      textNode.nodeValue = value;\n    }\n  };\n\n  var polarToCartesian = function polarToCartesian(\n    centerX,\n    centerY,\n    radius,\n    angleInDegrees\n  ) {\n    var angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n    return {\n      x: centerX + radius * Math.cos(angleInRadians),\n      y: centerY + radius * Math.sin(angleInRadians)\n    };\n  };\n\n  var describeArc = function describeArc(\n    x,\n    y,\n    radius,\n    startAngle,\n    endAngle,\n    arcSweep\n  ) {\n    var start = polarToCartesian(x, y, radius, endAngle);\n    var end = polarToCartesian(x, y, radius, startAngle);\n    return [\n      'M',\n      start.x,\n      start.y,\n      'A',\n      radius,\n      radius,\n      0,\n      arcSweep,\n      0,\n      end.x,\n      end.y\n    ].join(' ');\n  };\n\n  var percentageArc = function percentageArc(x, y, radius, from, to) {\n    var arcSweep = 1;\n    if (to > from && to - from <= 0.5) {\n      arcSweep = 0;\n    }\n    if (from > to && from - to >= 0.5) {\n      arcSweep = 0;\n    }\n    return describeArc(\n      x,\n      y,\n      radius,\n      Math.min(0.9999, from) * 360,\n      Math.min(0.9999, to) * 360,\n      arcSweep\n    );\n  };\n\n  var create = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    // start at 0\n    props.spin = false;\n    props.progress = 0;\n    props.opacity = 0;\n\n    // svg\n    var svg = createElement('svg');\n    root.ref.path = createElement('path', {\n      'stroke-width': 2,\n      'stroke-linecap': 'round'\n    });\n\n    svg.appendChild(root.ref.path);\n\n    root.ref.svg = svg;\n\n    root.appendChild(svg);\n  };\n\n  var write = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n\n    if (props.opacity === 0) {\n      return;\n    }\n\n    if (props.align) {\n      root.element.dataset.align = props.align;\n    }\n\n    // get width of stroke\n    var ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n    // calculate size of ring\n    var size = root.rect.element.width * 0.5;\n\n    // ring state\n    var ringFrom = 0;\n    var ringTo = 0;\n\n    // now in busy mode\n    if (props.spin) {\n      ringFrom = 0;\n      ringTo = 0.5;\n    } else {\n      ringFrom = 0;\n      ringTo = props.progress;\n    }\n\n    // get arc path\n    var coordinates = percentageArc(\n      size,\n      size,\n      size - ringStrokeWidth,\n      ringFrom,\n      ringTo\n    );\n\n    // update progress bar\n    attr(root.ref.path, 'd', coordinates);\n\n    // hide while contains 0 value\n    attr(\n      root.ref.path,\n      'stroke-opacity',\n      props.spin || props.progress > 0 ? 1 : 0\n    );\n  };\n\n  var progressIndicator = createView({\n    tag: 'div',\n    name: 'progress-indicator',\n    ignoreRectUpdate: true,\n    ignoreRect: true,\n    create: create,\n    write: write,\n    mixins: {\n      apis: ['progress', 'spin', 'align'],\n      styles: ['opacity'],\n      animations: {\n        opacity: { type: 'tween', duration: 500 },\n        progress: {\n          type: 'spring',\n          stiffness: 0.95,\n          damping: 0.65,\n          mass: 10\n        }\n      }\n    }\n  });\n\n  var create$1 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.element.innerHTML =\n      (props.icon || '') + ('<span>' + props.label + '</span>');\n\n    props.isDisabled = false;\n  };\n\n  var write$1 = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    var isDisabled = props.isDisabled;\n    var shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n    if (shouldDisable && !isDisabled) {\n      props.isDisabled = true;\n      attr(root.element, 'disabled', 'disabled');\n    } else if (!shouldDisable && isDisabled) {\n      props.isDisabled = false;\n      root.element.removeAttribute('disabled');\n    }\n  };\n\n  var fileActionButton = createView({\n    tag: 'button',\n    attributes: {\n      type: 'button'\n    },\n\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'file-action-button',\n    mixins: {\n      apis: ['label'],\n      styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        translateX: 'spring',\n        translateY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      },\n\n      listeners: true\n    },\n\n    create: create$1,\n    write: write$1\n  });\n\n  var toNaturalFileSize = function toNaturalFileSize(bytes) {\n    var decimalSeparator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '.';\n    var base =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n    // no negative byte sizes\n    bytes = Math.round(Math.abs(bytes));\n\n    var KB = base;\n    var MB = base * base;\n    var GB = base * base * base;\n\n    // just bytes\n    if (bytes < KB) {\n      return bytes + ' bytes';\n    }\n\n    // kilobytes\n    if (bytes < MB) {\n      return Math.floor(bytes / KB) + ' KB';\n    }\n\n    // megabytes\n    if (bytes < GB) {\n      return removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator) + ' MB';\n    }\n\n    // gigabytes\n    return removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator) + ' GB';\n  };\n\n  var removeDecimalsWhenZero = function removeDecimalsWhenZero(\n    value,\n    decimalCount,\n    separator\n  ) {\n    return value\n      .toFixed(decimalCount)\n      .split('.')\n      .filter(function(part) {\n        return part !== '0';\n      })\n      .join(separator);\n  };\n\n  var create$2 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    // filename\n    var fileName = createElement$1('span');\n    fileName.className = 'filepond--file-info-main';\n    // hide for screenreaders\n    // the file is contained in a fieldset with legend that contains the filename\n    // no need to read it twice\n    attr(fileName, 'aria-hidden', 'true');\n    root.appendChild(fileName);\n    root.ref.fileName = fileName;\n\n    // filesize\n    var fileSize = createElement$1('span');\n    fileSize.className = 'filepond--file-info-sub';\n    root.appendChild(fileSize);\n    root.ref.fileSize = fileSize;\n\n    // set initial values\n    text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n    text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n  };\n\n  var updateFile = function updateFile(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    text(\n      root.ref.fileSize,\n      toNaturalFileSize(\n        root.query('GET_ITEM_SIZE', props.id),\n        '.',\n        root.query('GET_FILE_SIZE_BASE')\n      )\n    );\n\n    text(\n      root.ref.fileName,\n      formatFilename(root.query('GET_ITEM_NAME', props.id))\n    );\n  };\n\n  var updateFileSizeOnError = function updateFileSizeOnError(_ref3) {\n    var root = _ref3.root,\n      props = _ref3.props;\n    // if size is available don't fallback to unknown size message\n    if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n      return;\n    }\n\n    text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n  };\n\n  var fileInfo = createView({\n    name: 'file-info',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: updateFile,\n      DID_UPDATE_ITEM_META: updateFile,\n      DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n      DID_THROW_ITEM_INVALID: updateFileSizeOnError\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    create: create$2,\n    mixins: {\n      styles: ['translateX', 'translateY'],\n      animations: {\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var toPercentage = function toPercentage(value) {\n    return Math.round(value * 100);\n  };\n\n  var create$3 = function create(_ref) {\n    var root = _ref.root;\n\n    // main status\n    var main = createElement$1('span');\n    main.className = 'filepond--file-status-main';\n    root.appendChild(main);\n    root.ref.main = main;\n\n    // sub status\n    var sub = createElement$1('span');\n    sub.className = 'filepond--file-status-sub';\n    root.appendChild(sub);\n    root.ref.sub = sub;\n\n    didSetItemLoadProgress({ root: root, action: { progress: null } });\n  };\n\n  var didSetItemLoadProgress = function didSetItemLoadProgress(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    var title =\n      action.progress === null\n        ? root.query('GET_LABEL_FILE_LOADING')\n        : root.query('GET_LABEL_FILE_LOADING') +\n          ' ' +\n          toPercentage(action.progress) +\n          '%';\n\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didSetItemProcessProgress = function didSetItemProcessProgress(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    var title =\n      action.progress === null\n        ? root.query('GET_LABEL_FILE_PROCESSING')\n        : root.query('GET_LABEL_FILE_PROCESSING') +\n          ' ' +\n          toPercentage(action.progress) +\n          '%';\n\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didRequestItemProcessing = function didRequestItemProcessing(_ref4) {\n    var root = _ref4.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didAbortItemProcessing = function didAbortItemProcessing(_ref5) {\n    var root = _ref5.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n  };\n\n  var didCompleteItemProcessing = function didCompleteItemProcessing(_ref6) {\n    var root = _ref6.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n  };\n\n  var clear = function clear(_ref7) {\n    var root = _ref7.root;\n    text(root.ref.main, '');\n    text(root.ref.sub, '');\n  };\n\n  var error = function error(_ref8) {\n    var root = _ref8.root,\n      action = _ref8.action;\n    text(root.ref.main, action.status.main);\n    text(root.ref.sub, action.status.sub);\n  };\n\n  var fileStatus = createView({\n    name: 'file-status',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: clear,\n      DID_REVERT_ITEM_PROCESSING: clear,\n      DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n      DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n      DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n      DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n      DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n      DID_THROW_ITEM_LOAD_ERROR: error,\n      DID_THROW_ITEM_INVALID: error,\n      DID_THROW_ITEM_PROCESSING_ERROR: error,\n      DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n      DID_THROW_ITEM_REMOVE_ERROR: error\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    create: create$3,\n    mixins: {\n      styles: ['translateX', 'translateY', 'opacity'],\n      animations: {\n        opacity: { type: 'tween', duration: 250 },\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  /**\n   * Button definitions for the file view\n   */\n\n  var Buttons = {\n    AbortItemLoad: {\n      label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n      action: 'ABORT_ITEM_LOAD',\n      className: 'filepond--action-abort-item-load',\n      align: 'LOAD_INDICATOR_POSITION' // right\n    },\n    RetryItemLoad: {\n      label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n      action: 'RETRY_ITEM_LOAD',\n      icon: 'GET_ICON_RETRY',\n      className: 'filepond--action-retry-item-load',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RemoveItem: {\n      label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n      action: 'REQUEST_REMOVE_ITEM',\n      icon: 'GET_ICON_REMOVE',\n      className: 'filepond--action-remove-item',\n      align: 'BUTTON_REMOVE_ITEM_POSITION' // left\n    },\n    ProcessItem: {\n      label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n      action: 'REQUEST_ITEM_PROCESSING',\n      icon: 'GET_ICON_PROCESS',\n      className: 'filepond--action-process-item',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    AbortItemProcessing: {\n      label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n      action: 'ABORT_ITEM_PROCESSING',\n      className: 'filepond--action-abort-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RetryItemProcessing: {\n      label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n      action: 'RETRY_ITEM_PROCESSING',\n      icon: 'GET_ICON_RETRY',\n      className: 'filepond--action-retry-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RevertItemProcessing: {\n      label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n      action: 'REQUEST_REVERT_ITEM_PROCESSING',\n      icon: 'GET_ICON_UNDO',\n      className: 'filepond--action-revert-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    }\n  };\n\n  // make a list of buttons, we can then remove buttons from this list if they're disabled\n  var ButtonKeys = [];\n  forin(Buttons, function(key) {\n    ButtonKeys.push(key);\n  });\n\n  var calculateFileInfoOffset = function calculateFileInfoOffset(root) {\n    var buttonRect = root.ref.buttonRemoveItem.rect.element;\n    return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n  };\n\n  var calculateButtonWidth = function calculateButtonWidth(root) {\n    var buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n    return buttonRect.width;\n  };\n\n  // Force on full pixels so text stays crips\n  var calculateFileVerticalCenterOffset = function calculateFileVerticalCenterOffset(\n    root\n  ) {\n    return Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\n  };\n  var calculateFileHorizontalCenterOffset = function calculateFileHorizontalCenterOffset(\n    root\n  ) {\n    return Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n  };\n\n  var getLoadIndicatorAlignment = function getLoadIndicatorAlignment(root) {\n    return root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\n  };\n  var getProcessIndicatorAlignment = function getProcessIndicatorAlignment(\n    root\n  ) {\n    return root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\n  };\n  var getRemoveIndicatorAligment = function getRemoveIndicatorAligment(root) {\n    return root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n  };\n\n  var DefaultStyle = {\n    buttonAbortItemLoad: { opacity: 0 },\n    buttonRetryItemLoad: { opacity: 0 },\n    buttonRemoveItem: { opacity: 0 },\n    buttonProcessItem: { opacity: 0 },\n    buttonAbortItemProcessing: { opacity: 0 },\n    buttonRetryItemProcessing: { opacity: 0 },\n    buttonRevertItemProcessing: { opacity: 0 },\n    loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n    processProgressIndicator: {\n      opacity: 0,\n      align: getProcessIndicatorAlignment\n    },\n    processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n    info: { translateX: 0, translateY: 0, opacity: 0 },\n    status: { translateX: 0, translateY: 0, opacity: 0 }\n  };\n\n  var IdleStyle = {\n    buttonRemoveItem: { opacity: 1 },\n    buttonProcessItem: { opacity: 1 },\n    info: { translateX: calculateFileInfoOffset },\n    status: { translateX: calculateFileInfoOffset }\n  };\n\n  var ProcessingStyle = {\n    buttonAbortItemProcessing: { opacity: 1 },\n    processProgressIndicator: { opacity: 1 },\n    status: { opacity: 1 }\n  };\n\n  var StyleMap = {\n    DID_THROW_ITEM_INVALID: {\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { translateX: calculateFileInfoOffset, opacity: 1 }\n    },\n\n    DID_START_ITEM_LOAD: {\n      buttonAbortItemLoad: { opacity: 1 },\n      loadProgressIndicator: { opacity: 1 },\n      status: { opacity: 1 }\n    },\n\n    DID_THROW_ITEM_LOAD_ERROR: {\n      buttonRetryItemLoad: { opacity: 1 },\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1 }\n    },\n\n    DID_START_ITEM_REMOVE: {\n      processProgressIndicator: {\n        opacity: 1,\n        align: getRemoveIndicatorAligment\n      },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 0 }\n    },\n\n    DID_THROW_ITEM_REMOVE_ERROR: {\n      processProgressIndicator: {\n        opacity: 0,\n        align: getRemoveIndicatorAligment\n      },\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1, translateX: calculateFileInfoOffset }\n    },\n\n    DID_LOAD_ITEM: IdleStyle,\n    DID_LOAD_LOCAL_ITEM: {\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { translateX: calculateFileInfoOffset }\n    },\n\n    DID_START_ITEM_PROCESSING: ProcessingStyle,\n    DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n    DID_COMPLETE_ITEM_PROCESSING: {\n      buttonRevertItemProcessing: { opacity: 1 },\n      info: { opacity: 1 },\n      status: { opacity: 1 }\n    },\n\n    DID_THROW_ITEM_PROCESSING_ERROR: {\n      buttonRemoveItem: { opacity: 1 },\n      buttonRetryItemProcessing: { opacity: 1 },\n      status: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset }\n    },\n\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n      buttonRevertItemProcessing: { opacity: 1 },\n      status: { opacity: 1 },\n      info: { opacity: 1 }\n    },\n\n    DID_ABORT_ITEM_PROCESSING: {\n      buttonRemoveItem: { opacity: 1 },\n      buttonProcessItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1 }\n    },\n\n    DID_REVERT_ITEM_PROCESSING: IdleStyle\n  };\n\n  // complete indicator view\n  var processingCompleteIndicatorView = createView({\n    create: function create(_ref) {\n      var root = _ref.root;\n      root.element.innerHTML = root.query('GET_ICON_DONE');\n    },\n    name: 'processing-complete-indicator',\n    ignoreRect: true,\n    mixins: {\n      styles: ['scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      }\n    }\n  });\n\n  /**\n   * Creates the file view\n   */\n  var create$4 = function create(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    var id = props.id;\n\n    // allow reverting upload\n    var allowRevert = root.query('GET_ALLOW_REVERT');\n\n    // allow remove file\n    var allowRemove = root.query('GET_ALLOW_REMOVE');\n\n    // allow processing upload\n    var allowProcess = root.query('GET_ALLOW_PROCESS');\n\n    // is instant uploading, need this to determine the icon of the undo button\n    var instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n    // is async set up\n    var isAsync = root.query('IS_ASYNC');\n\n    // should align remove item buttons\n    var alignRemoveItemButton = root.query(\n      'GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN'\n    );\n\n    // enabled buttons array\n    var buttonFilter;\n    if (isAsync) {\n      if (allowProcess && !allowRevert) {\n        // only remove revert button\n        buttonFilter = function buttonFilter(key) {\n          return !/RevertItemProcessing/.test(key);\n        };\n      } else if (!allowProcess && allowRevert) {\n        // only remove process button\n        buttonFilter = function buttonFilter(key) {\n          return !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(\n            key\n          );\n        };\n      } else if (!allowProcess && !allowRevert) {\n        // remove all process buttons\n        buttonFilter = function buttonFilter(key) {\n          return !/Process/.test(key);\n        };\n      }\n    } else {\n      // no process controls available\n      buttonFilter = function buttonFilter(key) {\n        return !/Process/.test(key);\n      };\n    }\n\n    var enabledButtons = buttonFilter\n      ? ButtonKeys.filter(buttonFilter)\n      : ButtonKeys.concat();\n\n    // update icon and label for revert button when instant uploading\n    if (instantUpload && allowRevert) {\n      Buttons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n      Buttons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n    }\n\n    // remove last button (revert) if not allowed\n    if (isAsync && !allowRevert) {\n      var map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n      map.info.translateX = calculateFileHorizontalCenterOffset;\n      map.info.translateY = calculateFileVerticalCenterOffset;\n      map.status.translateY = calculateFileVerticalCenterOffset;\n      map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    // should align center\n    if (isAsync && !allowProcess) {\n      [\n        'DID_START_ITEM_PROCESSING',\n        'DID_REQUEST_ITEM_PROCESSING',\n        'DID_UPDATE_ITEM_PROCESS_PROGRESS',\n        'DID_THROW_ITEM_PROCESSING_ERROR'\n      ].forEach(function(key) {\n        StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n      });\n      StyleMap[\n        'DID_THROW_ITEM_PROCESSING_ERROR'\n      ].status.translateX = calculateButtonWidth;\n    }\n\n    // move remove button to right\n    if (alignRemoveItemButton && allowRevert) {\n      Buttons['RevertItemProcessing'].align = 'BUTTON_REMOVE_ITEM_POSITION';\n      var _map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n      _map.info.translateX = calculateFileInfoOffset;\n      _map.status.translateY = calculateFileVerticalCenterOffset;\n      _map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    if (!allowRemove) {\n      Buttons['RemoveItem'].disabled = true;\n    }\n\n    // create the button views\n    forin(Buttons, function(key, definition) {\n      // create button\n      var buttonView = root.createChildView(fileActionButton, {\n        label: root.query(definition.label),\n        icon: root.query(definition.icon),\n        opacity: 0\n      });\n\n      // should be appended?\n      if (enabledButtons.includes(key)) {\n        root.appendChildView(buttonView);\n      }\n\n      // toggle\n      if (definition.disabled) {\n        buttonView.element.setAttribute('disabled', 'disabled');\n        buttonView.element.setAttribute('hidden', 'hidden');\n      }\n\n      // add position attribute\n      buttonView.element.dataset.align = root.query(\n        'GET_STYLE_' + definition.align\n      );\n\n      // add class\n      buttonView.element.classList.add(definition.className);\n\n      // handle interactions\n      buttonView.on('click', function(e) {\n        e.stopPropagation();\n        if (definition.disabled) return;\n        root.dispatch(definition.action, { query: id });\n      });\n\n      // set reference\n      root.ref['button' + key] = buttonView;\n    });\n\n    // checkmark\n    root.ref.processingCompleteIndicator = root.appendChildView(\n      root.createChildView(processingCompleteIndicatorView)\n    );\n    root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n      'GET_STYLE_BUTTON_PROCESS_ITEM_POSITION'\n    );\n\n    // create file info view\n    root.ref.info = root.appendChildView(\n      root.createChildView(fileInfo, { id: id })\n    );\n\n    // create file status view\n    root.ref.status = root.appendChildView(\n      root.createChildView(fileStatus, { id: id })\n    );\n\n    // add progress indicators\n    var loadIndicatorView = root.appendChildView(\n      root.createChildView(progressIndicator, {\n        opacity: 0,\n        align: root.query('GET_STYLE_LOAD_INDICATOR_POSITION')\n      })\n    );\n\n    loadIndicatorView.element.classList.add('filepond--load-indicator');\n    root.ref.loadProgressIndicator = loadIndicatorView;\n\n    var progressIndicatorView = root.appendChildView(\n      root.createChildView(progressIndicator, {\n        opacity: 0,\n        align: root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION')\n      })\n    );\n\n    progressIndicatorView.element.classList.add('filepond--process-indicator');\n    root.ref.processProgressIndicator = progressIndicatorView;\n\n    // current active styles\n    root.ref.activeStyles = [];\n  };\n\n  var write$2 = function write(_ref3) {\n    var root = _ref3.root,\n      actions = _ref3.actions,\n      props = _ref3.props;\n\n    // route actions\n    route({ root: root, actions: actions, props: props });\n\n    // select last state change action\n    var action = actions\n      .concat()\n      .filter(function(action) {\n        return /^DID_/.test(action.type);\n      })\n      .reverse()\n      .find(function(action) {\n        return StyleMap[action.type];\n      });\n\n    // a new action happened, let's get the matching styles\n    if (action) {\n      // define new active styles\n      root.ref.activeStyles = [];\n\n      var stylesToApply = StyleMap[action.type];\n      forin(DefaultStyle, function(name, defaultStyles) {\n        // get reference to control\n        var control = root.ref[name];\n\n        // loop over all styles for this control\n        forin(defaultStyles, function(key, defaultValue) {\n          var value =\n            stylesToApply[name] &&\n            typeof stylesToApply[name][key] !== 'undefined'\n              ? stylesToApply[name][key]\n              : defaultValue;\n          root.ref.activeStyles.push({\n            control: control,\n            key: key,\n            value: value\n          });\n        });\n      });\n    }\n\n    // apply active styles to element\n    root.ref.activeStyles.forEach(function(_ref4) {\n      var control = _ref4.control,\n        key = _ref4.key,\n        value = _ref4.value;\n      control[key] = typeof value === 'function' ? value(root) : value;\n    });\n  };\n\n  var route = createRoute({\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(\n      _ref5\n    ) {\n      var root = _ref5.root,\n        action = _ref5.action;\n      root.ref.buttonAbortItemProcessing.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(\n      _ref6\n    ) {\n      var root = _ref6.root,\n        action = _ref6.action;\n      root.ref.buttonAbortItemLoad.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(\n      _ref7\n    ) {\n      var root = _ref7.root,\n        action = _ref7.action;\n      root.ref.buttonAbortItemRemoval.label = action.value;\n    },\n    DID_REQUEST_ITEM_PROCESSING: function DID_REQUEST_ITEM_PROCESSING(_ref8) {\n      var root = _ref8.root;\n      root.ref.processProgressIndicator.spin = true;\n      root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_LOAD: function DID_START_ITEM_LOAD(_ref9) {\n      var root = _ref9.root;\n      root.ref.loadProgressIndicator.spin = true;\n      root.ref.loadProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_REMOVE: function DID_START_ITEM_REMOVE(_ref10) {\n      var root = _ref10.root;\n      root.ref.processProgressIndicator.spin = true;\n      root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_UPDATE_ITEM_LOAD_PROGRESS: function DID_UPDATE_ITEM_LOAD_PROGRESS(\n      _ref11\n    ) {\n      var root = _ref11.root,\n        action = _ref11.action;\n      root.ref.loadProgressIndicator.spin = false;\n      root.ref.loadProgressIndicator.progress = action.progress;\n    },\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: function DID_UPDATE_ITEM_PROCESS_PROGRESS(\n      _ref12\n    ) {\n      var root = _ref12.root,\n        action = _ref12.action;\n      root.ref.processProgressIndicator.spin = false;\n      root.ref.processProgressIndicator.progress = action.progress;\n    }\n  });\n\n  var file = createView({\n    create: create$4,\n    write: write$2,\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    name: 'file'\n  });\n\n  /**\n   * Creates the file view\n   */\n  var create$5 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // filename\n    root.ref.fileName = createElement$1('legend');\n    root.appendChild(root.ref.fileName);\n\n    // file appended\n    root.ref.file = root.appendChildView(\n      root.createChildView(file, { id: props.id })\n    );\n\n    // data has moved to data.js\n    root.ref.data = false;\n  };\n\n  /**\n   * Data storage\n   */\n  var didLoadItem = function didLoadItem(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    // updates the legend of the fieldset so screenreaders can better group buttons\n    text(\n      root.ref.fileName,\n      formatFilename(root.query('GET_ITEM_NAME', props.id))\n    );\n  };\n\n  var fileWrapper = createView({\n    create: create$5,\n    ignoreRect: true,\n    write: createRoute({\n      DID_LOAD_ITEM: didLoadItem\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    tag: 'fieldset',\n    name: 'file-wrapper'\n  });\n\n  var PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\n  var create$6 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    [\n      {\n        name: 'top'\n      },\n\n      {\n        name: 'center',\n        props: {\n          translateY: null,\n          scaleY: null\n        },\n\n        mixins: {\n          animations: {\n            scaleY: PANEL_SPRING_PROPS\n          },\n\n          styles: ['translateY', 'scaleY']\n        }\n      },\n\n      {\n        name: 'bottom',\n        props: {\n          translateY: null\n        },\n\n        mixins: {\n          animations: {\n            translateY: PANEL_SPRING_PROPS\n          },\n\n          styles: ['translateY']\n        }\n      }\n    ].forEach(function(section) {\n      createSection(root, section, props.name);\n    });\n\n    root.element.classList.add('filepond--' + props.name);\n\n    root.ref.scalable = null;\n  };\n\n  var createSection = function createSection(root, section, className) {\n    var viewConstructor = createView({\n      name: 'panel-' + section.name + ' filepond--' + className,\n      mixins: section.mixins,\n      ignoreRectUpdate: true\n    });\n\n    var view = root.createChildView(viewConstructor, section.props);\n\n    root.ref[section.name] = root.appendChildView(view);\n  };\n\n  var write$3 = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n\n    // update scalable state\n    if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n      root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n      root.element.dataset.scalable = root.ref.scalable;\n    }\n\n    // no height, can't set\n    if (!props.height) return;\n\n    // get child rects\n    var topRect = root.ref.top.rect.element;\n    var bottomRect = root.ref.bottom.rect.element;\n\n    // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n    var height = Math.max(topRect.height + bottomRect.height, props.height);\n\n    // offset center part\n    root.ref.center.translateY = topRect.height;\n\n    // scale center part\n    // use math ceil to prevent transparent lines because of rounding errors\n    root.ref.center.scaleY =\n      (height - topRect.height - bottomRect.height) / 100;\n\n    // offset bottom part\n    root.ref.bottom.translateY = height - bottomRect.height;\n  };\n\n  var panel = createView({\n    name: 'panel',\n    write: write$3,\n    create: create$6,\n    ignoreRect: true,\n    mixins: {\n      apis: ['height', 'scalable']\n    }\n  });\n\n  var createDragHelper = function createDragHelper(items) {\n    var itemIds = items.map(function(item) {\n      return item.id;\n    });\n    var prevIndex = undefined;\n    return {\n      setIndex: function setIndex(index) {\n        prevIndex = index;\n      },\n      getIndex: function getIndex() {\n        return prevIndex;\n      },\n      getItemIndex: function getItemIndex(item) {\n        return itemIds.indexOf(item.id);\n      }\n    };\n  };\n\n  var ITEM_TRANSLATE_SPRING = {\n    type: 'spring',\n    stiffness: 0.75,\n    damping: 0.45,\n    mass: 10\n  };\n\n  var ITEM_SCALE_SPRING = 'spring';\n\n  var StateMap = {\n    DID_START_ITEM_LOAD: 'busy',\n    DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n    DID_THROW_ITEM_INVALID: 'load-invalid',\n    DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n    DID_LOAD_ITEM: 'idle',\n    DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n    DID_START_ITEM_REMOVE: 'busy',\n    DID_START_ITEM_PROCESSING: 'busy processing',\n    DID_REQUEST_ITEM_PROCESSING: 'busy processing',\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n    DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n    DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n    DID_ABORT_ITEM_PROCESSING: 'cancelled',\n    DID_REVERT_ITEM_PROCESSING: 'idle'\n  };\n\n  /**\n   * Creates the file view\n   */\n  var create$7 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // select\n    root.ref.handleClick = function(e) {\n      return root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n    };\n\n    // set id\n    root.element.id = 'filepond--item-' + props.id;\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // file view\n    root.ref.container = root.appendChildView(\n      root.createChildView(fileWrapper, { id: props.id })\n    );\n\n    // file panel\n    root.ref.panel = root.appendChildView(\n      root.createChildView(panel, { name: 'item-panel' })\n    );\n\n    // default start height\n    root.ref.panel.height = null;\n\n    // by default not marked for removal\n    props.markedForRemoval = false;\n\n    // if not allowed to reorder file items, exit here\n    if (!root.query('GET_ALLOW_REORDER')) return;\n\n    // set to idle so shows grab cursor\n    root.element.dataset.dragState = 'idle';\n\n    var grab = function grab(e) {\n      if (!e.isPrimary) return;\n\n      var removedActivateListener = false;\n\n      var origin = {\n        x: e.pageX,\n        y: e.pageY\n      };\n\n      props.dragOrigin = {\n        x: root.translateX,\n        y: root.translateY\n      };\n\n      props.dragCenter = {\n        x: e.offsetX,\n        y: e.offsetY\n      };\n\n      var dragState = createDragHelper(root.query('GET_ACTIVE_ITEMS'));\n\n      root.dispatch('DID_GRAB_ITEM', { id: props.id, dragState: dragState });\n\n      var drag = function drag(e) {\n        if (!e.isPrimary) return;\n\n        e.stopPropagation();\n        e.preventDefault();\n\n        props.dragOffset = {\n          x: e.pageX - origin.x,\n          y: e.pageY - origin.y\n        };\n\n        // if dragged stop listening to clicks, will re-add when done dragging\n        var dist =\n          props.dragOffset.x * props.dragOffset.x +\n          props.dragOffset.y * props.dragOffset.y;\n        if (dist > 16 && !removedActivateListener) {\n          removedActivateListener = true;\n          root.element.removeEventListener('click', root.ref.handleClick);\n        }\n\n        root.dispatch('DID_DRAG_ITEM', { id: props.id, dragState: dragState });\n      };\n\n      var drop = function drop(e) {\n        if (!e.isPrimary) return;\n\n        document.removeEventListener('pointermove', drag);\n        document.removeEventListener('pointerup', drop);\n\n        props.dragOffset = {\n          x: e.pageX - origin.x,\n          y: e.pageY - origin.y\n        };\n\n        root.dispatch('DID_DROP_ITEM', { id: props.id, dragState: dragState });\n\n        // start listening to clicks again\n        if (removedActivateListener) {\n          setTimeout(function() {\n            return root.element.addEventListener('click', root.ref.handleClick);\n          }, 0);\n        }\n      };\n\n      document.addEventListener('pointermove', drag);\n      document.addEventListener('pointerup', drop);\n    };\n\n    root.element.addEventListener('pointerdown', grab);\n  };\n\n  var route$1 = createRoute({\n    DID_UPDATE_PANEL_HEIGHT: function DID_UPDATE_PANEL_HEIGHT(_ref2) {\n      var root = _ref2.root,\n        action = _ref2.action;\n      root.height = action.height;\n    }\n  });\n\n  var write$4 = createRoute(\n    {\n      DID_GRAB_ITEM: function DID_GRAB_ITEM(_ref3) {\n        var root = _ref3.root,\n          props = _ref3.props;\n        props.dragOrigin = {\n          x: root.translateX,\n          y: root.translateY\n        };\n      },\n      DID_DRAG_ITEM: function DID_DRAG_ITEM(_ref4) {\n        var root = _ref4.root;\n        root.element.dataset.dragState = 'drag';\n      },\n      DID_DROP_ITEM: function DID_DROP_ITEM(_ref5) {\n        var root = _ref5.root,\n          props = _ref5.props;\n        props.dragOffset = null;\n        props.dragOrigin = null;\n        root.element.dataset.dragState = 'drop';\n      }\n    },\n    function(_ref6) {\n      var root = _ref6.root,\n        actions = _ref6.actions,\n        props = _ref6.props,\n        shouldOptimize = _ref6.shouldOptimize;\n\n      if (root.element.dataset.dragState === 'drop') {\n        if (root.scaleX <= 1) {\n          root.element.dataset.dragState = 'idle';\n        }\n      }\n\n      // select last state change action\n      var action = actions\n        .concat()\n        .filter(function(action) {\n          return /^DID_/.test(action.type);\n        })\n        .reverse()\n        .find(function(action) {\n          return StateMap[action.type];\n        });\n\n      // no need to set same state twice\n      if (action && action.type !== props.currentState) {\n        // set current state\n        props.currentState = action.type;\n\n        // set state\n        root.element.dataset.filepondItemState =\n          StateMap[props.currentState] || '';\n      }\n\n      // route actions\n      var aspectRatio =\n        root.query('GET_ITEM_PANEL_ASPECT_RATIO') ||\n        root.query('GET_PANEL_ASPECT_RATIO');\n      if (!aspectRatio) {\n        route$1({ root: root, actions: actions, props: props });\n        if (!root.height && root.ref.container.rect.element.height > 0) {\n          root.height = root.ref.container.rect.element.height;\n        }\n      } else if (!shouldOptimize) {\n        root.height = root.rect.element.width * aspectRatio;\n      }\n\n      // sync panel height with item height\n      if (shouldOptimize) {\n        root.ref.panel.height = null;\n      }\n\n      root.ref.panel.height = root.height;\n    }\n  );\n\n  var item = createView({\n    create: create$7,\n    write: write$4,\n    destroy: function destroy(_ref7) {\n      var root = _ref7.root,\n        props = _ref7.props;\n      root.element.removeEventListener('click', root.ref.handleClick);\n      root.dispatch('RELEASE_ITEM', { query: props.id });\n    },\n    tag: 'li',\n    name: 'item',\n    mixins: {\n      apis: [\n        'id',\n        'interactionMethod',\n        'markedForRemoval',\n        'spawnDate',\n        'dragCenter',\n        'dragOrigin',\n        'dragOffset'\n      ],\n      styles: [\n        'translateX',\n        'translateY',\n        'scaleX',\n        'scaleY',\n        'opacity',\n        'height'\n      ],\n\n      animations: {\n        scaleX: ITEM_SCALE_SPRING,\n        scaleY: ITEM_SCALE_SPRING,\n        translateX: ITEM_TRANSLATE_SPRING,\n        translateY: ITEM_TRANSLATE_SPRING,\n        opacity: { type: 'tween', duration: 150 }\n      }\n    }\n  });\n\n  var getItemIndexByPosition = function getItemIndexByPosition(\n    view,\n    children,\n    positionInView\n  ) {\n    if (!positionInView) return;\n\n    var horizontalSpace = view.rect.element.width;\n    // const children = view.childViews;\n    var l = children.length;\n    var last = null;\n\n    // -1, don't move items to accomodate (either add to top or bottom)\n    if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n    // let's get the item width\n    var item = children[0];\n    var itemRect = item.rect.element;\n    var itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n    var itemWidth = itemRect.width + itemHorizontalMargin;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      for (var index = 0; index < l; index++) {\n        var child = children[index];\n        var childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n        if (positionInView.top < childMid) {\n          return index;\n        }\n      }\n      return l;\n    }\n\n    // grid\n    var itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n    var itemHeight = itemRect.height + itemVerticalMargin;\n    for (var _index = 0; _index < l; _index++) {\n      var indexX = _index % itemsPerRow;\n      var indexY = Math.floor(_index / itemsPerRow);\n\n      var offsetX = indexX * itemWidth;\n      var offsetY = indexY * itemHeight;\n\n      var itemTop = offsetY - itemRect.marginTop;\n      var itemRight = offsetX + itemWidth;\n      var itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n      if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n        if (positionInView.left < itemRight) {\n          return _index;\n        } else if (_index !== l - 1) {\n          last = _index;\n        } else {\n          last = null;\n        }\n      }\n    }\n\n    if (last !== null) {\n      return last;\n    }\n\n    return l;\n  };\n\n  var dropAreaDimensions = {\n    height: 0,\n    width: 0,\n    get getHeight() {\n      return this.height;\n    },\n    set setHeight(val) {\n      if (this.height === 0 || val === 0) this.height = val;\n    },\n    get getWidth() {\n      return this.width;\n    },\n    set setWidth(val) {\n      if (this.width === 0 || val === 0) this.width = val;\n    },\n    setDimensions: function setDimensions(height, width) {\n      if (this.height === 0 || height === 0) this.height = height;\n      if (this.width === 0 || width === 0) this.width = width;\n    }\n  };\n\n  var create$8 = function create(_ref) {\n    var root = _ref.root;\n    // need to set role to list as otherwise it won't be read as a list by VoiceOver\n    attr(root.element, 'role', 'list');\n\n    root.ref.lastItemSpanwDate = Date.now();\n  };\n\n  /**\n   * Inserts a new item\n   * @param root\n   * @param action\n   */\n  var addItemView = function addItemView(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    var id = action.id,\n      index = action.index,\n      interactionMethod = action.interactionMethod;\n\n    root.ref.addIndex = index;\n\n    var now = Date.now();\n    var spawnDate = now;\n    var opacity = 1;\n\n    if (interactionMethod !== InteractionMethod.NONE) {\n      opacity = 0;\n      var cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n      var dist = now - root.ref.lastItemSpanwDate;\n      spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n    }\n\n    root.ref.lastItemSpanwDate = spawnDate;\n\n    root.appendChildView(\n      root.createChildView(\n        // view type\n        item,\n\n        // props\n        {\n          spawnDate: spawnDate,\n          id: id,\n          opacity: opacity,\n          interactionMethod: interactionMethod\n        }\n      ),\n\n      index\n    );\n  };\n\n  var moveItem = function moveItem(item, x, y) {\n    var vx =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var vy =\n      arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n    // set to null to remove animation while dragging\n    if (item.dragOffset) {\n      item.translateX = null;\n      item.translateY = null;\n      item.translateX = item.dragOrigin.x + item.dragOffset.x;\n      item.translateY = item.dragOrigin.y + item.dragOffset.y;\n      item.scaleX = 1.025;\n      item.scaleY = 1.025;\n    } else {\n      item.translateX = x;\n      item.translateY = y;\n\n      if (Date.now() > item.spawnDate) {\n        // reveal element\n        if (item.opacity === 0) {\n          introItemView(item, x, y, vx, vy);\n        }\n\n        // make sure is default scale every frame\n        item.scaleX = 1;\n        item.scaleY = 1;\n        item.opacity = 1;\n      }\n    }\n  };\n\n  var introItemView = function introItemView(item, x, y, vx, vy) {\n    if (item.interactionMethod === InteractionMethod.NONE) {\n      item.translateX = null;\n      item.translateX = x;\n      item.translateY = null;\n      item.translateY = y;\n    } else if (item.interactionMethod === InteractionMethod.DROP) {\n      item.translateX = null;\n      item.translateX = x - vx * 20;\n\n      item.translateY = null;\n      item.translateY = y - vy * 10;\n\n      item.scaleX = 0.8;\n      item.scaleY = 0.8;\n    } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n      item.translateY = null;\n      item.translateY = y - 30;\n    } else if (item.interactionMethod === InteractionMethod.API) {\n      item.translateX = null;\n      item.translateX = x - 30;\n      item.translateY = null;\n    }\n  };\n\n  /**\n   * Removes an existing item\n   * @param root\n   * @param action\n   */\n  var removeItemView = function removeItemView(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    var id = action.id;\n\n    // get the view matching the given id\n    var view = root.childViews.find(function(child) {\n      return child.id === id;\n    });\n\n    // if no view found, exit\n    if (!view) {\n      return;\n    }\n\n    // animate view out of view\n    view.scaleX = 0.9;\n    view.scaleY = 0.9;\n    view.opacity = 0;\n\n    // mark for removal\n    view.markedForRemoval = true;\n  };\n\n  var getItemHeight = function getItemHeight(child) {\n    return (\n      child.rect.element.height +\n      child.rect.element.marginBottom * 0.5 +\n      child.rect.element.marginTop * 0.5\n    );\n  };\n  var getItemWidth = function getItemWidth(child) {\n    return (\n      child.rect.element.width +\n      child.rect.element.marginLeft * 0.5 +\n      child.rect.element.marginRight * 0.5\n    );\n  };\n\n  var dragItem = function dragItem(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    var id = action.id,\n      dragState = action.dragState;\n\n    // reference to item\n    var item = root.query('GET_ITEM', { id: id });\n\n    // get the view matching the given id\n    var view = root.childViews.find(function(child) {\n      return child.id === id;\n    });\n\n    var numItems = root.childViews.length;\n    var oldIndex = dragState.getItemIndex(item);\n\n    // if no view found, exit\n    if (!view) return;\n\n    var dragPosition = {\n      x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n      y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y\n\n      // get drag area dimensions\n    };\n    var dragHeight = getItemHeight(view);\n    var dragWidth = getItemWidth(view);\n\n    // get rows and columns (There will always be at least one row and one column if a file is present)\n    var cols = Math.floor(root.rect.outer.width / dragWidth);\n    if (cols > numItems) cols = numItems;\n\n    // rows are used to find when we have left the preview area bounding box\n    var rows = Math.floor(numItems / cols + 1);\n\n    dropAreaDimensions.setHeight = dragHeight * rows;\n    dropAreaDimensions.setWidth = dragWidth * cols;\n\n    // get new index of dragged item\n    var location = {\n      y: Math.floor(dragPosition.y / dragHeight),\n      x: Math.floor(dragPosition.x / dragWidth),\n      getGridIndex: function getGridIndex() {\n        if (\n          dragPosition.y > dropAreaDimensions.getHeight ||\n          dragPosition.y < 0 ||\n          dragPosition.x > dropAreaDimensions.getWidth ||\n          dragPosition.x < 0\n        )\n          return oldIndex;\n        return this.y * cols + this.x;\n      },\n      getColIndex: function getColIndex() {\n        var items = root.query('GET_ACTIVE_ITEMS');\n        var visibleChildren = root.childViews.filter(function(child) {\n          return child.rect.element.height;\n        });\n        var children = items.map(function(item) {\n          return visibleChildren.find(function(childView) {\n            return childView.id === item.id;\n          });\n        });\n        var currentIndex = children.findIndex(function(child) {\n          return child === view;\n        });\n        var dragHeight = getItemHeight(view);\n        var l = children.length;\n        var idx = l;\n        var childHeight = 0;\n        var childBottom = 0;\n        var childTop = 0;\n        for (var i = 0; i < l; i++) {\n          childHeight = getItemHeight(children[i]);\n          childTop = childBottom;\n          childBottom = childTop + childHeight;\n          if (dragPosition.y < childBottom) {\n            if (currentIndex > i) {\n              if (dragPosition.y < childTop + dragHeight) {\n                idx = i;\n                break;\n              }\n              continue;\n            }\n            idx = i;\n            break;\n          }\n        }\n        return idx;\n      }\n\n      // get new index\n    };\n    var index = cols > 1 ? location.getGridIndex() : location.getColIndex();\n    root.dispatch('MOVE_ITEM', { query: view, index: index });\n\n    // if the index of the item changed, dispatch reorder action\n    var currentIndex = dragState.getIndex();\n\n    if (currentIndex === undefined || currentIndex !== index) {\n      dragState.setIndex(index);\n\n      if (currentIndex === undefined) return;\n\n      root.dispatch('DID_REORDER_ITEMS', {\n        items: root.query('GET_ACTIVE_ITEMS'),\n        origin: oldIndex,\n        target: index\n      });\n    }\n  };\n\n  /**\n   * Setup action routes\n   */\n  var route$2 = createRoute({\n    DID_ADD_ITEM: addItemView,\n    DID_REMOVE_ITEM: removeItemView,\n    DID_DRAG_ITEM: dragItem\n  });\n\n  /**\n   * Write to view\n   * @param root\n   * @param actions\n   * @param props\n   */\n  var write$5 = function write(_ref5) {\n    var root = _ref5.root,\n      props = _ref5.props,\n      actions = _ref5.actions,\n      shouldOptimize = _ref5.shouldOptimize;\n\n    // route actions\n    route$2({ root: root, props: props, actions: actions });\n    var dragCoordinates = props.dragCoordinates;\n\n    // available space on horizontal axis\n    var horizontalSpace = root.rect.element.width;\n\n    // only draw children that have dimensions\n    var visibleChildren = root.childViews.filter(function(child) {\n      return child.rect.element.height;\n    });\n\n    // sort based on current active items\n    var children = root\n      .query('GET_ACTIVE_ITEMS')\n      .map(function(item) {\n        return visibleChildren.find(function(child) {\n          return child.id === item.id;\n        });\n      })\n      .filter(function(item) {\n        return item;\n      });\n\n    // get index\n    var dragIndex = dragCoordinates\n      ? getItemIndexByPosition(root, children, dragCoordinates)\n      : null;\n\n    // add index is used to reserve the dropped/added item index till the actual item is rendered\n    var addIndex = root.ref.addIndex || null;\n\n    // add index no longer needed till possibly next draw\n    root.ref.addIndex = null;\n\n    var dragIndexOffset = 0;\n    var removeIndexOffset = 0;\n    var addIndexOffset = 0;\n\n    if (children.length === 0) return;\n\n    var childRect = children[0].rect.element;\n    var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n    var itemWidth = childRect.width + itemHorizontalMargin;\n    var itemHeight = childRect.height + itemVerticalMargin;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      var offsetY = 0;\n      var dragOffset = 0;\n\n      children.forEach(function(child, index) {\n        if (dragIndex) {\n          var dist = index - dragIndex;\n          if (dist === -2) {\n            dragOffset = -itemVerticalMargin * 0.25;\n          } else if (dist === -1) {\n            dragOffset = -itemVerticalMargin * 0.75;\n          } else if (dist === 0) {\n            dragOffset = itemVerticalMargin * 0.75;\n          } else if (dist === 1) {\n            dragOffset = itemVerticalMargin * 0.25;\n          } else {\n            dragOffset = 0;\n          }\n        }\n\n        if (shouldOptimize) {\n          child.translateX = null;\n          child.translateY = null;\n        }\n\n        if (!child.markedForRemoval) {\n          moveItem(child, 0, offsetY + dragOffset);\n        }\n\n        var itemHeight = child.rect.element.height + itemVerticalMargin;\n\n        var visualHeight =\n          itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n        offsetY += visualHeight;\n      });\n    }\n    // grid\n    else {\n      var prevX = 0;\n      var prevY = 0;\n\n      children.forEach(function(child, index) {\n        if (index === dragIndex) {\n          dragIndexOffset = 1;\n        }\n\n        if (index === addIndex) {\n          addIndexOffset += 1;\n        }\n\n        if (child.markedForRemoval && child.opacity < 0.5) {\n          removeIndexOffset -= 1;\n        }\n\n        var visualIndex =\n          index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n        var indexX = visualIndex % itemsPerRow;\n        var indexY = Math.floor(visualIndex / itemsPerRow);\n\n        var offsetX = indexX * itemWidth;\n        var offsetY = indexY * itemHeight;\n\n        var vectorX = Math.sign(offsetX - prevX);\n        var vectorY = Math.sign(offsetY - prevY);\n\n        prevX = offsetX;\n        prevY = offsetY;\n\n        if (child.markedForRemoval) return;\n\n        if (shouldOptimize) {\n          child.translateX = null;\n          child.translateY = null;\n        }\n\n        moveItem(child, offsetX, offsetY, vectorX, vectorY);\n      });\n    }\n  };\n\n  /**\n   * Filters actions that are meant specifically for a certain child of the list\n   * @param child\n   * @param actions\n   */\n  var filterSetItemActions = function filterSetItemActions(child, actions) {\n    return actions.filter(function(action) {\n      // if action has an id, filter out actions that don't have this child id\n      if (action.data && action.data.id) {\n        return child.id === action.data.id;\n      }\n\n      // allow all other actions\n      return true;\n    });\n  };\n\n  var list = createView({\n    create: create$8,\n    write: write$5,\n    tag: 'ul',\n    name: 'list',\n    didWriteView: function didWriteView(_ref6) {\n      var root = _ref6.root;\n      root.childViews\n        .filter(function(view) {\n          return view.markedForRemoval && view.opacity === 0 && view.resting;\n        })\n        .forEach(function(view) {\n          view._destroy();\n          root.removeChildView(view);\n        });\n    },\n    filterFrameActionsForChild: filterSetItemActions,\n    mixins: {\n      apis: ['dragCoordinates']\n    }\n  });\n\n  var create$9 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.ref.list = root.appendChildView(root.createChildView(list));\n    props.dragCoordinates = null;\n    props.overflowing = false;\n  };\n\n  var storeDragCoordinates = function storeDragCoordinates(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props,\n      action = _ref2.action;\n    if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n    props.dragCoordinates = {\n      left: action.position.scopeLeft - root.ref.list.rect.element.left,\n      top:\n        action.position.scopeTop -\n        (root.rect.outer.top +\n          root.rect.element.marginTop +\n          root.rect.element.scrollTop)\n    };\n  };\n\n  var clearDragCoordinates = function clearDragCoordinates(_ref3) {\n    var props = _ref3.props;\n    props.dragCoordinates = null;\n  };\n\n  var route$3 = createRoute({\n    DID_DRAG: storeDragCoordinates,\n    DID_END_DRAG: clearDragCoordinates\n  });\n\n  var write$6 = function write(_ref4) {\n    var root = _ref4.root,\n      props = _ref4.props,\n      actions = _ref4.actions;\n\n    // route actions\n    route$3({ root: root, props: props, actions: actions });\n\n    // current drag position\n    root.ref.list.dragCoordinates = props.dragCoordinates;\n\n    // if currently overflowing but no longer received overflow\n    if (props.overflowing && !props.overflow) {\n      props.overflowing = false;\n\n      // reset overflow state\n      root.element.dataset.state = '';\n      root.height = null;\n    }\n\n    // if is not overflowing currently but does receive overflow value\n    if (props.overflow) {\n      var newHeight = Math.round(props.overflow);\n      if (newHeight !== root.height) {\n        props.overflowing = true;\n        root.element.dataset.state = 'overflow';\n        root.height = newHeight;\n      }\n    }\n  };\n\n  var listScroller = createView({\n    create: create$9,\n    write: write$6,\n    name: 'list-scroller',\n    mixins: {\n      apis: ['overflow', 'dragCoordinates'],\n      styles: ['height', 'translateY'],\n      animations: {\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var attrToggle = function attrToggle(element, name, state) {\n    var enabledValue =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n    if (state) {\n      attr(element, name, enabledValue);\n    } else {\n      element.removeAttribute(name);\n    }\n  };\n\n  var resetFileInput = function resetFileInput(input) {\n    // no value, no need to reset\n    if (!input || input.value === '') {\n      return;\n    }\n\n    try {\n      // for modern browsers\n      input.value = '';\n    } catch (err) {}\n\n    // for IE10\n    if (input.value) {\n      // quickly append input to temp form and reset form\n      var form = createElement$1('form');\n      var parentNode = input.parentNode;\n      var ref = input.nextSibling;\n      form.appendChild(input);\n      form.reset();\n\n      // re-inject input where it originally was\n      if (ref) {\n        parentNode.insertBefore(input, ref);\n      } else {\n        parentNode.appendChild(input);\n      }\n    }\n  };\n\n  var create$a = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // set id so can be referenced from outside labels\n    root.element.id = 'filepond--browser-' + props.id;\n\n    // set name of element (is removed when a value is set)\n    attr(root.element, 'name', root.query('GET_NAME'));\n\n    // we have to link this element to the status element\n    attr(root.element, 'aria-controls', 'filepond--assistant-' + props.id);\n\n    // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n    attr(root.element, 'aria-labelledby', 'filepond--drop-label-' + props.id);\n\n    // set configurable props\n    setAcceptedFileTypes({\n      root: root,\n      action: { value: root.query('GET_ACCEPTED_FILE_TYPES') }\n    });\n    toggleAllowMultiple({\n      root: root,\n      action: { value: root.query('GET_ALLOW_MULTIPLE') }\n    });\n    toggleDirectoryFilter({\n      root: root,\n      action: { value: root.query('GET_ALLOW_DIRECTORIES_ONLY') }\n    });\n    toggleDisabled({ root: root });\n    toggleRequired({\n      root: root,\n      action: { value: root.query('GET_REQUIRED') }\n    });\n    setCaptureMethod({\n      root: root,\n      action: { value: root.query('GET_CAPTURE_METHOD') }\n    });\n\n    // handle changes to the input field\n    root.ref.handleChange = function(e) {\n      if (!root.element.value) {\n        return;\n      }\n\n      // extract files and move value of webkitRelativePath path to _relativePath\n      var files = Array.from(root.element.files).map(function(file) {\n        file._relativePath = file.webkitRelativePath;\n        return file;\n      });\n\n      // we add a little delay so the OS file select window can move out of the way before we add our file\n      setTimeout(function() {\n        // load files\n        props.onload(files);\n\n        // reset input, it's just for exposing a method to drop files, should not retain any state\n        resetFileInput(root.element);\n      }, 250);\n    };\n\n    root.element.addEventListener('change', root.ref.handleChange);\n  };\n\n  var setAcceptedFileTypes = function setAcceptedFileTypes(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    if (!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE')) return;\n    attrToggle(\n      root.element,\n      'accept',\n      !!action.value,\n      action.value ? action.value.join(',') : ''\n    );\n  };\n\n  var toggleAllowMultiple = function toggleAllowMultiple(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    attrToggle(root.element, 'multiple', action.value);\n  };\n\n  var toggleDirectoryFilter = function toggleDirectoryFilter(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    attrToggle(root.element, 'webkitdirectory', action.value);\n  };\n\n  var toggleDisabled = function toggleDisabled(_ref5) {\n    var root = _ref5.root;\n    var isDisabled = root.query('GET_DISABLED');\n    var doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n    var disableField = isDisabled || !doesAllowBrowse;\n    attrToggle(root.element, 'disabled', disableField);\n  };\n\n  var toggleRequired = function toggleRequired(_ref6) {\n    var root = _ref6.root,\n      action = _ref6.action;\n    // want to remove required, always possible\n    if (!action.value) {\n      attrToggle(root.element, 'required', false);\n    }\n    // if want to make required, only possible when zero items\n    else if (root.query('GET_TOTAL_ITEMS') === 0) {\n      attrToggle(root.element, 'required', true);\n    }\n  };\n\n  var setCaptureMethod = function setCaptureMethod(_ref7) {\n    var root = _ref7.root,\n      action = _ref7.action;\n    attrToggle(\n      root.element,\n      'capture',\n      !!action.value,\n      action.value === true ? '' : action.value\n    );\n  };\n\n  var updateRequiredStatus = function updateRequiredStatus(_ref8) {\n    var root = _ref8.root;\n    var element = root.element;\n    // always remove the required attribute when more than zero items\n    if (root.query('GET_TOTAL_ITEMS') > 0) {\n      attrToggle(element, 'required', false);\n      attrToggle(element, 'name', false);\n    } else {\n      // add name attribute\n      attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n      // remove any validation messages\n      var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n      if (shouldCheckValidity) {\n        element.setCustomValidity('');\n      }\n\n      // we only add required if the field has been deemed required\n      if (root.query('GET_REQUIRED')) {\n        attrToggle(element, 'required', true);\n      }\n    }\n  };\n\n  var updateFieldValidityStatus = function updateFieldValidityStatus(_ref9) {\n    var root = _ref9.root;\n    var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n    if (!shouldCheckValidity) return;\n    root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n  };\n\n  var browser = createView({\n    tag: 'input',\n    name: 'browser',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    attributes: {\n      type: 'file'\n    },\n\n    create: create$a,\n    destroy: function destroy(_ref10) {\n      var root = _ref10.root;\n      root.element.removeEventListener('change', root.ref.handleChange);\n    },\n    write: createRoute({\n      DID_LOAD_ITEM: updateRequiredStatus,\n      DID_REMOVE_ITEM: updateRequiredStatus,\n      DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n      DID_SET_DISABLED: toggleDisabled,\n      DID_SET_ALLOW_BROWSE: toggleDisabled,\n      DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n      DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n      DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n      DID_SET_CAPTURE_METHOD: setCaptureMethod,\n      DID_SET_REQUIRED: toggleRequired\n    })\n  });\n\n  var Key = {\n    ENTER: 13,\n    SPACE: 32\n  };\n\n  var create$b = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // create the label and link it to the file browser\n    var label = createElement$1('label');\n    attr(label, 'for', 'filepond--browser-' + props.id);\n\n    // use for labeling file input (aria-labelledby on file input)\n    attr(label, 'id', 'filepond--drop-label-' + props.id);\n\n    // hide the label for screenreaders, the input element will read the contents of the label when it's focussed. If we don't set aria-hidden the screenreader will also navigate the contents of the label separately from the input.\n    attr(label, 'aria-hidden', 'true');\n\n    // handle keys\n    root.ref.handleKeyDown = function(e) {\n      var isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n      if (!isActivationKey) return;\n      // stops from triggering the element a second time\n      e.preventDefault();\n\n      // click link (will then in turn activate file input)\n      root.ref.label.click();\n    };\n\n    root.ref.handleClick = function(e) {\n      var isLabelClick = e.target === label || label.contains(e.target);\n\n      // don't want to click twice\n      if (isLabelClick) return;\n\n      // click link (will then in turn activate file input)\n      root.ref.label.click();\n    };\n\n    // attach events\n    label.addEventListener('keydown', root.ref.handleKeyDown);\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // update\n    updateLabelValue(label, props.caption);\n\n    // add!\n    root.appendChild(label);\n    root.ref.label = label;\n  };\n\n  var updateLabelValue = function updateLabelValue(label, value) {\n    label.innerHTML = value;\n    var clickable = label.querySelector('.filepond--label-action');\n    if (clickable) {\n      attr(clickable, 'tabindex', '0');\n    }\n    return value;\n  };\n\n  var dropLabel = createView({\n    name: 'drop-label',\n    ignoreRect: true,\n    create: create$b,\n    destroy: function destroy(_ref2) {\n      var root = _ref2.root;\n      root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n      root.element.removeEventListener('click', root.ref.handleClick);\n    },\n    write: createRoute({\n      DID_SET_LABEL_IDLE: function DID_SET_LABEL_IDLE(_ref3) {\n        var root = _ref3.root,\n          action = _ref3.action;\n        updateLabelValue(root.ref.label, action.value);\n      }\n    }),\n\n    mixins: {\n      styles: ['opacity', 'translateX', 'translateY'],\n      animations: {\n        opacity: { type: 'tween', duration: 150 },\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var blob = createView({\n    name: 'drip-blob',\n    ignoreRect: true,\n    mixins: {\n      styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        translateX: 'spring',\n        translateY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      }\n    }\n  });\n\n  var addBlob = function addBlob(_ref) {\n    var root = _ref.root;\n    var centerX = root.rect.element.width * 0.5;\n    var centerY = root.rect.element.height * 0.5;\n\n    root.ref.blob = root.appendChildView(\n      root.createChildView(blob, {\n        opacity: 0,\n        scaleX: 2.5,\n        scaleY: 2.5,\n        translateX: centerX,\n        translateY: centerY\n      })\n    );\n  };\n\n  var moveBlob = function moveBlob(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    if (!root.ref.blob) {\n      addBlob({ root: root });\n      return;\n    }\n\n    root.ref.blob.translateX = action.position.scopeLeft;\n    root.ref.blob.translateY = action.position.scopeTop;\n    root.ref.blob.scaleX = 1;\n    root.ref.blob.scaleY = 1;\n    root.ref.blob.opacity = 1;\n  };\n\n  var hideBlob = function hideBlob(_ref3) {\n    var root = _ref3.root;\n    if (!root.ref.blob) {\n      return;\n    }\n    root.ref.blob.opacity = 0;\n  };\n\n  var explodeBlob = function explodeBlob(_ref4) {\n    var root = _ref4.root;\n    if (!root.ref.blob) {\n      return;\n    }\n    root.ref.blob.scaleX = 2.5;\n    root.ref.blob.scaleY = 2.5;\n    root.ref.blob.opacity = 0;\n  };\n\n  var write$7 = function write(_ref5) {\n    var root = _ref5.root,\n      props = _ref5.props,\n      actions = _ref5.actions;\n    route$4({ root: root, props: props, actions: actions });\n    var blob = root.ref.blob;\n\n    if (actions.length === 0 && blob && blob.opacity === 0) {\n      root.removeChildView(blob);\n      root.ref.blob = null;\n    }\n  };\n\n  var route$4 = createRoute({\n    DID_DRAG: moveBlob,\n    DID_DROP: explodeBlob,\n    DID_END_DRAG: hideBlob\n  });\n\n  var drip = createView({\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'drip',\n    write: write$7\n  });\n\n  var create$c = function create(_ref) {\n    var root = _ref.root;\n    return (root.ref.fields = {});\n  };\n\n  var getField = function getField(root, id) {\n    return root.ref.fields[id];\n  };\n\n  var syncFieldPositionsWithItems = function syncFieldPositionsWithItems(root) {\n    root.query('GET_ACTIVE_ITEMS').forEach(function(item) {\n      if (!root.ref.fields[item.id]) return;\n      root.element.appendChild(root.ref.fields[item.id]);\n    });\n  };\n\n  var didReorderItems = function didReorderItems(_ref2) {\n    var root = _ref2.root;\n    return syncFieldPositionsWithItems(root);\n  };\n\n  var didAddItem = function didAddItem(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    var dataContainer = createElement$1('input');\n    dataContainer.type = 'hidden';\n    dataContainer.name = root.query('GET_NAME');\n    dataContainer.disabled = root.query('GET_DISABLED');\n    root.ref.fields[action.id] = dataContainer;\n    syncFieldPositionsWithItems(root);\n  };\n\n  var didLoadItem$1 = function didLoadItem(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    var field = getField(root, action.id);\n    if (!field || action.serverFileReference === null) return;\n    field.value = action.serverFileReference;\n  };\n\n  var didSetDisabled = function didSetDisabled(_ref5) {\n    var root = _ref5.root;\n    root.element.disabled = root.query('GET_DISABLED');\n  };\n\n  var didRemoveItem = function didRemoveItem(_ref6) {\n    var root = _ref6.root,\n      action = _ref6.action;\n    var field = getField(root, action.id);\n    if (!field) return;\n    field.parentNode.removeChild(field);\n    delete root.ref.fields[action.id];\n  };\n\n  var didDefineValue = function didDefineValue(_ref7) {\n    var root = _ref7.root,\n      action = _ref7.action;\n    var field = getField(root, action.id);\n    if (!field) return;\n    if (action.value === null) {\n      field.removeAttribute('value');\n    } else {\n      field.value = action.value;\n    }\n    syncFieldPositionsWithItems(root);\n  };\n\n  var write$8 = createRoute({\n    DID_SET_DISABLED: didSetDisabled,\n    DID_ADD_ITEM: didAddItem,\n    DID_LOAD_ITEM: didLoadItem$1,\n    DID_REMOVE_ITEM: didRemoveItem,\n    DID_DEFINE_VALUE: didDefineValue,\n    DID_REORDER_ITEMS: didReorderItems,\n    DID_SORT_ITEMS: didReorderItems\n  });\n\n  var data = createView({\n    tag: 'fieldset',\n    name: 'data',\n    create: create$c,\n    write: write$8,\n    ignoreRect: true\n  });\n\n  var getRootNode = function getRootNode(element) {\n    return 'getRootNode' in element ? element.getRootNode() : document;\n  };\n\n  var images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\n  var text$1 = ['css', 'csv', 'html', 'txt'];\n  var map = {\n    zip: 'zip|compressed',\n    epub: 'application/epub+zip'\n  };\n\n  var guesstimateMimeType = function guesstimateMimeType() {\n    var extension =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    extension = extension.toLowerCase();\n    if (images.includes(extension)) {\n      return (\n        'image/' +\n        (extension === 'jpg'\n          ? 'jpeg'\n          : extension === 'svg'\n          ? 'svg+xml'\n          : extension)\n      );\n    }\n    if (text$1.includes(extension)) {\n      return 'text/' + extension;\n    }\n\n    return map[extension] || '';\n  };\n\n  var requestDataTransferItems = function requestDataTransferItems(\n    dataTransfer\n  ) {\n    return new Promise(function(resolve, reject) {\n      // try to get links from transfer, if found we'll exit immediately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n      var links = getLinks(dataTransfer);\n      if (links.length && !hasFiles(dataTransfer)) {\n        return resolve(links);\n      }\n      // try to get files from the transfer\n      getFiles(dataTransfer).then(resolve);\n    });\n  };\n\n  /**\n   * Test if datatransfer has files\n   */\n  var hasFiles = function hasFiles(dataTransfer) {\n    if (dataTransfer.files) return dataTransfer.files.length > 0;\n    return false;\n  };\n\n  /**\n   * Extracts files from a DataTransfer object\n   */\n  var getFiles = function getFiles(dataTransfer) {\n    return new Promise(function(resolve, reject) {\n      // get the transfer items as promises\n      var promisedFiles = (dataTransfer.items\n        ? Array.from(dataTransfer.items)\n        : []\n      )\n        // only keep file system items (files and directories)\n        .filter(function(item) {\n          return isFileSystemItem(item);\n        })\n\n        // map each item to promise\n        .map(function(item) {\n          return getFilesFromItem(item);\n        });\n\n      // if is empty, see if we can extract some info from the files property as a fallback\n      if (!promisedFiles.length) {\n        // TODO: test for directories (should not be allowed)\n        // Use FileReader, problem is that the files property gets lost in the process\n        resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n        return;\n      }\n\n      // done!\n      Promise.all(promisedFiles)\n        .then(function(returnedFileGroups) {\n          // flatten groups\n          var files = [];\n          returnedFileGroups.forEach(function(group) {\n            files.push.apply(files, group);\n          });\n\n          // done (filter out empty files)!\n          resolve(\n            files\n              .filter(function(file) {\n                return file;\n              })\n              .map(function(file) {\n                if (!file._relativePath)\n                  file._relativePath = file.webkitRelativePath;\n                return file;\n              })\n          );\n        })\n        .catch(console.error);\n    });\n  };\n\n  var isFileSystemItem = function isFileSystemItem(item) {\n    if (isEntry(item)) {\n      var entry = getAsEntry(item);\n      if (entry) {\n        return entry.isFile || entry.isDirectory;\n      }\n    }\n    return item.kind === 'file';\n  };\n\n  var getFilesFromItem = function getFilesFromItem(item) {\n    return new Promise(function(resolve, reject) {\n      if (isDirectoryEntry(item)) {\n        getFilesInDirectory(getAsEntry(item))\n          .then(resolve)\n          .catch(reject);\n        return;\n      }\n\n      resolve([item.getAsFile()]);\n    });\n  };\n\n  var getFilesInDirectory = function getFilesInDirectory(entry) {\n    return new Promise(function(resolve, reject) {\n      var files = [];\n\n      // the total entries to read\n      var dirCounter = 0;\n      var fileCounter = 0;\n\n      var resolveIfDone = function resolveIfDone() {\n        if (fileCounter === 0 && dirCounter === 0) {\n          resolve(files);\n        }\n      };\n\n      // the recursive function\n      var readEntries = function readEntries(dirEntry) {\n        dirCounter++;\n\n        var directoryReader = dirEntry.createReader();\n\n        // directories are returned in batches, we need to process all batches before we're done\n        var readBatch = function readBatch() {\n          directoryReader.readEntries(function(entries) {\n            if (entries.length === 0) {\n              dirCounter--;\n              resolveIfDone();\n              return;\n            }\n\n            entries.forEach(function(entry) {\n              // recursively read more directories\n              if (entry.isDirectory) {\n                readEntries(entry);\n              } else {\n                // read as file\n                fileCounter++;\n\n                entry.file(function(file) {\n                  var correctedFile = correctMissingFileType(file);\n                  if (entry.fullPath)\n                    correctedFile._relativePath = entry.fullPath;\n                  files.push(correctedFile);\n                  fileCounter--;\n                  resolveIfDone();\n                });\n              }\n            });\n\n            // try to get next batch of files\n            readBatch();\n          }, reject);\n        };\n\n        // read first batch of files\n        readBatch();\n      };\n\n      // go!\n      readEntries(entry);\n    });\n  };\n\n  var correctMissingFileType = function correctMissingFileType(file) {\n    if (file.type.length) return file;\n    var date = file.lastModifiedDate;\n    var name = file.name;\n    file = file.slice(\n      0,\n      file.size,\n      guesstimateMimeType(getExtensionFromFilename(file.name))\n    );\n    file.name = name;\n    file.lastModifiedDate = date;\n    return file;\n  };\n\n  var isDirectoryEntry = function isDirectoryEntry(item) {\n    return isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n  };\n\n  var isEntry = function isEntry(item) {\n    return 'webkitGetAsEntry' in item;\n  };\n\n  var getAsEntry = function getAsEntry(item) {\n    return item.webkitGetAsEntry();\n  };\n\n  /**\n   * Extracts links from a DataTransfer object\n   */\n  var getLinks = function getLinks(dataTransfer) {\n    var links = [];\n    try {\n      // look in meta data property\n      links = getLinksFromTransferMetaData(dataTransfer);\n      if (links.length) {\n        return links;\n      }\n      links = getLinksFromTransferURLData(dataTransfer);\n    } catch (e) {\n      // nope nope nope (probably IE trouble)\n    }\n    return links;\n  };\n\n  var getLinksFromTransferURLData = function getLinksFromTransferURLData(\n    dataTransfer\n  ) {\n    var data = dataTransfer.getData('url');\n    if (typeof data === 'string' && data.length) {\n      return [data];\n    }\n    return [];\n  };\n\n  var getLinksFromTransferMetaData = function getLinksFromTransferMetaData(\n    dataTransfer\n  ) {\n    var data = dataTransfer.getData('text/html');\n    if (typeof data === 'string' && data.length) {\n      var matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n      if (matches) {\n        return [matches[1]];\n      }\n    }\n    return [];\n  };\n\n  var dragNDropObservers = [];\n\n  var eventPosition = function eventPosition(e) {\n    return {\n      pageLeft: e.pageX,\n      pageTop: e.pageY,\n      scopeLeft: e.offsetX || e.layerX,\n      scopeTop: e.offsetY || e.layerY\n    };\n  };\n\n  var createDragNDropClient = function createDragNDropClient(\n    element,\n    scopeToObserve,\n    filterElement\n  ) {\n    var observer = getDragNDropObserver(scopeToObserve);\n\n    var client = {\n      element: element,\n      filterElement: filterElement,\n      state: null,\n      ondrop: function ondrop() {},\n      onenter: function onenter() {},\n      ondrag: function ondrag() {},\n      onexit: function onexit() {},\n      onload: function onload() {},\n      allowdrop: function allowdrop() {}\n    };\n\n    client.destroy = observer.addListener(client);\n\n    return client;\n  };\n\n  var getDragNDropObserver = function getDragNDropObserver(element) {\n    // see if already exists, if so, return\n    var observer = dragNDropObservers.find(function(item) {\n      return item.element === element;\n    });\n    if (observer) {\n      return observer;\n    }\n\n    // create new observer, does not yet exist for this element\n    var newObserver = createDragNDropObserver(element);\n    dragNDropObservers.push(newObserver);\n    return newObserver;\n  };\n\n  var createDragNDropObserver = function createDragNDropObserver(element) {\n    var clients = [];\n\n    var routes = {\n      dragenter: dragenter,\n      dragover: dragover,\n      dragleave: dragleave,\n      drop: drop\n    };\n\n    var handlers = {};\n\n    forin(routes, function(event, createHandler) {\n      handlers[event] = createHandler(element, clients);\n      element.addEventListener(event, handlers[event], false);\n    });\n\n    var observer = {\n      element: element,\n      addListener: function addListener(client) {\n        // add as client\n        clients.push(client);\n\n        // return removeListener function\n        return function() {\n          // remove client\n          clients.splice(clients.indexOf(client), 1);\n\n          // if no more clients, clean up observer\n          if (clients.length === 0) {\n            dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n            forin(routes, function(event) {\n              element.removeEventListener(event, handlers[event], false);\n            });\n          }\n        };\n      }\n    };\n\n    return observer;\n  };\n\n  var elementFromPoint = function elementFromPoint(root, point) {\n    if (!('elementFromPoint' in root)) {\n      root = document;\n    }\n    return root.elementFromPoint(point.x, point.y);\n  };\n\n  var isEventTarget = function isEventTarget(e, target) {\n    // get root\n    var root = getRootNode(target);\n\n    // get element at position\n    // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n    var elementAtPosition = elementFromPoint(root, {\n      x: e.pageX - window.pageXOffset,\n      y: e.pageY - window.pageYOffset\n    });\n\n    // test if target is the element or if one of its children is\n    return elementAtPosition === target || target.contains(elementAtPosition);\n  };\n\n  var initialTarget = null;\n\n  var setDropEffect = function setDropEffect(dataTransfer, effect) {\n    // is in try catch as IE11 will throw error if not\n    try {\n      dataTransfer.dropEffect = effect;\n    } catch (e) {}\n  };\n\n  var dragenter = function dragenter(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      initialTarget = e.target;\n\n      clients.forEach(function(client) {\n        var element = client.element,\n          onenter = client.onenter;\n\n        if (isEventTarget(e, element)) {\n          client.state = 'enter';\n\n          // fire enter event\n          onenter(eventPosition(e));\n        }\n      });\n    };\n  };\n\n  var dragover = function dragover(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      var dataTransfer = e.dataTransfer;\n\n      requestDataTransferItems(dataTransfer).then(function(items) {\n        var overDropTarget = false;\n\n        clients.some(function(client) {\n          var filterElement = client.filterElement,\n            element = client.element,\n            onenter = client.onenter,\n            onexit = client.onexit,\n            ondrag = client.ondrag,\n            allowdrop = client.allowdrop;\n\n          // by default we can drop\n          setDropEffect(dataTransfer, 'copy');\n\n          // allow transfer of these items\n          var allowsTransfer = allowdrop(items);\n\n          // only used when can be dropped on page\n          if (!allowsTransfer) {\n            setDropEffect(dataTransfer, 'none');\n            return;\n          }\n\n          // targetting this client\n          if (isEventTarget(e, element)) {\n            overDropTarget = true;\n\n            // had no previous state, means we are entering this client\n            if (client.state === null) {\n              client.state = 'enter';\n              onenter(eventPosition(e));\n              return;\n            }\n\n            // now over element (no matter if it allows the drop or not)\n            client.state = 'over';\n\n            // needs to allow transfer\n            if (filterElement && !allowsTransfer) {\n              setDropEffect(dataTransfer, 'none');\n              return;\n            }\n\n            // dragging\n            ondrag(eventPosition(e));\n          } else {\n            // should be over an element to drop\n            if (filterElement && !overDropTarget) {\n              setDropEffect(dataTransfer, 'none');\n            }\n\n            // might have just left this client?\n            if (client.state) {\n              client.state = null;\n              onexit(eventPosition(e));\n            }\n          }\n        });\n      });\n    };\n  };\n\n  var drop = function drop(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      var dataTransfer = e.dataTransfer;\n\n      requestDataTransferItems(dataTransfer).then(function(items) {\n        clients.forEach(function(client) {\n          var filterElement = client.filterElement,\n            element = client.element,\n            ondrop = client.ondrop,\n            onexit = client.onexit,\n            allowdrop = client.allowdrop;\n\n          client.state = null;\n\n          // if we're filtering on element we need to be over the element to drop\n          if (filterElement && !isEventTarget(e, element)) return;\n\n          // no transfer for this client\n          if (!allowdrop(items)) return onexit(eventPosition(e));\n\n          // we can drop these items on this client\n          ondrop(eventPosition(e), items);\n        });\n      });\n    };\n  };\n\n  var dragleave = function dragleave(root, clients) {\n    return function(e) {\n      if (initialTarget !== e.target) {\n        return;\n      }\n\n      clients.forEach(function(client) {\n        var onexit = client.onexit;\n\n        client.state = null;\n\n        onexit(eventPosition(e));\n      });\n    };\n  };\n\n  var createHopper = function createHopper(scope, validateItems, options) {\n    // is now hopper scope\n    scope.classList.add('filepond--hopper');\n\n    // shortcuts\n    var catchesDropsOnPage = options.catchesDropsOnPage,\n      requiresDropOnElement = options.requiresDropOnElement,\n      _options$filterItems = options.filterItems,\n      filterItems =\n        _options$filterItems === void 0\n          ? function(items) {\n              return items;\n            }\n          : _options$filterItems;\n\n    // create a dnd client\n    var client = createDragNDropClient(\n      scope,\n      catchesDropsOnPage ? document.documentElement : scope,\n      requiresDropOnElement\n    );\n\n    // current client state\n    var lastState = '';\n    var currentState = '';\n\n    // determines if a file may be dropped\n    client.allowdrop = function(items) {\n      // TODO: if we can, throw error to indicate the items cannot by dropped\n\n      return validateItems(filterItems(items));\n    };\n\n    client.ondrop = function(position, items) {\n      var filteredItems = filterItems(items);\n\n      if (!validateItems(filteredItems)) {\n        api.ondragend(position);\n        return;\n      }\n\n      currentState = 'drag-drop';\n\n      api.onload(filteredItems, position);\n    };\n\n    client.ondrag = function(position) {\n      api.ondrag(position);\n    };\n\n    client.onenter = function(position) {\n      currentState = 'drag-over';\n\n      api.ondragstart(position);\n    };\n\n    client.onexit = function(position) {\n      currentState = 'drag-exit';\n\n      api.ondragend(position);\n    };\n\n    var api = {\n      updateHopperState: function updateHopperState() {\n        if (lastState !== currentState) {\n          scope.dataset.hopperState = currentState;\n          lastState = currentState;\n        }\n      },\n      onload: function onload() {},\n      ondragstart: function ondragstart() {},\n      ondrag: function ondrag() {},\n      ondragend: function ondragend() {},\n      destroy: function destroy() {\n        // destroy client\n        client.destroy();\n      }\n    };\n\n    return api;\n  };\n\n  var listening = false;\n  var listeners$1 = [];\n\n  var handlePaste = function handlePaste(e) {\n    // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n    var activeEl = document.activeElement;\n    if (activeEl && /textarea|input/i.test(activeEl.nodeName)) {\n      // test textarea or input is contained in filepond root\n      var inScope = false;\n      var element = activeEl;\n      while (element !== document.body) {\n        if (element.classList.contains('filepond--root')) {\n          inScope = true;\n          break;\n        }\n        element = element.parentNode;\n      }\n\n      if (!inScope) return;\n    }\n\n    requestDataTransferItems(e.clipboardData).then(function(files) {\n      // no files received\n      if (!files.length) {\n        return;\n      }\n\n      // notify listeners of received files\n      listeners$1.forEach(function(listener) {\n        return listener(files);\n      });\n    });\n  };\n\n  var listen = function listen(cb) {\n    // can't add twice\n    if (listeners$1.includes(cb)) {\n      return;\n    }\n\n    // add initial listener\n    listeners$1.push(cb);\n\n    // setup paste listener for entire page\n    if (listening) {\n      return;\n    }\n\n    listening = true;\n    document.addEventListener('paste', handlePaste);\n  };\n\n  var unlisten = function unlisten(listener) {\n    arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n    // clean up\n    if (listeners$1.length === 0) {\n      document.removeEventListener('paste', handlePaste);\n      listening = false;\n    }\n  };\n\n  var createPaster = function createPaster() {\n    var cb = function cb(files) {\n      api.onload(files);\n    };\n\n    var api = {\n      destroy: function destroy() {\n        unlisten(cb);\n      },\n      onload: function onload() {}\n    };\n\n    listen(cb);\n\n    return api;\n  };\n\n  /**\n   * Creates the file view\n   */\n  var create$d = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.element.id = 'filepond--assistant-' + props.id;\n    attr(root.element, 'role', 'status');\n    attr(root.element, 'aria-live', 'polite');\n    attr(root.element, 'aria-relevant', 'additions');\n  };\n\n  var addFilesNotificationTimeout = null;\n  var notificationClearTimeout = null;\n\n  var filenames = [];\n\n  var assist = function assist(root, message) {\n    root.element.textContent = message;\n  };\n\n  var clear$1 = function clear(root) {\n    root.element.textContent = '';\n  };\n\n  var listModified = function listModified(root, filename, label) {\n    var total = root.query('GET_TOTAL_ITEMS');\n    assist(\n      root,\n      label +\n        ' ' +\n        filename +\n        ', ' +\n        total +\n        ' ' +\n        (total === 1\n          ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n          : root.query('GET_LABEL_FILE_COUNT_PLURAL'))\n    );\n\n    // clear group after set amount of time so the status is not read twice\n    clearTimeout(notificationClearTimeout);\n    notificationClearTimeout = setTimeout(function() {\n      clear$1(root);\n    }, 1500);\n  };\n\n  var isUsingFilePond = function isUsingFilePond(root) {\n    return root.element.parentNode.contains(document.activeElement);\n  };\n\n  var itemAdded = function itemAdded(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    if (!isUsingFilePond(root)) {\n      return;\n    }\n\n    root.element.textContent = '';\n    var item = root.query('GET_ITEM', action.id);\n    filenames.push(item.filename);\n\n    clearTimeout(addFilesNotificationTimeout);\n    addFilesNotificationTimeout = setTimeout(function() {\n      listModified(\n        root,\n        filenames.join(', '),\n        root.query('GET_LABEL_FILE_ADDED')\n      );\n\n      filenames.length = 0;\n    }, 750);\n  };\n\n  var itemRemoved = function itemRemoved(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    if (!isUsingFilePond(root)) {\n      return;\n    }\n\n    var item = action.item;\n    listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n  };\n\n  var itemProcessed = function itemProcessed(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n    var label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n    assist(root, filename + ' ' + label);\n  };\n\n  var itemProcessedUndo = function itemProcessedUndo(_ref5) {\n    var root = _ref5.root,\n      action = _ref5.action;\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n    var label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n    assist(root, filename + ' ' + label);\n  };\n\n  var itemError = function itemError(_ref6) {\n    var root = _ref6.root,\n      action = _ref6.action;\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    assist(root, action.status.main + ' ' + filename + ' ' + action.status.sub);\n  };\n\n  var assistant = createView({\n    create: create$d,\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: itemAdded,\n      DID_REMOVE_ITEM: itemRemoved,\n      DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n      DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n      DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n      DID_THROW_ITEM_REMOVE_ERROR: itemError,\n      DID_THROW_ITEM_LOAD_ERROR: itemError,\n      DID_THROW_ITEM_INVALID: itemError,\n      DID_THROW_ITEM_PROCESSING_ERROR: itemError\n    }),\n\n    tag: 'span',\n    name: 'assistant'\n  });\n\n  var toCamels = function toCamels(string) {\n    var separator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n    return string.replace(new RegExp(separator + '.', 'g'), function(sub) {\n      return sub.charAt(1).toUpperCase();\n    });\n  };\n\n  var debounce = function debounce(func) {\n    var interval =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n    var immidiateOnly =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var last = Date.now();\n    var timeout = null;\n\n    return function() {\n      for (\n        var _len = arguments.length, args = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        args[_key] = arguments[_key];\n      }\n      clearTimeout(timeout);\n\n      var dist = Date.now() - last;\n\n      var fn = function fn() {\n        last = Date.now();\n        func.apply(void 0, args);\n      };\n\n      if (dist < interval) {\n        // we need to delay by the difference between interval and dist\n        // for example: if distance is 10 ms and interval is 16 ms,\n        // we need to wait an additional 6ms before calling the function)\n        if (!immidiateOnly) {\n          timeout = setTimeout(fn, interval - dist);\n        }\n      } else {\n        // go!\n        fn();\n      }\n    };\n  };\n\n  var MAX_FILES_LIMIT = 1000000;\n\n  var prevent = function prevent(e) {\n    return e.preventDefault();\n  };\n\n  var create$e = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // Add id\n    var id = root.query('GET_ID');\n    if (id) {\n      root.element.id = id;\n    }\n\n    // Add className\n    var className = root.query('GET_CLASS_NAME');\n    if (className) {\n      className\n        .split(' ')\n        .filter(function(name) {\n          return name.length;\n        })\n        .forEach(function(name) {\n          root.element.classList.add(name);\n        });\n    }\n\n    // Field label\n    root.ref.label = root.appendChildView(\n      root.createChildView(\n        dropLabel,\n        Object.assign({}, props, {\n          translateY: null,\n          caption: root.query('GET_LABEL_IDLE')\n        })\n      )\n    );\n\n    // List of items\n    root.ref.list = root.appendChildView(\n      root.createChildView(listScroller, { translateY: null })\n    );\n\n    // Background panel\n    root.ref.panel = root.appendChildView(\n      root.createChildView(panel, { name: 'panel-root' })\n    );\n\n    // Assistant notifies assistive tech when content changes\n    root.ref.assistant = root.appendChildView(\n      root.createChildView(assistant, Object.assign({}, props))\n    );\n\n    // Data\n    root.ref.data = root.appendChildView(\n      root.createChildView(data, Object.assign({}, props))\n    );\n\n    // Measure (tests if fixed height was set)\n    // DOCTYPE needs to be set for this to work\n    root.ref.measure = createElement$1('div');\n    root.ref.measure.style.height = '100%';\n    root.element.appendChild(root.ref.measure);\n\n    // information on the root height or fixed height status\n    root.ref.bounds = null;\n\n    // apply initial style properties\n    root\n      .query('GET_STYLES')\n      .filter(function(style) {\n        return !isEmpty(style.value);\n      })\n      .map(function(_ref2) {\n        var name = _ref2.name,\n          value = _ref2.value;\n        root.element.dataset[name] = value;\n      });\n\n    // determine if width changed\n    root.ref.widthPrevious = null;\n    root.ref.widthUpdated = debounce(function() {\n      root.ref.updateHistory = [];\n      root.dispatch('DID_RESIZE_ROOT');\n    }, 250);\n\n    // history of updates\n    root.ref.previousAspectRatio = null;\n    root.ref.updateHistory = [];\n\n    // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n    var canHover = window.matchMedia('(pointer: fine) and (hover: hover)')\n      .matches;\n    var hasPointerEvents = 'PointerEvent' in window;\n    if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n      root.element.addEventListener('touchmove', prevent, { passive: false });\n      root.element.addEventListener('gesturestart', prevent);\n    }\n  };\n\n  var write$9 = function write(_ref3) {\n    var root = _ref3.root,\n      props = _ref3.props,\n      actions = _ref3.actions;\n\n    // route actions\n    route$5({ root: root, props: props, actions: actions });\n\n    // apply style properties\n    actions\n      .filter(function(action) {\n        return /^DID_SET_STYLE_/.test(action.type);\n      })\n      .filter(function(action) {\n        return !isEmpty(action.data.value);\n      })\n      .map(function(_ref4) {\n        var type = _ref4.type,\n          data = _ref4.data;\n        var name = toCamels(type.substr(8).toLowerCase(), '_');\n        root.element.dataset[name] = data.value;\n        root.invalidateLayout();\n      });\n\n    if (root.rect.element.hidden) return;\n\n    if (root.rect.element.width !== root.ref.widthPrevious) {\n      root.ref.widthPrevious = root.rect.element.width;\n      root.ref.widthUpdated();\n    }\n\n    // get box bounds, we do this only once\n    var bounds = root.ref.bounds;\n    if (!bounds) {\n      bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n      // destroy measure element\n      root.element.removeChild(root.ref.measure);\n      root.ref.measure = null;\n    }\n\n    // get quick references to various high level parts of the upload tool\n    var _root$ref = root.ref,\n      hopper = _root$ref.hopper,\n      label = _root$ref.label,\n      list = _root$ref.list,\n      panel = _root$ref.panel;\n\n    // sets correct state to hopper scope\n    if (hopper) {\n      hopper.updateHopperState();\n    }\n\n    // bool to indicate if we're full or not\n    var aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n    var isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n    var totalItems = root.query('GET_TOTAL_ITEMS');\n    var maxItems = isMultiItem\n      ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT\n      : 1;\n    var atMaxCapacity = totalItems === maxItems;\n\n    // action used to add item\n    var addAction = actions.find(function(action) {\n      return action.type === 'DID_ADD_ITEM';\n    });\n\n    // if reached max capacity and we've just reached it\n    if (atMaxCapacity && addAction) {\n      // get interaction type\n      var interactionMethod = addAction.data.interactionMethod;\n\n      // hide label\n      label.opacity = 0;\n\n      if (isMultiItem) {\n        label.translateY = -40;\n      } else {\n        if (interactionMethod === InteractionMethod.API) {\n          label.translateX = 40;\n        } else if (interactionMethod === InteractionMethod.BROWSE) {\n          label.translateY = 40;\n        } else {\n          label.translateY = 30;\n        }\n      }\n    } else if (!atMaxCapacity) {\n      label.opacity = 1;\n      label.translateX = 0;\n      label.translateY = 0;\n    }\n\n    var listItemMargin = calculateListItemMargin(root);\n\n    var listHeight = calculateListHeight(root);\n\n    var labelHeight = label.rect.element.height;\n    var currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n    var listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n    var listMarginBottom =\n      totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n    var visualHeight =\n      currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n    var boundsHeight =\n      currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n    // link list to label bottom position\n    list.translateY =\n      Math.max(0, currentLabelHeight - list.rect.element.marginTop) -\n      listItemMargin.top;\n\n    if (aspectRatio) {\n      // fixed aspect ratio\n\n      // calculate height based on width\n      var width = root.rect.element.width;\n      var height = width * aspectRatio;\n\n      // clear history if aspect ratio has changed\n      if (aspectRatio !== root.ref.previousAspectRatio) {\n        root.ref.previousAspectRatio = aspectRatio;\n        root.ref.updateHistory = [];\n      }\n\n      // remember this width\n      var history = root.ref.updateHistory;\n      history.push(width);\n\n      var MAX_BOUNCES = 2;\n      if (history.length > MAX_BOUNCES * 2) {\n        var l = history.length;\n        var bottom = l - 10;\n        var bounces = 0;\n        for (var i = l; i >= bottom; i--) {\n          if (history[i] === history[i - 2]) {\n            bounces++;\n          }\n\n          if (bounces >= MAX_BOUNCES) {\n            // dont adjust height\n            return;\n          }\n        }\n      }\n\n      // fix height of panel so it adheres to aspect ratio\n      panel.scalable = false;\n      panel.height = height;\n\n      // available height for list\n      var listAvailableHeight =\n        // the height of the panel minus the label height\n        height -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      if (listHeight.visual > listAvailableHeight) {\n        list.overflow = listAvailableHeight;\n      } else {\n        list.overflow = null;\n      }\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = height;\n    } else if (bounds.fixedHeight) {\n      // fixed height\n\n      // fix height of panel\n      panel.scalable = false;\n\n      // available height for list\n      var _listAvailableHeight =\n        // the height of the panel minus the label height\n        bounds.fixedHeight -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      // set list height\n      if (listHeight.visual > _listAvailableHeight) {\n        list.overflow = _listAvailableHeight;\n      } else {\n        list.overflow = null;\n      }\n\n      // no need to set container bounds as these are handles by CSS fixed height\n    } else if (bounds.cappedHeight) {\n      // max-height\n\n      // not a fixed height panel\n      var isCappedHeight = visualHeight >= bounds.cappedHeight;\n      var panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n      panel.scalable = true;\n      panel.height = isCappedHeight\n        ? panelHeight\n        : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n      // available height for list\n      var _listAvailableHeight2 =\n        // the height of the panel minus the label height\n        panelHeight -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      // set list height (if is overflowing)\n      if (\n        visualHeight > bounds.cappedHeight &&\n        listHeight.visual > _listAvailableHeight2\n      ) {\n        list.overflow = _listAvailableHeight2;\n      } else {\n        list.overflow = null;\n      }\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = Math.min(\n        bounds.cappedHeight,\n        boundsHeight - listItemMargin.top - listItemMargin.bottom\n      );\n    } else {\n      // flexible height\n\n      // not a fixed height panel\n      var itemMargin =\n        totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n      panel.scalable = true;\n      panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n    }\n  };\n\n  var calculateListItemMargin = function calculateListItemMargin(root) {\n    var item = root.ref.list.childViews[0].childViews[0];\n    return item\n      ? {\n          top: item.rect.element.marginTop,\n          bottom: item.rect.element.marginBottom\n        }\n      : {\n          top: 0,\n          bottom: 0\n        };\n  };\n\n  var calculateListHeight = function calculateListHeight(root) {\n    var visual = 0;\n    var bounds = 0;\n\n    // get file list reference\n    var scrollList = root.ref.list;\n    var itemList = scrollList.childViews[0];\n    var visibleChildren = itemList.childViews.filter(function(child) {\n      return child.rect.element.height;\n    });\n    var children = root\n      .query('GET_ACTIVE_ITEMS')\n      .map(function(item) {\n        return visibleChildren.find(function(child) {\n          return child.id === item.id;\n        });\n      })\n      .filter(function(item) {\n        return item;\n      });\n\n    // no children, done!\n    if (children.length === 0) return { visual: visual, bounds: bounds };\n\n    var horizontalSpace = itemList.rect.element.width;\n    var dragIndex = getItemIndexByPosition(\n      itemList,\n      children,\n      scrollList.dragCoordinates\n    );\n\n    var childRect = children[0].rect.element;\n\n    var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n    var itemWidth = childRect.width + itemHorizontalMargin;\n    var itemHeight = childRect.height + itemVerticalMargin;\n\n    var newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n    var removedItem = children.find(function(child) {\n      return child.markedForRemoval && child.opacity < 0.45;\n    })\n      ? -1\n      : 0;\n    var verticalItemCount = children.length + newItem + removedItem;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      children.forEach(function(item) {\n        var height = item.rect.element.height + itemVerticalMargin;\n        bounds += height;\n        visual += height * item.opacity;\n      });\n    }\n    // grid\n    else {\n      bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n      visual = bounds;\n    }\n\n    return { visual: visual, bounds: bounds };\n  };\n\n  var calculateRootBoundingBoxHeight = function calculateRootBoundingBoxHeight(\n    root\n  ) {\n    var height = root.ref.measureHeight || null;\n    var cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n    var fixedHeight = height === 0 ? null : height;\n\n    return {\n      cappedHeight: cappedHeight,\n      fixedHeight: fixedHeight\n    };\n  };\n\n  var exceedsMaxFiles = function exceedsMaxFiles(root, items) {\n    var allowReplace = root.query('GET_ALLOW_REPLACE');\n    var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n    var totalItems = root.query('GET_TOTAL_ITEMS');\n    var maxItems = root.query('GET_MAX_FILES');\n\n    // total amount of items being dragged\n    var totalBrowseItems = items.length;\n\n    // if does not allow multiple items and dragging more than one item\n    if (!allowMultiple && totalBrowseItems > 1) {\n      return true;\n    }\n\n    // limit max items to one if not allowed to drop multiple items\n    maxItems = allowMultiple ? maxItems : allowReplace ? maxItems : 1;\n\n    // no more room?\n    var hasMaxItems = isInt(maxItems);\n    if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n      root.dispatch('DID_THROW_MAX_FILES', {\n        source: items,\n        error: createResponse('warning', 0, 'Max files')\n      });\n\n      return true;\n    }\n\n    return false;\n  };\n\n  var getDragIndex = function getDragIndex(list, children, position) {\n    var itemList = list.childViews[0];\n    return getItemIndexByPosition(itemList, children, {\n      left: position.scopeLeft - itemList.rect.element.left,\n      top:\n        position.scopeTop -\n        (list.rect.outer.top +\n          list.rect.element.marginTop +\n          list.rect.element.scrollTop)\n    });\n  };\n\n  /**\n   * Enable or disable file drop functionality\n   */\n  var toggleDrop = function toggleDrop(root) {\n    var isAllowed = root.query('GET_ALLOW_DROP');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.hopper) {\n      var hopper = createHopper(\n        root.element,\n        function(items) {\n          // these files don't fit so stop here\n          if (exceedsMaxFiles(root, items)) return false;\n\n          // allow quick validation of dropped items\n          var beforeDropFile =\n            root.query('GET_BEFORE_DROP_FILE') ||\n            function() {\n              return true;\n            };\n\n          // all items should be validated by all filters as valid\n          var dropValidation = root.query('GET_DROP_VALIDATION');\n          return dropValidation\n            ? items.every(function(item) {\n                return (\n                  applyFilters('ALLOW_HOPPER_ITEM', item, {\n                    query: root.query\n                  }).every(function(result) {\n                    return result === true;\n                  }) && beforeDropFile(item)\n                );\n              })\n            : true;\n        },\n        {\n          filterItems: function filterItems(items) {\n            var ignoredFiles = root.query('GET_IGNORED_FILES');\n            return items.filter(function(item) {\n              if (isFile(item)) {\n                return !ignoredFiles.includes(item.name.toLowerCase());\n              }\n              return true;\n            });\n          },\n          catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n          requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT')\n        }\n      );\n\n      hopper.onload = function(items, position) {\n        // get item children elements and sort based on list sort\n        var list = root.ref.list.childViews[0];\n        var visibleChildren = list.childViews.filter(function(child) {\n          return child.rect.element.height;\n        });\n        var children = root\n          .query('GET_ACTIVE_ITEMS')\n          .map(function(item) {\n            return visibleChildren.find(function(child) {\n              return child.id === item.id;\n            });\n          })\n          .filter(function(item) {\n            return item;\n          });\n\n        // go\n        root.dispatch('ADD_ITEMS', {\n          items: items,\n          index: getDragIndex(root.ref.list, children, position),\n          interactionMethod: InteractionMethod.DROP\n        });\n\n        root.dispatch('DID_DROP', { position: position });\n\n        root.dispatch('DID_END_DRAG', { position: position });\n      };\n\n      hopper.ondragstart = function(position) {\n        root.dispatch('DID_START_DRAG', { position: position });\n      };\n\n      hopper.ondrag = debounce(function(position) {\n        root.dispatch('DID_DRAG', { position: position });\n      });\n\n      hopper.ondragend = function(position) {\n        root.dispatch('DID_END_DRAG', { position: position });\n      };\n\n      root.ref.hopper = hopper;\n\n      root.ref.drip = root.appendChildView(root.createChildView(drip));\n    } else if (!enabled && root.ref.hopper) {\n      root.ref.hopper.destroy();\n      root.ref.hopper = null;\n      root.removeChildView(root.ref.drip);\n    }\n  };\n\n  /**\n   * Enable or disable browse functionality\n   */\n  var toggleBrowse = function toggleBrowse(root, props) {\n    var isAllowed = root.query('GET_ALLOW_BROWSE');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.browser) {\n      root.ref.browser = root.appendChildView(\n        root.createChildView(\n          browser,\n          Object.assign({}, props, {\n            onload: function onload(items) {\n              // these files don't fit so stop here\n              if (exceedsMaxFiles(root, items)) return false;\n\n              // add items!\n              root.dispatch('ADD_ITEMS', {\n                items: items,\n                index: -1,\n                interactionMethod: InteractionMethod.BROWSE\n              });\n            }\n          })\n        ),\n\n        0\n      );\n    } else if (!enabled && root.ref.browser) {\n      root.removeChildView(root.ref.browser);\n      root.ref.browser = null;\n    }\n  };\n\n  /**\n   * Enable or disable paste functionality\n   */\n  var togglePaste = function togglePaste(root) {\n    var isAllowed = root.query('GET_ALLOW_PASTE');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.paster) {\n      root.ref.paster = createPaster();\n      root.ref.paster.onload = function(items) {\n        root.dispatch('ADD_ITEMS', {\n          items: items,\n          index: -1,\n          interactionMethod: InteractionMethod.PASTE\n        });\n      };\n    } else if (!enabled && root.ref.paster) {\n      root.ref.paster.destroy();\n      root.ref.paster = null;\n    }\n  };\n\n  /**\n   * Route actions\n   */\n  var route$5 = createRoute({\n    DID_SET_ALLOW_BROWSE: function DID_SET_ALLOW_BROWSE(_ref5) {\n      var root = _ref5.root,\n        props = _ref5.props;\n      toggleBrowse(root, props);\n    },\n    DID_SET_ALLOW_DROP: function DID_SET_ALLOW_DROP(_ref6) {\n      var root = _ref6.root;\n      toggleDrop(root);\n    },\n    DID_SET_ALLOW_PASTE: function DID_SET_ALLOW_PASTE(_ref7) {\n      var root = _ref7.root;\n      togglePaste(root);\n    },\n    DID_SET_DISABLED: function DID_SET_DISABLED(_ref8) {\n      var root = _ref8.root,\n        props = _ref8.props;\n      toggleDrop(root);\n      togglePaste(root);\n      toggleBrowse(root, props);\n      var isDisabled = root.query('GET_DISABLED');\n      if (isDisabled) {\n        root.element.dataset.disabled = 'disabled';\n      } else {\n        // delete root.element.dataset.disabled; <= this does not work on iOS 10\n        root.element.removeAttribute('data-disabled');\n      }\n    }\n  });\n\n  var root = createView({\n    name: 'root',\n    read: function read(_ref9) {\n      var root = _ref9.root;\n      if (root.ref.measure) {\n        root.ref.measureHeight = root.ref.measure.offsetHeight;\n      }\n    },\n    create: create$e,\n    write: write$9,\n    destroy: function destroy(_ref10) {\n      var root = _ref10.root;\n      if (root.ref.paster) {\n        root.ref.paster.destroy();\n      }\n      if (root.ref.hopper) {\n        root.ref.hopper.destroy();\n      }\n      root.element.removeEventListener('touchmove', prevent);\n      root.element.removeEventListener('gesturestart', prevent);\n    },\n    mixins: {\n      styles: ['height']\n    }\n  });\n\n  // creates the app\n  var createApp = function createApp() {\n    var initialOptions =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // let element\n    var originalElement = null;\n\n    // get default options\n    var defaultOptions = getOptions();\n\n    // create the data store, this will contain all our app info\n    var store = createStore(\n      // initial state (should be serializable)\n      createInitialState(defaultOptions),\n\n      // queries\n      [queries, createOptionQueries(defaultOptions)],\n\n      // action handlers\n      [actions, createOptionActions(defaultOptions)]\n    );\n\n    // set initial options\n    store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n    // kick thread if visibility changes\n    var visibilityHandler = function visibilityHandler() {\n      if (document.hidden) return;\n      store.dispatch('KICK');\n    };\n    document.addEventListener('visibilitychange', visibilityHandler);\n\n    // re-render on window resize start and finish\n    var resizeDoneTimer = null;\n    var isResizing = false;\n    var isResizingHorizontally = false;\n    var initialWindowWidth = null;\n    var currentWindowWidth = null;\n    var resizeHandler = function resizeHandler() {\n      if (!isResizing) {\n        isResizing = true;\n      }\n      clearTimeout(resizeDoneTimer);\n      resizeDoneTimer = setTimeout(function() {\n        isResizing = false;\n        initialWindowWidth = null;\n        currentWindowWidth = null;\n        if (isResizingHorizontally) {\n          isResizingHorizontally = false;\n          store.dispatch('DID_STOP_RESIZE');\n        }\n      }, 500);\n    };\n    window.addEventListener('resize', resizeHandler);\n\n    // render initial view\n    var view = root(store, { id: getUniqueId() });\n\n    //\n    // PRIVATE API -------------------------------------------------------------------------------------\n    //\n    var isResting = false;\n    var isHidden = false;\n\n    var readWriteApi = {\n      // necessary for update loop\n\n      /**\n       * Reads from dom (never call manually)\n       * @private\n       */\n      _read: function _read() {\n        // test if we're resizing horizontally\n        // TODO: see if we can optimize this by measuring root rect\n        if (isResizing) {\n          currentWindowWidth = window.innerWidth;\n          if (!initialWindowWidth) {\n            initialWindowWidth = currentWindowWidth;\n          }\n\n          if (\n            !isResizingHorizontally &&\n            currentWindowWidth !== initialWindowWidth\n          ) {\n            store.dispatch('DID_START_RESIZE');\n            isResizingHorizontally = true;\n          }\n        }\n\n        if (isHidden && isResting) {\n          // test if is no longer hidden\n          isResting = view.element.offsetParent === null;\n        }\n\n        // if resting, no need to read as numbers will still all be correct\n        if (isResting) return;\n\n        // read view data\n        view._read();\n\n        // if is hidden we need to know so we exit rest mode when revealed\n        isHidden = view.rect.element.hidden;\n      },\n\n      /**\n       * Writes to dom (never call manually)\n       * @private\n       */\n      _write: function _write(ts) {\n        // get all actions from store\n        var actions = store\n          .processActionQueue()\n\n          // filter out set actions (these will automatically trigger DID_SET)\n          .filter(function(action) {\n            return !/^SET_/.test(action.type);\n          });\n\n        // if was idling and no actions stop here\n        if (isResting && !actions.length) return;\n\n        // some actions might trigger events\n        routeActionsToEvents(actions);\n\n        // update the view\n        isResting = view._write(ts, actions, isResizingHorizontally);\n\n        // will clean up all archived items\n        removeReleasedItems(store.query('GET_ITEMS'));\n\n        // now idling\n        if (isResting) {\n          store.processDispatchQueue();\n        }\n      }\n    };\n\n    //\n    // EXPOSE EVENTS -------------------------------------------------------------------------------------\n    //\n    var createEvent = function createEvent(name) {\n      return function(data) {\n        // create default event\n        var event = {\n          type: name\n        };\n\n        // no data to add\n        if (!data) {\n          return event;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('error')) {\n          event.error = data.error ? Object.assign({}, data.error) : null;\n        }\n\n        if (data.status) {\n          event.status = Object.assign({}, data.status);\n        }\n\n        if (data.file) {\n          event.output = data.file;\n        }\n\n        // only source is available, else add item if possible\n        if (data.source) {\n          event.file = data.source;\n        } else if (data.item || data.id) {\n          var item = data.item ? data.item : store.query('GET_ITEM', data.id);\n          event.file = item ? createItemAPI(item) : null;\n        }\n\n        // map all items in a possible items array\n        if (data.items) {\n          event.items = data.items.map(createItemAPI);\n        }\n\n        // if this is a progress event add the progress amount\n        if (/progress/.test(name)) {\n          event.progress = data.progress;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('origin') && data.hasOwnProperty('target')) {\n          event.origin = data.origin;\n          event.target = data.target;\n        }\n\n        return event;\n      };\n    };\n\n    var eventRoutes = {\n      DID_DESTROY: createEvent('destroy'),\n\n      DID_INIT: createEvent('init'),\n\n      DID_THROW_MAX_FILES: createEvent('warning'),\n\n      DID_INIT_ITEM: createEvent('initfile'),\n      DID_START_ITEM_LOAD: createEvent('addfilestart'),\n      DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n      DID_LOAD_ITEM: createEvent('addfile'),\n\n      DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n      DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n      DID_THROW_ITEM_REMOVE_ERROR: [\n        createEvent('error'),\n        createEvent('removefile')\n      ],\n\n      DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n      DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n      DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n      DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n      DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n      DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n      DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n      DID_THROW_ITEM_PROCESSING_ERROR: [\n        createEvent('error'),\n        createEvent('processfile')\n      ],\n\n      DID_REMOVE_ITEM: createEvent('removefile'),\n\n      DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n      DID_ACTIVATE_ITEM: createEvent('activatefile'),\n\n      DID_REORDER_ITEMS: createEvent('reorderfiles')\n    };\n\n    var exposeEvent = function exposeEvent(event) {\n      // create event object to be dispatched\n      var detail = Object.assign({ pond: exports }, event);\n      delete detail.type;\n      view.element.dispatchEvent(\n        new CustomEvent('FilePond:' + event.type, {\n          // event info\n          detail: detail,\n\n          // event behaviour\n          bubbles: true,\n          cancelable: true,\n          composed: true // triggers listeners outside of shadow root\n        })\n      );\n\n      // event object to params used for `on()` event handlers and callbacks `oninit()`\n      var params = [];\n\n      // if is possible error event, make it the first param\n      if (event.hasOwnProperty('error')) {\n        params.push(event.error);\n      }\n\n      // file is always section\n      if (event.hasOwnProperty('file')) {\n        params.push(event.file);\n      }\n\n      // append other props\n      var filtered = ['type', 'error', 'file'];\n      Object.keys(event)\n        .filter(function(key) {\n          return !filtered.includes(key);\n        })\n        .forEach(function(key) {\n          return params.push(event[key]);\n        });\n\n      // on(type, () => { })\n      exports.fire.apply(exports, [event.type].concat(params));\n\n      // oninit = () => {}\n      var handler = store.query('GET_ON' + event.type.toUpperCase());\n      if (handler) {\n        handler.apply(void 0, params);\n      }\n    };\n\n    var routeActionsToEvents = function routeActionsToEvents(actions) {\n      if (!actions.length) return;\n      actions\n        .filter(function(action) {\n          return eventRoutes[action.type];\n        })\n        .forEach(function(action) {\n          var routes = eventRoutes[action.type];\n          (Array.isArray(routes) ? routes : [routes]).forEach(function(route) {\n            // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n            if (action.type === 'DID_INIT_ITEM') {\n              exposeEvent(route(action.data));\n            } else {\n              setTimeout(function() {\n                exposeEvent(route(action.data));\n              }, 0);\n            }\n          });\n        });\n    };\n\n    //\n    // PUBLIC API -------------------------------------------------------------------------------------\n    //\n    var setOptions = function setOptions(options) {\n      return store.dispatch('SET_OPTIONS', { options: options });\n    };\n\n    var getFile = function getFile(query) {\n      return store.query('GET_ACTIVE_ITEM', query);\n    };\n\n    var prepareFile = function prepareFile(query) {\n      return new Promise(function(resolve, reject) {\n        store.dispatch('REQUEST_ITEM_PREPARE', {\n          query: query,\n          success: function success(item) {\n            resolve(item);\n          },\n          failure: function failure(error) {\n            reject(error);\n          }\n        });\n      });\n    };\n\n    var addFile = function addFile(source) {\n      var options =\n        arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new Promise(function(resolve, reject) {\n        addFiles([{ source: source, options: options }], {\n          index: options.index\n        })\n          .then(function(items) {\n            return resolve(items && items[0]);\n          })\n          .catch(reject);\n      });\n    };\n\n    var isFilePondFile = function isFilePondFile(obj) {\n      return obj.file && obj.id;\n    };\n\n    var removeFile = function removeFile(query, options) {\n      // if only passed options\n      if (typeof query === 'object' && !isFilePondFile(query) && !options) {\n        options = query;\n        query = undefined;\n      }\n\n      // request item removal\n      store.dispatch(\n        'REMOVE_ITEM',\n        Object.assign({}, options, { query: query })\n      );\n\n      // see if item has been removed\n      return store.query('GET_ACTIVE_ITEM', query) === null;\n    };\n\n    var addFiles = function addFiles() {\n      for (\n        var _len = arguments.length, args = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        args[_key] = arguments[_key];\n      }\n      return new Promise(function(resolve, reject) {\n        var sources = [];\n        var options = {};\n\n        // user passed a sources array\n        if (isArray(args[0])) {\n          sources.push.apply(sources, args[0]);\n          Object.assign(options, args[1] || {});\n        } else {\n          // user passed sources as arguments, last one might be options object\n          var lastArgument = args[args.length - 1];\n          if (\n            typeof lastArgument === 'object' &&\n            !(lastArgument instanceof Blob)\n          ) {\n            Object.assign(options, args.pop());\n          }\n\n          // add rest to sources\n          sources.push.apply(sources, args);\n        }\n\n        store.dispatch('ADD_ITEMS', {\n          items: sources,\n          index: options.index,\n          interactionMethod: InteractionMethod.API,\n          success: resolve,\n          failure: reject\n        });\n      });\n    };\n\n    var getFiles = function getFiles() {\n      return store.query('GET_ACTIVE_ITEMS');\n    };\n\n    var processFile = function processFile(query) {\n      return new Promise(function(resolve, reject) {\n        store.dispatch('REQUEST_ITEM_PROCESSING', {\n          query: query,\n          success: function success(item) {\n            resolve(item);\n          },\n          failure: function failure(error) {\n            reject(error);\n          }\n        });\n      });\n    };\n\n    var prepareFiles = function prepareFiles() {\n      for (\n        var _len2 = arguments.length, args = new Array(_len2), _key2 = 0;\n        _key2 < _len2;\n        _key2++\n      ) {\n        args[_key2] = arguments[_key2];\n      }\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n      var items = queries.length ? queries : getFiles();\n      return Promise.all(items.map(prepareFile));\n    };\n\n    var processFiles = function processFiles() {\n      for (\n        var _len3 = arguments.length, args = new Array(_len3), _key3 = 0;\n        _key3 < _len3;\n        _key3++\n      ) {\n        args[_key3] = arguments[_key3];\n      }\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n      if (!queries.length) {\n        var files = getFiles().filter(function(item) {\n          return (\n            !(\n              item.status === ItemStatus.IDLE &&\n              item.origin === FileOrigin.LOCAL\n            ) &&\n            item.status !== ItemStatus.PROCESSING &&\n            item.status !== ItemStatus.PROCESSING_COMPLETE &&\n            item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n          );\n        });\n\n        return Promise.all(files.map(processFile));\n      }\n      return Promise.all(queries.map(processFile));\n    };\n\n    var removeFiles = function removeFiles() {\n      for (\n        var _len4 = arguments.length, args = new Array(_len4), _key4 = 0;\n        _key4 < _len4;\n        _key4++\n      ) {\n        args[_key4] = arguments[_key4];\n      }\n\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n\n      var options;\n      if (typeof queries[queries.length - 1] === 'object') {\n        options = queries.pop();\n      } else if (Array.isArray(args[0])) {\n        options = args[1];\n      }\n\n      var files = getFiles();\n\n      if (!queries.length)\n        return Promise.all(\n          files.map(function(file) {\n            return removeFile(file, options);\n          })\n        );\n\n      // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n      var mappedQueries = queries\n        .map(function(query) {\n          return isNumber(query)\n            ? files[query]\n              ? files[query].id\n              : null\n            : query;\n        })\n        .filter(function(query) {\n          return query;\n        });\n\n      return mappedQueries.map(function(q) {\n        return removeFile(q, options);\n      });\n    };\n\n    var exports = Object.assign(\n      {},\n\n      on(),\n      {},\n\n      readWriteApi,\n      {},\n\n      createOptionAPI(store, defaultOptions),\n      {\n        /**\n         * Override options defined in options object\n         * @param options\n         */\n        setOptions: setOptions,\n\n        /**\n         * Load the given file\n         * @param source - the source of the file (either a File, base64 data uri or url)\n         * @param options - object, { index: 0 }\n         */\n        addFile: addFile,\n\n        /**\n         * Load the given files\n         * @param sources - the sources of the files to load\n         * @param options - object, { index: 0 }\n         */\n        addFiles: addFiles,\n\n        /**\n         * Returns the file objects matching the given query\n         * @param query { string, number, null }\n         */\n        getFile: getFile,\n\n        /**\n         * Upload file with given name\n         * @param query { string, number, null  }\n         */\n        processFile: processFile,\n\n        /**\n         * Request prepare output for file with given name\n         * @param query { string, number, null  }\n         */\n        prepareFile: prepareFile,\n\n        /**\n         * Removes a file by its name\n         * @param query { string, number, null  }\n         */\n        removeFile: removeFile,\n\n        /**\n         * Moves a file to a new location in the files list\n         */\n        moveFile: function moveFile(query, index) {\n          return store.dispatch('MOVE_ITEM', { query: query, index: index });\n        },\n\n        /**\n         * Returns all files (wrapped in public api)\n         */\n        getFiles: getFiles,\n\n        /**\n         * Starts uploading all files\n         */\n        processFiles: processFiles,\n\n        /**\n         * Clears all files from the files list\n         */\n        removeFiles: removeFiles,\n\n        /**\n         * Starts preparing output of all files\n         */\n        prepareFiles: prepareFiles,\n\n        /**\n         * Sort list of files\n         */\n        sort: function sort(compare) {\n          return store.dispatch('SORT', { compare: compare });\n        },\n\n        /**\n         * Browse the file system for a file\n         */\n        browse: function browse() {\n          // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n          var input = view.element.querySelector('input[type=file]');\n          if (input) {\n            input.click();\n          }\n        },\n\n        /**\n         * Destroys the app\n         */\n        destroy: function destroy() {\n          // request destruction\n          exports.fire('destroy', view.element);\n\n          // stop active processes (file uploads, fetches, stuff like that)\n          // loop over items and depending on states call abort for ongoing processes\n          store.dispatch('ABORT_ALL');\n\n          // destroy view\n          view._destroy();\n\n          // stop listening to resize\n          window.removeEventListener('resize', resizeHandler);\n\n          // stop listening to the visiblitychange event\n          document.removeEventListener('visibilitychange', visibilityHandler);\n\n          // dispatch destroy\n          store.dispatch('DID_DESTROY');\n        },\n\n        /**\n         * Inserts the plugin before the target element\n         */\n        insertBefore: function insertBefore$1(element) {\n          return insertBefore(view.element, element);\n        },\n\n        /**\n         * Inserts the plugin after the target element\n         */\n        insertAfter: function insertAfter$1(element) {\n          return insertAfter(view.element, element);\n        },\n\n        /**\n         * Appends the plugin to the target element\n         */\n        appendTo: function appendTo(element) {\n          return element.appendChild(view.element);\n        },\n\n        /**\n         * Replaces an element with the app\n         */\n        replaceElement: function replaceElement(element) {\n          // insert the app before the element\n          insertBefore(view.element, element);\n\n          // remove the original element\n          element.parentNode.removeChild(element);\n\n          // remember original element\n          originalElement = element;\n        },\n\n        /**\n         * Restores the original element\n         */\n        restoreElement: function restoreElement() {\n          if (!originalElement) {\n            return; // no element to restore\n          }\n\n          // restore original element\n          insertAfter(originalElement, view.element);\n\n          // remove our element\n          view.element.parentNode.removeChild(view.element);\n\n          // remove reference\n          originalElement = null;\n        },\n\n        /**\n         * Returns true if the app root is attached to given element\n         * @param element\n         */\n        isAttachedTo: function isAttachedTo(element) {\n          return view.element === element || originalElement === element;\n        },\n\n        /**\n         * Returns the root element\n         */\n        element: {\n          get: function get() {\n            return view.element;\n          }\n        },\n\n        /**\n         * Returns the current pond status\n         */\n        status: {\n          get: function get() {\n            return store.query('GET_STATUS');\n          }\n        }\n      }\n    );\n\n    // Done!\n    store.dispatch('DID_INIT');\n\n    // create actual api object\n    return createObject(exports);\n  };\n\n  var createAppObject = function createAppObject() {\n    var customOptions =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // default options\n    var defaultOptions = {};\n    forin(getOptions(), function(key, value) {\n      defaultOptions[key] = value[0];\n    });\n\n    // set app options\n    var app = createApp(\n      Object.assign(\n        {},\n\n        defaultOptions,\n        {},\n\n        customOptions\n      )\n    );\n\n    // return the plugin instance\n    return app;\n  };\n\n  var lowerCaseFirstLetter = function lowerCaseFirstLetter(string) {\n    return string.charAt(0).toLowerCase() + string.slice(1);\n  };\n\n  var attributeNameToPropertyName = function attributeNameToPropertyName(\n    attributeName\n  ) {\n    return toCamels(attributeName.replace(/^data-/, ''));\n  };\n\n  var mapObject = function mapObject(object, propertyMap) {\n    // remove unwanted\n    forin(propertyMap, function(selector, mapping) {\n      forin(object, function(property, value) {\n        // create regexp shortcut\n        var selectorRegExp = new RegExp(selector);\n\n        // tests if\n        var matches = selectorRegExp.test(property);\n\n        // no match, skip\n        if (!matches) {\n          return;\n        }\n\n        // if there's a mapping, the original property is always removed\n        delete object[property];\n\n        // should only remove, we done!\n        if (mapping === false) {\n          return;\n        }\n\n        // move value to new property\n        if (isString(mapping)) {\n          object[mapping] = value;\n          return;\n        }\n\n        // move to group\n        var group = mapping.group;\n        if (isObject(mapping) && !object[group]) {\n          object[group] = {};\n        }\n\n        object[group][\n          lowerCaseFirstLetter(property.replace(selectorRegExp, ''))\n        ] = value;\n      });\n\n      // do submapping\n      if (mapping.mapping) {\n        mapObject(object[mapping.group], mapping.mapping);\n      }\n    });\n  };\n\n  var getAttributesAsObject = function getAttributesAsObject(node) {\n    var attributeMapping =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // turn attributes into object\n    var attributes = [];\n    forin(node.attributes, function(index) {\n      attributes.push(node.attributes[index]);\n    });\n\n    var output = attributes\n      .filter(function(attribute) {\n        return attribute.name;\n      })\n      .reduce(function(obj, attribute) {\n        var value = attr(node, attribute.name);\n\n        obj[attributeNameToPropertyName(attribute.name)] =\n          value === attribute.name ? true : value;\n        return obj;\n      }, {});\n\n    // do mapping of object properties\n    mapObject(output, attributeMapping);\n\n    return output;\n  };\n\n  var createAppAtElement = function createAppAtElement(element) {\n    var options =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    // how attributes of the input element are mapped to the options for the plugin\n    var attributeMapping = {\n      // translate to other name\n      '^class$': 'className',\n      '^multiple$': 'allowMultiple',\n      '^capture$': 'captureMethod',\n      '^webkitdirectory$': 'allowDirectoriesOnly',\n\n      // group under single property\n      '^server': {\n        group: 'server',\n        mapping: {\n          '^process': {\n            group: 'process'\n          },\n\n          '^revert': {\n            group: 'revert'\n          },\n\n          '^fetch': {\n            group: 'fetch'\n          },\n\n          '^restore': {\n            group: 'restore'\n          },\n\n          '^load': {\n            group: 'load'\n          }\n        }\n      },\n\n      // don't include in object\n      '^type$': false,\n      '^files$': false\n    };\n\n    // add additional option translators\n    applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n    // create final options object by setting options object and then overriding options supplied on element\n    var mergedOptions = Object.assign({}, options);\n\n    var attributeOptions = getAttributesAsObject(\n      element.nodeName === 'FIELDSET'\n        ? element.querySelector('input[type=file]')\n        : element,\n      attributeMapping\n    );\n\n    // merge with options object\n    Object.keys(attributeOptions).forEach(function(key) {\n      if (isObject(attributeOptions[key])) {\n        if (!isObject(mergedOptions[key])) {\n          mergedOptions[key] = {};\n        }\n        Object.assign(mergedOptions[key], attributeOptions[key]);\n      } else {\n        mergedOptions[key] = attributeOptions[key];\n      }\n    });\n\n    // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n    // these will then be automatically set to the initial files\n    mergedOptions.files = (options.files || []).concat(\n      Array.from(element.querySelectorAll('input:not([type=file])')).map(\n        function(input) {\n          return {\n            source: input.value,\n            options: {\n              type: input.dataset.type\n            }\n          };\n        }\n      )\n    );\n\n    // build plugin\n    var app = createAppObject(mergedOptions);\n\n    // add already selected files\n    if (element.files) {\n      Array.from(element.files).forEach(function(file) {\n        app.addFile(file);\n      });\n    }\n\n    // replace the target element\n    app.replaceElement(element);\n\n    // expose\n    return app;\n  };\n\n  // if an element is passed, we create the instance at that element, if not, we just create an up object\n  var createApp$1 = function createApp() {\n    return isNode(arguments.length <= 0 ? undefined : arguments[0])\n      ? createAppAtElement.apply(void 0, arguments)\n      : createAppObject.apply(void 0, arguments);\n  };\n\n  var PRIVATE_METHODS = ['fire', '_read', '_write'];\n\n  var createAppAPI = function createAppAPI(app) {\n    var api = {};\n\n    copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n    return api;\n  };\n\n  /**\n   * Replaces placeholders in given string with replacements\n   * @param string - \"Foo {bar}\"\"\n   * @param replacements - { \"bar\": 10 }\n   */\n  var replaceInString = function replaceInString(string, replacements) {\n    return string.replace(/(?:{([a-zA-Z]+)})/g, function(match, group) {\n      return replacements[group];\n    });\n  };\n\n  var createWorker = function createWorker(fn) {\n    var workerBlob = new Blob(['(', fn.toString(), ')()'], {\n      type: 'application/javascript'\n    });\n\n    var workerURL = URL.createObjectURL(workerBlob);\n    var worker = new Worker(workerURL);\n\n    return {\n      transfer: function transfer(message, cb) {},\n      post: function post(message, cb, transferList) {\n        var id = getUniqueId();\n\n        worker.onmessage = function(e) {\n          if (e.data.id === id) {\n            cb(e.data.message);\n          }\n        };\n\n        worker.postMessage(\n          {\n            id: id,\n            message: message\n          },\n\n          transferList\n        );\n      },\n      terminate: function terminate() {\n        worker.terminate();\n        URL.revokeObjectURL(workerURL);\n      }\n    };\n  };\n\n  var loadImage = function loadImage(url) {\n    return new Promise(function(resolve, reject) {\n      var img = new Image();\n      img.onload = function() {\n        resolve(img);\n      };\n      img.onerror = function(e) {\n        reject(e);\n      };\n      img.src = url;\n    });\n  };\n\n  var renameFile = function renameFile(file, name) {\n    var renamedFile = file.slice(0, file.size, file.type);\n    renamedFile.lastModifiedDate = file.lastModifiedDate;\n    renamedFile.name = name;\n    return renamedFile;\n  };\n\n  var copyFile = function copyFile(file) {\n    return renameFile(file, file.name);\n  };\n\n  // already registered plugins (can't register twice)\n  var registeredPlugins = [];\n\n  // pass utils to plugin\n  var createAppPlugin = function createAppPlugin(plugin) {\n    // already registered\n    if (registeredPlugins.includes(plugin)) {\n      return;\n    }\n\n    // remember this plugin\n    registeredPlugins.push(plugin);\n\n    // setup!\n    var pluginOutline = plugin({\n      addFilter: addFilter,\n      utils: {\n        Type: Type,\n        forin: forin,\n        isString: isString,\n        isFile: isFile,\n        toNaturalFileSize: toNaturalFileSize,\n        replaceInString: replaceInString,\n        getExtensionFromFilename: getExtensionFromFilename,\n        getFilenameWithoutExtension: getFilenameWithoutExtension,\n        guesstimateMimeType: guesstimateMimeType,\n        getFileFromBlob: getFileFromBlob,\n        getFilenameFromURL: getFilenameFromURL,\n        createRoute: createRoute,\n        createWorker: createWorker,\n        createView: createView,\n        createItemAPI: createItemAPI,\n        loadImage: loadImage,\n        copyFile: copyFile,\n        renameFile: renameFile,\n        createBlob: createBlob,\n        applyFilterChain: applyFilterChain,\n        text: text,\n        getNumericAspectRatioFromString: getNumericAspectRatioFromString\n      },\n\n      views: {\n        fileActionButton: fileActionButton\n      }\n    });\n\n    // add plugin options to default options\n    extendDefaultOptions(pluginOutline.options);\n  };\n\n  // feature detection used by supported() method\n  var isOperaMini = function isOperaMini() {\n    return (\n      Object.prototype.toString.call(window.operamini) === '[object OperaMini]'\n    );\n  };\n  var hasPromises = function hasPromises() {\n    return 'Promise' in window;\n  };\n  var hasBlobSlice = function hasBlobSlice() {\n    return 'slice' in Blob.prototype;\n  };\n  var hasCreateObjectURL = function hasCreateObjectURL() {\n    return 'URL' in window && 'createObjectURL' in window.URL;\n  };\n  var hasVisibility = function hasVisibility() {\n    return 'visibilityState' in document;\n  };\n  var hasTiming = function hasTiming() {\n    return 'performance' in window;\n  }; // iOS 8.x\n  var hasCSSSupports = function hasCSSSupports() {\n    return 'supports' in (window.CSS || {});\n  }; // use to detect Safari 9+\n  var isIE11 = function isIE11() {\n    return /MSIE|Trident/.test(window.navigator.userAgent);\n  };\n\n  var supported = (function() {\n    // Runs immediately and then remembers result for subsequent calls\n    var isSupported =\n      // Has to be a browser\n      isBrowser() &&\n      // Can't run on Opera Mini due to lack of everything\n      !isOperaMini() &&\n      // Require these APIs to feature detect a modern browser\n      hasVisibility() &&\n      hasPromises() &&\n      hasBlobSlice() &&\n      hasCreateObjectURL() &&\n      hasTiming() &&\n      // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n      (hasCSSSupports() || isIE11());\n\n    return function() {\n      return isSupported;\n    };\n  })();\n\n  /**\n   * Plugin internal state (over all instances)\n   */\n  var state = {\n    // active app instances, used to redraw the apps and to find the later\n    apps: []\n  };\n\n  // plugin name\n  var name = 'filepond';\n\n  /**\n   * Public Plugin methods\n   */\n  var fn = function fn() {};\n  exports.Status = {};\n  exports.FileStatus = {};\n  exports.FileOrigin = {};\n  exports.OptionTypes = {};\n  exports.create = fn;\n  exports.destroy = fn;\n  exports.parse = fn;\n  exports.find = fn;\n  exports.registerPlugin = fn;\n  exports.getOptions = fn;\n  exports.setOptions = fn;\n\n  // if not supported, no API\n  if (supported()) {\n    // start painter and fire load event\n    createPainter(\n      function() {\n        state.apps.forEach(function(app) {\n          return app._read();\n        });\n      },\n      function(ts) {\n        state.apps.forEach(function(app) {\n          return app._write(ts);\n        });\n      }\n    );\n\n    // fire loaded event so we know when FilePond is available\n    var dispatch = function dispatch() {\n      // let others know we have area ready\n      document.dispatchEvent(\n        new CustomEvent('FilePond:loaded', {\n          detail: {\n            supported: supported,\n            create: exports.create,\n            destroy: exports.destroy,\n            parse: exports.parse,\n            find: exports.find,\n            registerPlugin: exports.registerPlugin,\n            setOptions: exports.setOptions\n          }\n        })\n      );\n\n      // clean up event\n      document.removeEventListener('DOMContentLoaded', dispatch);\n    };\n\n    if (document.readyState !== 'loading') {\n      // move to back of execution queue, FilePond should have been exported by then\n      setTimeout(function() {\n        return dispatch();\n      }, 0);\n    } else {\n      document.addEventListener('DOMContentLoaded', dispatch);\n    }\n\n    // updates the OptionTypes object based on the current options\n    var updateOptionTypes = function updateOptionTypes() {\n      return forin(getOptions(), function(key, value) {\n        exports.OptionTypes[key] = value[1];\n      });\n    };\n\n    exports.Status = Object.assign({}, Status);\n    exports.FileOrigin = Object.assign({}, FileOrigin);\n    exports.FileStatus = Object.assign({}, ItemStatus);\n\n    exports.OptionTypes = {};\n    updateOptionTypes();\n\n    // create method, creates apps and adds them to the app array\n    exports.create = function create() {\n      var app = createApp$1.apply(void 0, arguments);\n      app.on('destroy', exports.destroy);\n      state.apps.push(app);\n      return createAppAPI(app);\n    };\n\n    // destroys apps and removes them from the app array\n    exports.destroy = function destroy(hook) {\n      // returns true if the app was destroyed successfully\n      var indexToRemove = state.apps.findIndex(function(app) {\n        return app.isAttachedTo(hook);\n      });\n      if (indexToRemove >= 0) {\n        // remove from apps\n        var app = state.apps.splice(indexToRemove, 1)[0];\n\n        // restore original dom element\n        app.restoreElement();\n\n        return true;\n      }\n\n      return false;\n    };\n\n    // parses the given context for plugins (does not include the context element itself)\n    exports.parse = function parse(context) {\n      // get all possible hooks\n      var matchedHooks = Array.from(context.querySelectorAll('.' + name));\n\n      // filter out already active hooks\n      var newHooks = matchedHooks.filter(function(newHook) {\n        return !state.apps.find(function(app) {\n          return app.isAttachedTo(newHook);\n        });\n      });\n\n      // create new instance for each hook\n      return newHooks.map(function(hook) {\n        return exports.create(hook);\n      });\n    };\n\n    // returns an app based on the given element hook\n    exports.find = function find(hook) {\n      var app = state.apps.find(function(app) {\n        return app.isAttachedTo(hook);\n      });\n      if (!app) {\n        return null;\n      }\n      return createAppAPI(app);\n    };\n\n    // adds a plugin extension\n    exports.registerPlugin = function registerPlugin() {\n      for (\n        var _len = arguments.length, plugins = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        plugins[_key] = arguments[_key];\n      }\n\n      // register plugins\n      plugins.forEach(createAppPlugin);\n\n      // update OptionTypes, each plugin might have extended the default options\n      updateOptionTypes();\n    };\n\n    exports.getOptions = function getOptions$1() {\n      var opts = {};\n      forin(getOptions(), function(key, value) {\n        opts[key] = value[0];\n      });\n      return opts;\n    };\n\n    exports.setOptions = function setOptions$1(opts) {\n      if (isObject(opts)) {\n        // update existing plugins\n        state.apps.forEach(function(app) {\n          app.setOptions(opts);\n        });\n\n        // override defaults\n        setOptions(opts);\n      }\n\n      // return new options\n      return exports.getOptions();\n    };\n  }\n\n  exports.supported = supported;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n});\n","import { Component, ElementRef, ViewEncapsulation, EventEmitter, NgZone, Input, NgModule } from '@angular/core';\nimport { create, supported } from 'filepond';\nimport * as ɵngcc0 from '@angular/core';\nexport { registerPlugin } from 'filepond';\nimport { CommonModule } from '@angular/common';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n// We test if filepond is supported on the current client\nconst isSupported = supported();\n// List of attributes for fallback input\nconst inputAttributes = [\n    'id',\n    'name',\n    'class',\n    'multiple',\n    'required',\n    'disabled',\n    'capture',\n    'accept'\n];\n// Methods not made available on the component\nconst filteredComponentMethods = [\n    'setOptions',\n    'on',\n    'off',\n    'onOnce',\n    'appendTo',\n    'insertAfter',\n    'insertBefore',\n    'isAttachedTo',\n    'replaceElement',\n    'restoreElement',\n    'destroy'\n];\nconst outputs = [\n    'oninit',\n    'onwarning',\n    'onerror',\n    'onactivatefile',\n    'onaddfilestart',\n    'onaddfileprogress',\n    'onaddfile',\n    'onprocessfilestart',\n    'onprocessfileprogress',\n    'onprocessfileabort',\n    'onprocessfilerevert',\n    'onprocessfile',\n    'onprocessfiles',\n    'onremovefile',\n    'onpreparefile',\n    'onupdatefiles'\n];\nclass FilePondComponent {\n    /**\n     * @param {?} root\n     * @param {?} zone\n     */\n    constructor(root, zone) {\n        this.options = {};\n        this.handleEvent = null;\n        this.root = root;\n        this.zone = zone;\n        outputs.forEach(output => {\n            this[output] = new EventEmitter();\n        });\n    }\n    /**\n     * @return {?}\n     */\n    ngAfterViewInit() {\n        const /** @type {?} */ input = this.root.nativeElement.querySelector('input');\n        // transfer relevant attributes to input, this so we still have an input with the correct attributes should file pond not load\n        const /** @type {?} */ attributes = this.root.nativeElement.attributes;\n        inputAttributes.forEach(name => {\n            const /** @type {?} */ value = attributes[name] ? attributes[name].value : this.options[name];\n            if (!value) {\n                return;\n            }\n            input.setAttribute(name, value);\n        });\n        // no sufficient features supported in this browser\n        if (!isSupported) {\n            return;\n        }\n        // map FilePond events to Angular $emitters\n        this.handleEvent = (e) => {\n            this[`on${e.type.split(':')[1]}`].emit(Object.assign({}, e.detail));\n        };\n        outputs.forEach(event => {\n            this.root.nativeElement.addEventListener(`FilePond:${event.substr(2)}`, this.handleEvent);\n        });\n        // will block angular from listening to events inside the pond\n        this.zone.runOutsideAngular(() => {\n            // create instance\n            this.pond = create(input, Object.assign({}, this.options, { files: this.files }));\n        });\n        // Copy instance method references to component instance\n        Object.keys(this.pond)\n            .filter(key => filteredComponentMethods.indexOf(key) === -1)\n            .forEach(key => {\n            this[key] = this.pond[key];\n        });\n    }\n    /**\n     * @param {?} changes\n     * @return {?}\n     */\n    ngOnChanges(changes) {\n        // no need to handle first change\n        if (changes[\"firstChange\"]) {\n            return;\n        }\n        \n        // no filepond instance available\n        if (!this.pond) {\n            return;\n        }\n        // use new options object as base ( or if not available, use current options )\n        const /** @type {?} */ options = changes[\"options\"] ? changes[\"options\"].currentValue : this.options;\n        // see if file list has changed\n        if (changes[\"files\"] && JSON.stringify(changes[\"files\"].previousValue) !== JSON.stringify(changes[\"files\"].currentValue)) {\n            // file list has changed\n            options.files = changes[\"files\"].currentValue;\n        }\n        // set new options\n        this.pond.setOptions(options);\n    }\n    /**\n     * @return {?}\n     */\n    ngOnDestroy() {\n        if (!this.pond) {\n            return;\n        }\n        outputs.forEach(event => {\n            this.root.nativeElement.removeEventListener(`FilePond:${event.substr(2)}`, this.handleEvent);\n        });\n        this.pond.destroy();\n    }\n}\nFilePondComponent.ɵfac = function FilePondComponent_Factory(t) { return new (t || FilePondComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };\nFilePondComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FilePondComponent, selectors: [[\"file-pond\"]], inputs: { options: \"options\", files: \"files\" }, outputs: { oninit: \"oninit\", onwarning: \"onwarning\", onerror: \"onerror\", onactivatefile: \"onactivatefile\", onaddfilestart: \"onaddfilestart\", onaddfileprogress: \"onaddfileprogress\", onaddfile: \"onaddfile\", onprocessfilestart: \"onprocessfilestart\", onprocessfileprogress: \"onprocessfileprogress\", onprocessfileabort: \"onprocessfileabort\", onprocessfilerevert: \"onprocessfilerevert\", onprocessfile: \"onprocessfile\", onprocessfiles: \"onprocessfiles\", onremovefile: \"onremovefile\", onpreparefile: \"onpreparefile\", onupdatefiles: \"onupdatefiles\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 2, vars: 0, consts: [[1, \"filepond--wrapper\"], [\"type\", \"file\"]], template: function FilePondComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelement(1, \"input\", 1);\n        ɵngcc0.ɵɵelementEnd();\n    } }, styles: [\"\"], encapsulation: 2 });\n/** @nocollapse */\nFilePondComponent.ctorParameters = () => [\n    { type: ElementRef, },\n    { type: NgZone, },\n];\nFilePondComponent.propDecorators = {\n    \"options\": [{ type: Input },],\n    \"files\": [{ type: Input },],\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FilePondComponent, [{\n        type: Component,\n        args: [{\n                selector: 'file-pond',\n                encapsulation: ViewEncapsulation.None,\n                template: `<div class=\"filepond--wrapper\">\n  <input type=\"file\"/>\n</div>`,\n                styles: [``],\n                outputs\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }]; }, { options: [{\n            type: Input\n        }], files: [{\n            type: Input\n        }] }); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nclass FilePondModule {\n}\nFilePondModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: FilePondModule });\nFilePondModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function FilePondModule_Factory(t) { return new (t || FilePondModule)(); }, imports: [[\n            CommonModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(FilePondModule, { declarations: function () { return [FilePondComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [FilePondComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FilePondModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                declarations: [FilePondComponent],\n                exports: [\n                    FilePondComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { FilePondModule, FilePondComponent as ɵa };\n\n//# sourceMappingURL=ngx-filepond.js.map","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-modal-footer',\n  templateUrl: './modal-footer.component.html',\n  styleUrls: ['./modal-footer.component.scss']\n})\nexport class ModalFooterComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<ng-content></ng-content>\n","import { Component, OnInit } from '@angular/core';\nimport { ModalService } from '../modal.service';\n\n@Component({\n  selector: 'app-modal-header',\n  templateUrl: './modal-header.component.html',\n  styleUrls: ['./modal-header.component.scss']\n})\nexport class ModalHeaderComponent implements OnInit {\n\n  constructor(public modalService: ModalService) { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"modal-header\">\n  <button class=\"modal-header-back-button\" type=\"button\" name=\"back\">Back</button>\n  <span class=\"modal-header-text\"><ng-content></ng-content></span>\n  <button class=\"modal-header-close-button\" type=\"button\" name=\"close\" (click)=\"modalService.closeModal()\">Close</button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ModalService } from './modal.service';\n\n@Component({\n  selector: 'app-modal',\n  templateUrl: './modal.component.html',\n  styleUrls: ['./modal.component.scss']\n})\nexport class ModalComponent implements OnInit {\n\n  constructor(public modalService: ModalService) { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"modal-overlay\" [ngClass]=\"{'modal-overlay-hidden': !modalService.isModalOpen}\" (click)=\"modalService.closeModal()\">\n  <div class=\"modal-aligner\">\n    <div class=\"modal\" (click)=\"$event.stopPropagation()\">\n      <ng-content></ng-content>\n    </div>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ModalComponent } from './modal.component';\nimport { ModalHeaderComponent } from './modal-header/modal-header.component';\nimport { ModalFooterComponent } from './modal-footer/modal-footer.component';\n\n\n\n@NgModule({\n  declarations: [ModalComponent, ModalHeaderComponent, ModalFooterComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n            ModalComponent,\n            ModalHeaderComponent,\n            ModalFooterComponent\n          ]\n})\nexport class ModalModule { }\n","import { Component, OnInit, ViewChild } from '@angular/core';\n\n@Component({\n  selector: 'app-post-dialogue',\n  templateUrl: './post-dialogue.component.html',\n  styleUrls: ['./post-dialogue.component.scss']\n})\nexport class PostDialogueComponent implements OnInit {\n\n  idioms = [\n    \"What's cookin', good lookin'?\",\n    \"What's the story, morning glory?\",\n    \"What's the plan, Stan?\",\n    \"What's shakin', bacon?\",\n    \"What's the deal, banana peel?\"\n  ]\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  getRandomIdiom(): string {\n    return this.idioms[Math.floor(Math.random() * this.idioms.length)];\n  }\n\n  @ViewChild('myPond') myPond: any;\n\n  pondOptions = {\n    class: 'my-filepond',\n    multiple: true,\n    labelIdle: 'Drop files here or click here to upload',\n    acceptedFileTypes: 'image/jpeg, image/png'\n  }\n\n  pondFiles = [];\n\n  pondHandleInit() {\n    console.log('FilePond has initialised', this.myPond);\n  }\n\n  pondHandleAddFile(event: any) {\n    console.log('A file was added', event);\n  }\n\n}\n","<!-- <quill-editor></quill-editor> -->\n\n\n<div class=\"new-post\">\n  <div class=\"new-post-textarea\">\n    <textarea placeholder=\"What's up?\" name=\"name\"></textarea>\n      <!-- <div class=\"file-upload-wrapper\">\n        <div class=\"file-upload\">\n          <file-pond #myPond\n          style=\"max-width: 400px;\"\n          [options]=\"pondOptions\"\n          [files]=\"pondFiles\"\n          (oninit)=\"pondHandleInit()\"\n          (onaddfile)=\"pondHandleAddFile($event)\">\n          </file-pond>\n        </div>\n      </div> -->\n  </div>\n\n  <div class=\"new-post-action-footer\">\n    <button type=\"button\" class=\"action-button\">\n      <i class=\"fas fa-photo-video\"></i>\n    </button>\n    <button type=\"button\" class=\"action-button\">\n      <i class=\"fas fa-smile-wink\"></i>\n    </button>\n    <div class=\"new-post-action-footer-left\">\n      <button type=\"button\" class=\"post-button\">Post</button>\n    </div>\n\n  </div>\n\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PostDialogueComponent } from './post-dialogue.component';\nimport { QuillModule } from 'ngx-quill';\nimport { FilePondModule, registerPlugin } from 'ngx-filepond';\n\nimport FilePondPluginMediaPreview from 'filepond-plugin-media-preview';\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview';\n\nregisterPlugin(FilePondPluginMediaPreview);\nregisterPlugin(FilePondPluginImagePreview);\n\n@NgModule({\n  declarations: [PostDialogueComponent],\n  imports: [\n    CommonModule,\n    QuillModule,\n    FilePondModule\n  ],\n  exports: [PostDialogueComponent]\n})\nexport class PostDialogueModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-post',\n  templateUrl: './post.component.html',\n  styleUrls: ['./post.component.scss']\n})\nexport class PostComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"post\">\n  <div class=\"post-header\">\n    <div class=\"post-header-glyph\" style=\"background-image: url(../../assets/test_glyph.jpeg)\"></div>\n    <div class=\"post-header-info\">\n      <div class=\"post-header-name\">devytheheavychevy</div>\n      <div class=\"post-header-date\">August 12th</div>\n    </div>\n  </div>\n  <div class=\"post-text\">This is a test post. Here is some text that will be rendered in the post.</div>\n  <div class=\"post-content\">\n    <div class=\"post-content-overlay\">\n\n    </div>\n    <i class=\"fas fa-photo-video\"></i>\n  </div>\n  <div class=\"post-footer\">\n    <button class=\"post-footer-button\" type=\"button\" name=\"love-button\"><i class=\"fas fa-heart\"></i>Love</button>\n    <button class=\"post-footer-button\" type=\"button\" name=\"comment-button\"><i class=\"fas fa-comment\"></i>Comment</button>\n  </div>\n  <div class=\"post-comments\">\n    \n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PostComponent } from './post.component';\n\n\n\n@NgModule({\n  declarations: [PostComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [PostComponent]\n})\nexport class PostModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-spinner',\n  templateUrl: './spinner.component.html',\n  styleUrls: ['./spinner.component.scss']\n})\nexport class SpinnerComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"spinner\">\n  <div class=\"cube1\"></div>\n  <div class=\"cube2\"></div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SpinnerComponent } from './spinner.component';\n\n\n\n@NgModule({\n  declarations: [SpinnerComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [SpinnerComponent]\n})\nexport class SpinnerModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomeComponent } from './home.component';\nimport { ModalComponent } from 'src/app/common/modal/modal.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomeComponent,\n    children: [\n      {\n        path: 'create-post', // child route path\n        component: ModalComponent, // child route component that the router renders\n      }]\n  }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomeRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n\n  loadingDone = false;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    setTimeout(() => {\n      this.loadingDone = true;\n    }, 1500);\n  }\n\n}\n","\n<div class=\"container\">\n  <div class=\"feed\">\n    <app-post-dialogue></app-post-dialogue>\n\n    <app-spinner *ngIf=\"!loadingDone\"></app-spinner>\n\n    <ng-container *ngIf=\"loadingDone\">\n      <app-post></app-post>\n      <app-post></app-post>\n      <app-post></app-post>\n    </ng-container>\n\n\n  </div>\n\n  <div class=\"sidebar\">\n    <h1>Trending Creators</h1>\n  </div>\n</div>\n\n<router-outlet></router-outlet>\n<app-modal>\n  <app-modal-header>Create Post</app-modal-header>\n  <app-modal-footer>Test footer content</app-modal-footer>\n</app-modal>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { HomeRoutingModule } from './home-routing.module';\nimport { HomeComponent } from './home.component';\nimport { PostDialogueModule } from 'src/app/common/post-dialogue/post-dialogue.module';\nimport { PostModule } from 'src/app/common/post/post.module';\nimport { SpinnerModule } from 'src/app/common/spinner/spinner.module';\nimport { ModalModule } from 'src/app/common/modal/modal.module';\n\n\n@NgModule({\n  declarations: [HomeComponent],\n  imports: [\n    CommonModule,\n    HomeRoutingModule,\n    PostDialogueModule,\n    PostModule,\n    SpinnerModule,\n    ModalModule\n  ]\n})\nexport class HomeModule { }\n"]}